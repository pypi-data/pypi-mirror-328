description: 'Testing verbs for device: show summarize unique'
tests:
- command: device show --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  marks: device show
  output: '[{"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "edge01", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.56", "uptime": 44777, "timestamp":
    1594385818777}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "exit01",
    "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.125", "uptime": 39795, "timestamp":
    1594385818795}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "exit02",
    "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.6", "uptime": 39777, "timestamp": 1594385818777},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "internet", "model":
    "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.186", "uptime": 39873, "timestamp": 1594385818873},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "leaf01", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.240", "uptime": 39787, "timestamp": 1594385818787},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "leaf02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.206", "uptime": 39795, "timestamp": 1594385818795},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.126", "uptime": 39795, "timestamp": 1594385818795},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "leaf04", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.182", "uptime": 38795, "timestamp": 1594385818795},
    {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "server101", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.80", "uptime": 141777, "timestamp":
    1594385818777}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "server102",
    "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.123", "uptime": 147777, "timestamp":
    1594385818777}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "server103",
    "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.78", "uptime": 140777, "timestamp":
    1594385818777}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "server104",
    "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.118", "uptime": 138777, "timestamp":
    1594385818777}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "spine01",
    "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.63", "uptime": 39873, "timestamp":
    1594385818873}, {"namespace": "single-attach_evpn_ospf-ibgp", "hostname": "spine02",
    "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.172", "uptime": 39863, "timestamp":
    1594385818863}]'
- command: device show --columns=hostname --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  marks: device show
  output: '[{"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server104"}, {"hostname": "spine01"},
    {"hostname": "spine02"}]'
- command: device summarize --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  marks: device summarize
  output: '{"single-attach_evpn_ospf-ibgp": {"deviceCnt": 14, "vendorCnt": {"Cumulus":
    9, "Ubuntu": 5}, "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt":
    {"3.7.12": 9, "16.04.6 LTS": 5}, "upTimeStat": [38795, 147777, 39868]}}'
- command: device summarize --columns="namespace hostname" --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  error:
    error: '{"error": {"0": "ERROR: You cannot specify columns with summarize"}}'
  marks: device summarize
- command: device unique --columns=hostname --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  marks: device unique
  output: '[{"hostname": "spine02", "count": 1}, {"hostname": "spine01", "count":
    1}, {"hostname": "server104", "count": 1}, {"hostname": "server103", "count":
    1}, {"hostname": "server102", "count": 1}, {"hostname": "server101", "count":
    1}, {"hostname": "leaf04", "count": 1}, {"hostname": "leaf03", "count": 1}, {"hostname":
    "leaf02", "count": 1}, {"hostname": "leaf01", "count": 1}, {"hostname": "internet",
    "count": 1}, {"hostname": "exit02", "count": 1}, {"hostname": "exit01", "count":
    1}, {"hostname": "edge01", "count": 1}]'
- command: device unique --columns="hostname namespace" --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  error:
    error: '[{"error": "ERROR: Specify a single column with unique"}]'
  marks: device unique
- command: device unique --columns=badcolumn --format=json --namespace=single-attach_evpn_ospf-ibgp
  data-directory: /tmp/suzieq-tests-parquet/single-attach_evpn_ospf-ibgp/parquet-out
  error:
    error: '[{"error": "ERROR: ''badcolumn''"}]'
  marks: device unique
