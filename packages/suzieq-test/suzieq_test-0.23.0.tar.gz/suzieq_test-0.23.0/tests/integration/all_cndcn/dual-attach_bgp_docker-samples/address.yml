description: 'Testing verbs for address: show summarize unique'
tests:
- command: address show --format=json --namespace=dual-attach_bgp_docker
  data-directory: /tmp/suzieq-tests-parquet/dual-attach_bgp_docker/parquet-out
  marks: address show
  output: '[{"namespace": "dual-attach_bgp_docker", "hostname": "edge01", "ifname":
    "eth0", "ipAddressList": ["192.168.121.62/24"], "macaddr": "52:54:00:e7:53:fb",
    "ip6AddressList": [], "state": "up", "timestamp": 1594706580036}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "edge01", "ifname": "eth1.2", "ipAddressList":
    ["169.254.254.2/30"], "macaddr": "52:54:00:8c:3b:e2", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "edge01", "ifname": "eth1.4", "ipAddressList": ["169.254.254.10/30"], "macaddr":
    "52:54:00:8c:3b:e2", "ip6AddressList": [], "state": "up", "timestamp": 1594706580036},
    {"namespace": "dual-attach_bgp_docker", "hostname": "edge01", "ifname": "eth2.2",
    "ipAddressList": ["169.254.253.2/30"], "macaddr": "52:54:00:be:c2:a3", "ip6AddressList":
    [], "state": "up", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "edge01", "ifname": "eth2.4", "ipAddressList": ["169.254.253.10/30"],
    "macaddr": "52:54:00:be:c2:a3", "ip6AddressList": [], "state": "up", "timestamp":
    1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname": "edge01",
    "ifname": "lo", "ipAddressList": ["10.0.0.100/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": [], "state": "up", "timestamp": 1594706580036}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "exit01", "ifname": "eth0", "ipAddressList":
    ["192.168.121.244/24"], "macaddr": "52:54:00:75:f2:54", "ip6AddressList": ["fe80::5054:ff:fe75:f254/64"],
    "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "exit01", "ifname": "internet-vrf", "ipAddressList": ["10.0.0.101/32"],
    "macaddr": "2a:90:f8:9c:e5:54", "ip6AddressList": [], "state": "up", "timestamp":
    1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname": "exit01",
    "ifname": "lo", "ipAddressList": ["10.0.0.101/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": ["::1/128"], "state": "up", "timestamp": 1594706580214}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "exit01", "ifname": "mgmt", "ipAddressList":
    ["127.0.0.1/8"], "macaddr": "f2:f6:a6:bb:74:ab", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "exit01", "ifname": "swp5.2", "ipAddressList": ["169.254.254.1/30"], "macaddr":
    "52:54:00:5c:78:1a", "ip6AddressList": ["fe80::5054:ff:fe5c:781a/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "exit01", "ifname": "swp5.4", "ipAddressList": ["169.254.254.9/30"], "macaddr":
    "52:54:00:5c:78:1a", "ip6AddressList": ["fe80::5054:ff:fe5c:781a/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "exit01", "ifname": "swp6", "ipAddressList": ["169.254.127.1/31"], "macaddr":
    "52:54:00:04:6b:8e", "ip6AddressList": ["fe80::5054:ff:fe04:6b8e/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "exit02", "ifname": "eth0", "ipAddressList": ["192.168.121.243/24"], "macaddr":
    "52:54:00:ed:7f:6e", "ip6AddressList": ["fe80::5054:ff:feed:7f6e/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "exit02", "ifname": "internet-vrf", "ipAddressList": ["10.0.0.102/32"], "macaddr":
    "6e:85:f9:9a:35:65", "ip6AddressList": [], "state": "up", "timestamp": 1594706580214},
    {"namespace": "dual-attach_bgp_docker", "hostname": "exit02", "ifname": "lo",
    "ipAddressList": ["10.0.0.102/32"], "macaddr": "00:00:00:00:00:00", "ip6AddressList":
    ["::1/128"], "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "exit02", "ifname": "mgmt", "ipAddressList": ["127.0.0.1/8"], "macaddr":
    "92:52:19:0c:7b:59", "ip6AddressList": [], "state": "up", "timestamp": 1594706580214},
    {"namespace": "dual-attach_bgp_docker", "hostname": "exit02", "ifname": "swp5.2",
    "ipAddressList": ["169.254.253.1/30"], "macaddr": "52:54:00:c7:9e:b3", "ip6AddressList":
    ["fe80::5054:ff:fec7:9eb3/64"], "state": "up", "timestamp": 1594706580214}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "exit02", "ifname": "swp5.4", "ipAddressList":
    ["169.254.253.9/30"], "macaddr": "52:54:00:c7:9e:b3", "ip6AddressList": ["fe80::5054:ff:fec7:9eb3/64"],
    "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "exit02", "ifname": "swp6", "ipAddressList": ["169.254.127.3/31"],
    "macaddr": "52:54:00:2c:b7:09", "ip6AddressList": ["fe80::5054:ff:fe2c:b709/64"],
    "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "internet", "ifname": "eth0", "ipAddressList": ["192.168.121.117/24"],
    "macaddr": "52:54:00:a0:99:11", "ip6AddressList": ["fe80::5054:ff:fea0:9911/64"],
    "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "internet", "ifname": "lo", "ipAddressList": ["10.0.0.253/32", "172.16.253.1/32"],
    "macaddr": "00:00:00:00:00:00", "ip6AddressList": ["::1/128"], "state": "up",
    "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "internet", "ifname": "swp1", "ipAddressList": ["169.254.127.0/31"], "macaddr":
    "52:54:00:fd:58:75", "ip6AddressList": ["fe80::5054:ff:fefd:5875/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "internet", "ifname": "swp2", "ipAddressList": ["169.254.127.2/31"], "macaddr":
    "52:54:00:2d:d2:b1", "ip6AddressList": ["fe80::5054:ff:fe2d:d2b1/64"], "state":
    "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf01", "ifname": "eth0", "ipAddressList": ["192.168.121.119/24"], "macaddr":
    "52:54:00:cb:03:66", "ip6AddressList": ["fe80::5054:ff:fecb:366/64"], "state":
    "up", "timestamp": 1594706580162}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf01", "ifname": "lo", "ipAddressList": ["10.0.0.11/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": ["::1/128"], "state": "up", "timestamp": 1594706580162}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "leaf01", "ifname": "mgmt", "ipAddressList":
    ["127.0.0.1/8"], "macaddr": "26:fc:b5:32:62:dd", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580162}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf02", "ifname": "eth0", "ipAddressList": ["192.168.121.29/24"], "macaddr":
    "52:54:00:fc:a9:5b", "ip6AddressList": ["fe80::5054:ff:fefc:a95b/64"], "state":
    "up", "timestamp": 1594706580158}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf02", "ifname": "lo", "ipAddressList": ["10.0.0.12/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": ["::1/128"], "state": "up", "timestamp": 1594706580158}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "leaf02", "ifname": "mgmt", "ipAddressList":
    ["127.0.0.1/8"], "macaddr": "66:42:48:77:1f:c8", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580158}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf03", "ifname": "eth0", "ipAddressList": ["192.168.121.41/24"], "macaddr":
    "52:54:00:b2:a3:25", "ip6AddressList": ["fe80::5054:ff:feb2:a325/64"], "state":
    "up", "timestamp": 1594706580066}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf03", "ifname": "lo", "ipAddressList": ["10.0.0.13/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": ["::1/128"], "state": "up", "timestamp": 1594706580066}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "leaf03", "ifname": "mgmt", "ipAddressList":
    ["127.0.0.1/8"], "macaddr": "f2:c3:7a:87:f2:f9", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580066}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf04", "ifname": "eth0", "ipAddressList": ["192.168.121.67/24"], "macaddr":
    "52:54:00:b1:d3:32", "ip6AddressList": ["fe80::5054:ff:feb1:d332/64"], "state":
    "up", "timestamp": 1594706580243}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "leaf04", "ifname": "lo", "ipAddressList": ["10.0.0.14/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": ["::1/128"], "state": "up", "timestamp": 1594706580243}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "leaf04", "ifname": "mgmt", "ipAddressList":
    ["127.0.0.1/8"], "macaddr": "36:e0:be:ed:16:c1", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580243}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "server101", "ifname": "docker0", "ipAddressList": ["192.168.10.1/24"], "macaddr":
    "02:42:f4:a5:05:bf", "ip6AddressList": [], "state": "down", "timestamp": 1594706580036},
    {"namespace": "dual-attach_bgp_docker", "hostname": "server101", "ifname": "eth0",
    "ipAddressList": ["192.168.121.154/24"], "macaddr": "52:54:00:85:e1:b1", "ip6AddressList":
    [], "state": "up", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "server101", "ifname": "lo", "ipAddressList": ["172.16.1.101/32"],
    "macaddr": "00:00:00:00:00:00", "ip6AddressList": [], "state": "up", "timestamp":
    1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname": "server102",
    "ifname": "docker0", "ipAddressList": ["192.168.11.1/24"], "macaddr": "02:42:2f:83:28:a5",
    "ip6AddressList": [], "state": "down", "timestamp": 1594706580036}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "server102", "ifname": "eth0", "ipAddressList":
    ["192.168.121.91/24"], "macaddr": "52:54:00:b6:05:93", "ip6AddressList": [], "state":
    "up", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "server102", "ifname": "lo", "ipAddressList": ["172.16.2.102/32"], "macaddr":
    "00:00:00:00:00:00", "ip6AddressList": [], "state": "up", "timestamp": 1594706580036},
    {"namespace": "dual-attach_bgp_docker", "hostname": "server103", "ifname": "docker0",
    "ipAddressList": ["192.168.12.1/24"], "macaddr": "02:42:c1:2d:e0:93", "ip6AddressList":
    [], "state": "down", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "server103", "ifname": "eth0", "ipAddressList": ["192.168.121.124/24"],
    "macaddr": "52:54:00:eb:ba:9e", "ip6AddressList": [], "state": "up", "timestamp":
    1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname": "server103",
    "ifname": "lo", "ipAddressList": ["172.16.3.103/32"], "macaddr": "00:00:00:00:00:00",
    "ip6AddressList": [], "state": "up", "timestamp": 1594706580036}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "server104", "ifname": "docker0", "ipAddressList":
    ["192.168.13.1/24"], "macaddr": "02:42:a2:d0:01:24", "ip6AddressList": [], "state":
    "down", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker", "hostname":
    "server104", "ifname": "eth0", "ipAddressList": ["192.168.121.109/24"], "macaddr":
    "52:54:00:9a:f1:7b", "ip6AddressList": [], "state": "up", "timestamp": 1594706580036},
    {"namespace": "dual-attach_bgp_docker", "hostname": "server104", "ifname": "lo",
    "ipAddressList": ["172.16.4.104/32"], "macaddr": "00:00:00:00:00:00", "ip6AddressList":
    [], "state": "up", "timestamp": 1594706580036}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "spine01", "ifname": "eth0", "ipAddressList": ["192.168.121.65/24"],
    "macaddr": "52:54:00:1b:9b:7e", "ip6AddressList": ["fe80::5054:ff:fe1b:9b7e/64"],
    "state": "up", "timestamp": 1594706580162}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "spine01", "ifname": "lo", "ipAddressList": ["10.0.0.21/32"], "macaddr":
    "00:00:00:00:00:00", "ip6AddressList": ["::1/128"], "state": "up", "timestamp":
    1594706580162}, {"namespace": "dual-attach_bgp_docker", "hostname": "spine01",
    "ifname": "mgmt", "ipAddressList": ["127.0.0.1/8"], "macaddr": "72:1c:c3:0a:82:3b",
    "ip6AddressList": [], "state": "up", "timestamp": 1594706580162}, {"namespace":
    "dual-attach_bgp_docker", "hostname": "spine02", "ifname": "eth0", "ipAddressList":
    ["192.168.121.251/24"], "macaddr": "52:54:00:67:18:67", "ip6AddressList": ["fe80::5054:ff:fe67:1867/64"],
    "state": "up", "timestamp": 1594706580214}, {"namespace": "dual-attach_bgp_docker",
    "hostname": "spine02", "ifname": "lo", "ipAddressList": ["10.0.0.22/32"], "macaddr":
    "00:00:00:00:00:00", "ip6AddressList": ["::1/128"], "state": "up", "timestamp":
    1594706580214}, {"namespace": "dual-attach_bgp_docker", "hostname": "spine02",
    "ifname": "mgmt", "ipAddressList": ["127.0.0.1/8"], "macaddr": "86:ce:e2:4e:3d:be",
    "ip6AddressList": [], "state": "up", "timestamp": 1594706580214}]'
- command: address show --columns=hostname --format=json --namespace=dual-attach_bgp_docker
  data-directory: /tmp/suzieq-tests-parquet/dual-attach_bgp_docker/parquet-out
  marks: address show
  output: '[{"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"},
    {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname": "edge01"}, {"hostname":
    "edge01"}, {"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"},
    {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname": "exit01"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname":
    "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"}, {"hostname": "exit02"},
    {"hostname": "exit02"}, {"hostname": "internet"}, {"hostname": "internet"}, {"hostname":
    "internet"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname":
    "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"}, {"hostname": "leaf01"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname":
    "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf02"},
    {"hostname": "leaf02"}, {"hostname": "leaf02"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"},
    {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname": "leaf03"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"},
    {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname":
    "leaf04"}, {"hostname": "leaf04"}, {"hostname": "leaf04"}, {"hostname": "server101"},
    {"hostname": "server101"}, {"hostname": "server101"}, {"hostname": "server101"},
    {"hostname": "server101"}, {"hostname": "server102"}, {"hostname": "server102"},
    {"hostname": "server102"}, {"hostname": "server102"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server103"}, {"hostname": "server103"},
    {"hostname": "server103"}, {"hostname": "server103"}, {"hostname": "server104"},
    {"hostname": "server104"}, {"hostname": "server104"}, {"hostname": "server104"},
    {"hostname": "server104"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname":
    "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"},
    {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname": "spine01"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"},
    {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname": "spine02"}, {"hostname":
    "spine02"}, {"hostname": "spine02"}]'
- command: address summarize --format=json --namespace=dual-attach_bgp_docker
  data-directory: /tmp/suzieq-tests-parquet/dual-attach_bgp_docker/parquet-out
  marks: address summarize
  output: '{"dual-attach_bgp_docker": {"deviceCnt": 14, "addressCnt": 110, "uniqueV4AddressCnt":
    46, "uniqueV6AddressCnt": 1, "uniqueIfMacCnt": 89, "deviceWithv4AddressCnt": 14,
    "deviceWithv6AddressCnt": 9, "subnetsUsed": ["24", "32", "30", "8", "31"], "subnetTopCounts":
    [{"24": 18}, {"32": 17}, {"30": 8}]}}'
- command: address unique --columns=hostname --format=json --namespace=dual-attach_bgp_docker
  data-directory: /tmp/suzieq-tests-parquet/dual-attach_bgp_docker/parquet-out
  marks: address unique
  output: '[{"hostname": "internet", "count": 4}, {"hostname": "server104", "count":
    5}, {"hostname": "server103", "count": 5}, {"hostname": "server102", "count":
    5}, {"hostname": "server101", "count": 5}, {"hostname": "edge01", "count": 8},
    {"hostname": "spine02", "count": 9}, {"hostname": "spine01", "count": 9}, {"hostname":
    "leaf04", "count": 9}, {"hostname": "leaf03", "count": 9}, {"hostname": "leaf02",
    "count": 9}, {"hostname": "leaf01", "count": 9}, {"hostname": "exit02", "count":
    12}, {"hostname": "exit01", "count": 12}]'
