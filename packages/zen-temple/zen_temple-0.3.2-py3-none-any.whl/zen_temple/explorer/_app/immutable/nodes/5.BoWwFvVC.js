import{s as Ae,r as X,e as w,a as Y,c as k,m as G,g as Z,b as P,f as p,o as v,v as de,i as T,h as I,w as $,y as ke,t as me,d as ve,z as qe,A as ye,B as Ce,j as Le,C as Be,D as Pe,E as De,F as We,n as O}from"../chunks/scheduler.Bw2O2KLD.js";import{S as Fe,i as Ke,b as x,c as ie,d as ae,m as re,t as W,a as R,e as pe,f as ce,g as he}from"../chunks/index.Cyrvb228.js";import{e as Ee}from"../chunks/each.D6YF6ztN.js";import{S as Ye,f as Ze,B as Ge,b as Je}from"../chunks/utils.C2HpxDyR.js";import{A as Qe}from"../chunks/AllCheckbox.dzwR-lxb.js";import{D as Ie}from"../chunks/Dropdown.B1LicA_3.js";import{g as Re}from"../chunks/variables.CqS7hfz2.js";import{T as Ue}from"../chunks/ToggleButton.CgFO1nKI.js";function Ve(l,e,t){const o=l.slice();return o[43]=e[t],o}function Te(l){let e,t,o='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Variable Selection</button>',s,d,a,g,i,y,f=l[2].length>0&&He(l),b=l[0]&&l[6]&&l[4].length>0&&l[3].length>0&&Me(l);return{c(){e=w("div"),t=w("h2"),t.innerHTML=o,s=Y(),d=w("div"),a=w("div"),f&&f.c(),g=Y(),b&&b.c(),i=ke(),this.h()},l(r){e=k(r,"DIV",{class:!0});var u=P(e);t=k(u,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-18ejqb9"&&(t.innerHTML=o),s=Z(u),d=k(u,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var V=P(d);a=k(V,"DIV",{class:!0});var L=P(a);f&&f.l(L),L.forEach(p),V.forEach(p),u.forEach(p),g=Z(r),b&&b.l(r),i=ke(),this.h()},h(){v(t,"class","accordion-header"),v(a,"class","accordion-body"),v(d,"id","collapseTwo"),v(d,"class","accordion-collapse collapse"),v(d,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item variable-selction")},m(r,u){T(r,e,u),I(e,t),I(e,s),I(e,d),I(d,a),f&&f.m(a,null),T(r,g,u),b&&b.m(r,u),T(r,i,u),y=!0},p(r,u){r[2].length>0?f?(f.p(r,u),u[0]&4&&W(f,1)):(f=He(r),f.c(),W(f,1),f.m(a,null)):f&&(he(),R(f,1,1,()=>{f=null}),pe()),r[0]&&r[6]&&r[4].length>0&&r[3].length>0?b?(b.p(r,u),u[0]&89&&W(b,1)):(b=Me(r),b.c(),W(b,1),b.m(i.parentNode,i)):b&&(he(),R(b,1,1,()=>{b=null}),pe())},i(r){y||(W(f),W(b),y=!0)},o(r){R(f),R(b),y=!1},d(r){r&&(p(e),p(g),p(i)),f&&f.d(),b&&b.d(r)}}}function He(l){let e,t="Carrier",o,s,d,a=(l[9]||l[8])+"",g,i,y,f,b="Year",r,u,V,L,F,j,H="Smoothing Window Size",A,D,N,E,S,U,te,J=Ee(l[2]),_=[];for(let n=0;n<J.length;n+=1)_[n]=Se(Ve(l,J,n));function q(n){l[25](n)}function C(n){l[26](n)}let M={enabled:!l[9]&&!l[8]};l[12]!==void 0&&(M.options=l[12]),l[13]!==void 0&&(M.selected_option=l[13]),u=new Ie({props:M}),X.push(()=>x(u,"options",q)),X.push(()=>x(u,"selected_option",C)),u.$on("selection-changed",l[18]);function Q(n){l[27](n)}function oe(n){l[28](n)}let c={enabled:!l[9]&&!l[8]};return l[14]!==void 0&&(c.options=l[14]),l[15]!==void 0&&(c.selected_option=l[15]),D=new Ie({props:c}),X.push(()=>x(D,"options",Q)),X.push(()=>x(D,"selected_option",oe)),D.$on("selection-changed",l[18]),{c(){e=w("h3"),e.textContent=t,o=Y(),s=w("select");for(let n=0;n<_.length;n+=1)_[n].c();d=me(`
                                        disabled=`),g=me(a),y=Y(),f=w("h3"),f.textContent=b,r=Y(),ie(u.$$.fragment),F=Y(),j=w("h3"),j.textContent=H,A=Y(),ie(D.$$.fragment),this.h()},l(n){e=k(n,"H3",{"data-svelte-h":!0}),G(e)!=="svelte-xc22hm"&&(e.textContent=t),o=Z(n),s=k(n,"SELECT",{});var h=P(s);for(let z=0;z<_.length;z+=1)_[z].l(h);d=ve(h,`
                                        disabled=`),g=ve(h,a),h.forEach(p),y=Z(n),f=k(n,"H3",{"data-svelte-h":!0}),G(f)!=="svelte-r9e7qt"&&(f.textContent=b),r=Z(n),ae(u.$$.fragment,n),F=Z(n),j=k(n,"H3",{"data-svelte-h":!0}),G(j)!=="svelte-ec8yqb"&&(j.textContent=H),A=Z(n),ae(D.$$.fragment,n),this.h()},h(){s.disabled=i=l[9]||l[8],l[6]===void 0&&qe(()=>l[24].call(s))},m(n,h){T(n,e,h),T(n,o,h),T(n,s,h);for(let z=0;z<_.length;z+=1)_[z]&&_[z].m(s,null);I(s,d),I(s,g),ye(s,l[6],!0),T(n,y,h),T(n,f,h),T(n,r,h),re(u,n,h),T(n,F,h),T(n,j,h),T(n,A,h),re(D,n,h),S=!0,U||(te=[Ce(s,"change",l[24]),Ce(s,"change",l[18])],U=!0)},p(n,h){if(h[0]&4){J=Ee(n[2]);let B;for(B=0;B<J.length;B+=1){const ne=Ve(n,J,B);_[B]?_[B].p(ne,h):(_[B]=Se(ne),_[B].c(),_[B].m(s,d))}for(;B<_.length;B+=1)_[B].d(1);_.length=J.length}(!S||h[0]&768)&&a!==(a=(n[9]||n[8])+"")&&Le(g,a),(!S||h[0]&768&&i!==(i=n[9]||n[8]))&&(s.disabled=i),h[0]&68&&ye(s,n[6]);const z={};h[0]&768&&(z.enabled=!n[9]&&!n[8]),!V&&h[0]&4096&&(V=!0,z.options=n[12],$(()=>V=!1)),!L&&h[0]&8192&&(L=!0,z.selected_option=n[13],$(()=>L=!1)),u.$set(z);const ee={};h[0]&768&&(ee.enabled=!n[9]&&!n[8]),!N&&h[0]&16384&&(N=!0,ee.options=n[14],$(()=>N=!1)),!E&&h[0]&32768&&(E=!0,ee.selected_option=n[15],$(()=>E=!1)),D.$set(ee)},i(n){S||(W(u.$$.fragment,n),W(D.$$.fragment,n),S=!0)},o(n){R(u.$$.fragment,n),R(D.$$.fragment,n),S=!1},d(n){n&&(p(e),p(o),p(s),p(y),p(f),p(r),p(F),p(j),p(A)),Be(_,n),ce(u,n),ce(D,n),U=!1,Pe(te)}}}function Se(l){let e,t=l[43]+"",o,s;return{c(){e=w("option"),o=me(t),this.h()},l(d){e=k(d,"OPTION",{});var a=P(e);o=ve(a,t),a.forEach(p),this.h()},h(){e.__value=s=l[43],De(e,e.__value)},m(d,a){T(d,e,a),I(e,o)},p(d,a){a[0]&4&&t!==(t=d[43]+"")&&Le(o,t),a[0]&4&&s!==(s=d[43])&&(e.__value=s,De(e,e.__value))},d(d){d&&p(e)}}}function Me(l){let e,t,o='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">Data Selection</button>',s,d,a,g,i,y,f="Technology Subdivision",b,r,u,V,L,F="Node",j,H,A,D,N;function E(_){l[29](_)}let S={};l[11]!==void 0&&(S.value=l[11]),r=new Ue({props:S}),X.push(()=>x(r,"value",E)),r.$on("change",l[19]);function U(_){l[30](_)}function te(_){l[31](_)}let J={};return l[7]!==void 0&&(J.selected_elements=l[7]),l[3]!==void 0&&(J.elements=l[3]),H=new Qe({props:J}),X.push(()=>x(H,"selected_elements",U)),X.push(()=>x(H,"elements",te)),H.$on("selection-changed",l[19]),{c(){e=w("div"),t=w("h2"),t.innerHTML=o,s=Y(),d=w("div"),a=w("div"),g=w("div"),i=Y(),y=w("h3"),y.textContent=f,b=Y(),ie(r.$$.fragment),V=Y(),L=w("h3"),L.textContent=F,j=Y(),ie(H.$$.fragment),this.h()},l(_){e=k(_,"DIV",{class:!0});var q=P(e);t=k(q,"H2",{class:!0,"data-svelte-h":!0}),G(t)!=="svelte-1btd1mx"&&(t.innerHTML=o),s=Z(q),d=k(q,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var C=P(d);a=k(C,"DIV",{class:!0});var M=P(a);g=k(M,"DIV",{class:!0}),P(g).forEach(p),i=Z(M),y=k(M,"H3",{"data-svelte-h":!0}),G(y)!=="svelte-q2zoen"&&(y.textContent=f),b=Z(M),ae(r.$$.fragment,M),V=Z(M),L=k(M,"H3",{"data-svelte-h":!0}),G(L)!=="svelte-ocjo5w"&&(L.textContent=F),j=Z(M),ae(H.$$.fragment,M),M.forEach(p),C.forEach(p),q.forEach(p),this.h()},h(){v(t,"class","accordion-header"),v(g,"class","row"),v(a,"class","accordion-body"),v(d,"id","collapseThree"),v(d,"class","accordion-collapse collapse"),v(d,"data-bs-parent","#accordionExample"),v(e,"class","accordion-item")},m(_,q){T(_,e,q),I(e,t),I(e,s),I(e,d),I(d,a),I(a,g),I(a,i),I(a,y),I(a,b),re(r,a,null),I(a,V),I(a,L),I(a,j),re(H,a,null),N=!0},p(_,q){const C={};!u&&q[0]&2048&&(u=!0,C.value=_[11],$(()=>u=!1)),r.$set(C);const M={};!A&&q[0]&128&&(A=!0,M.selected_elements=_[7],$(()=>A=!1)),!D&&q[0]&8&&(D=!0,M.elements=_[3],$(()=>D=!1)),H.$set(M)},i(_){N||(W(r.$$.fragment,_),W(H.$$.fragment,_),N=!0)},o(_){R(r.$$.fragment,_),R(H.$$.fragment,_),N=!1},d(_){_&&p(e),ce(r),ce(H)}}}function Xe(l){let e,t,o,s;function d(i){l[32](i)}function a(i){l[33](i)}let g={zoom:!0};return l[16]!==void 0&&(g.config=l[16]),l[10]!==void 0&&(g.plot_name=l[10]),e=new Ge({props:g}),X.push(()=>x(e,"config",d)),X.push(()=>x(e,"plot_name",a)),{c(){ie(e.$$.fragment)},l(i){ae(e.$$.fragment,i)},m(i,y){re(e,i,y),s=!0},p(i,y){const f={};!t&&y[0]&65536&&(t=!0,f.config=i[16],$(()=>t=!1)),!o&&y[0]&1024&&(o=!0,f.plot_name=i[10],$(()=>o=!1)),e.$set(f)},i(i){s||(W(e.$$.fragment,i),s=!0)},o(i){R(e.$$.fragment,i),s=!1},d(i){ce(e,i)}}}function $e(l){let e,t="No data with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function xe(l){let e,t="No locations with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-tr8mx7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function et(l){let e,t="No data with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1doxial"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function tt(l){let e,t="No solution selected.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-17x0k81"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function lt(l){let e,t="No carriers with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1wht3n0"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function nt(l){let e,t="No technologies with this selection.";return{c(){e=w("div"),e.textContent=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-1ontq7"&&(e.textContent=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function ot(l){let e,t='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){e=w("div"),e.innerHTML=t,this.h()},l(o){e=k(o,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-57s7b4"&&(e.innerHTML=t),this.h()},h(){v(e,"class","text-center")},m(o,s){T(o,e,s)},p:O,i:O,o:O,d(o){o&&p(e)}}}function st(l){let e,t='<div class="col"><h2>The Energy Balance Storage</h2></div>',o,s,d,a,g,i,y,f='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',b,r,u,V,L,F,j,H,A,D,N,E,S,U;function te(c){l[20](c)}function J(c){l[21](c)}function _(c){l[22](c)}let q={enabled:!l[9]&&!l[8]};l[5]!==void 0&&(q.selected_solution=l[5]),l[8]!==void 0&&(q.loading=l[8]),l[12]!==void 0&&(q.years=l[12]),V=new Ye({props:q}),X.push(()=>x(V,"selected_solution",te)),X.push(()=>x(V,"loading",J)),X.push(()=>x(V,"years",_)),V.$on("solution_selected",l[23]);let C=!l[8]&&l[5]&&Te(l);const M=[ot,nt,lt,tt,et,xe,$e,Xe],Q=[];function oe(c,n){return c[8]||c[9]?0:c[4].length==0?1:c[2].length==0?2:c[5]==null?3:c[1]==null?4:c[3].length==0?5:c[1].length==0?6:7}return E=oe(l),S=Q[E]=M[E](l),{c(){e=w("div"),e.innerHTML=t,o=Y(),s=w("div"),d=w("div"),a=w("div"),g=w("div"),i=w("div"),y=w("h2"),y.innerHTML=f,b=Y(),r=w("div"),u=w("div"),ie(V.$$.fragment),H=Y(),C&&C.c(),A=Y(),D=w("div"),N=w("div"),S.c(),this.h()},l(c){e=k(c,"DIV",{class:!0,"data-svelte-h":!0}),G(e)!=="svelte-wp6wh4"&&(e.innerHTML=t),o=Z(c),s=k(c,"DIV",{class:!0,style:!0});var n=P(s);d=k(n,"DIV",{class:!0});var h=P(d);a=k(h,"DIV",{class:!0,style:!0});var z=P(a);g=k(z,"DIV",{class:!0,id:!0});var ee=P(g);i=k(ee,"DIV",{class:!0});var B=P(i);y=k(B,"H2",{class:!0,"data-svelte-h":!0}),G(y)!=="svelte-1oln34a"&&(y.innerHTML=f),b=Z(B),r=k(B,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var ne=P(r);u=k(ne,"DIV",{class:!0});var ue=P(u);ae(V.$$.fragment,ue),ue.forEach(p),ne.forEach(p),B.forEach(p),H=Z(ee),C&&C.l(ee),ee.forEach(p),z.forEach(p),h.forEach(p),n.forEach(p),A=Z(c),D=k(c,"DIV",{class:!0,style:!0});var fe=P(D);N=k(fe,"DIV",{class:!0});var _e=P(N);S.l(_e),_e.forEach(p),fe.forEach(p),this.h()},h(){v(e,"class","row"),v(y,"class","accordion-header"),v(u,"class","accordion-body"),v(r,"id","collapseOne"),v(r,"class","accordion-collapse collapse show"),v(r,"data-bs-parent","#accordionExample"),v(i,"class","accordion-item solution-selection"),v(g,"class","accordion"),v(g,"id","accordionExample"),v(a,"class","filters"),de(a,"position","absolute"),de(a,"width","100%"),v(d,"class","col position-relative"),v(s,"class","row"),de(s,"z-index","1"),de(s,"position","relative"),v(N,"class","row"),v(D,"class","col"),de(D,"margin-top","400px")},m(c,n){T(c,e,n),T(c,o,n),T(c,s,n),I(s,d),I(d,a),I(a,g),I(g,i),I(i,y),I(i,b),I(i,r),I(r,u),re(V,u,null),I(g,H),C&&C.m(g,null),T(c,A,n),T(c,D,n),I(D,N),Q[E].m(N,null),U=!0},p(c,n){const h={};n[0]&768&&(h.enabled=!c[9]&&!c[8]),!L&&n[0]&32&&(L=!0,h.selected_solution=c[5],$(()=>L=!1)),!F&&n[0]&256&&(F=!0,h.loading=c[8],$(()=>F=!1)),!j&&n[0]&4096&&(j=!0,h.years=c[12],$(()=>j=!1)),V.$set(h),!c[8]&&c[5]?C?(C.p(c,n),n[0]&288&&W(C,1)):(C=Te(c),C.c(),W(C,1),C.m(g,null)):C&&(he(),R(C,1,1,()=>{C=null}),pe());let z=E;E=oe(c),E===z?Q[E].p(c,n):(he(),R(Q[z],1,1,()=>{Q[z]=null}),pe(),S=Q[E],S?S.p(c,n):(S=Q[E]=M[E](c),S.c()),W(S,1),S.m(N,null))},i(c){U||(W(V.$$.fragment,c),W(C),W(S),U=!0)},o(c){R(V.$$.fragment,c),R(C),R(S),U=!1},d(c){c&&(p(e),p(o),p(s),p(A),p(D)),ce(V),C&&C.d(),Q[E].d()}}}let be="storage_level";function it(l,e,t){let o=null,s=null,d=[],a=[],g=[],i=null,y=null,f=null,b="technology",r=[],u=[],V=!1,L=!1,F="",j=!0,H=[],A=0,D=["Hourly","Daily","Weekly","Monthly"],N="Hourly",E={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!1,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};function S(){t(7,u=a),r=g,b="node"}async function U(){if(t(0,o=null),i===null)return;let m=Math.floor((A-i.detail.system.reference_year)/i.detail.system.interval_between_years),K=1;switch(N){case"Daily":K=24;break;case"Weekly":K=168;break;case"Monthly":K=720;break}let le=await Je(i.solution_name,Re(be),i.scenario_name,m,K);t(0,o=le.data),y=le.unit}async function te(){i!==null&&(t(9,L=!0),t(13,A=H[0]),await U(),C(),M(),_(),S(),Q(),t(9,L=!1))}async function J(){t(9,L=!0),await U(),M(),_(),S(),Q(),t(9,L=!1)}function _(){t(3,a=Array.from(new Set(o.data.map(m=>m.node)))),t(7,u=a)}function q(){try{return y.data[0][0]}catch{return""}}function C(){if(t(2,d=[]),!o)return;let m=Array.from(o.data.map(K=>K.technology));o.data.forEach(K=>{let le=K.technology,se=i.detail.reference_carrier[le];!d.includes(se)&&m.includes(K.technology)&&d.push(se)}),d.length>0&&t(6,f=d[0])}function M(){let m=Array.from(new Set(o.data.map(K=>K.technology)));t(4,g=m.filter(K=>(i==null?void 0:i.detail.reference_carrier[K])==f)),r=g}function Q(){if(b=="technology"?t(7,u=a):r=g,u.length==0||r.length==0||o===null){t(1,s=null);return}let m={},K={};if(m.technology=r,K.node=u,t(1,s=Ze(o.data,m,K,[],!1,"line")),t(16,E.data={datasets:s,labels:Object.keys(s[0].data)},E),!j){let se={};for(const we in s[0].data)se[we]=s.map(ge=>ge.data[we]).reduce((ge,je)=>ge+je,0);t(1,s=[{data:Object.values(se),label:"Storage level",type:"line",borderColor:"black"}]),t(16,E.data={datasets:s,labels:Object.keys(se)},E)}t(16,E.options.scales.y.title.text=be+" ["+q()+"]",E);let le=i.solution_name.split(".");t(10,F=[le[(le==null?void 0:le.length)-1],i==null?void 0:i.scenario_name,be,f].join("_"))}function oe(m){i=m,t(5,i)}function c(m){V=m,t(8,V)}function n(m){H=m,t(12,H)}const h=()=>{te()};function z(){f=We(this),t(6,f),t(2,d)}function ee(m){H=m,t(12,H)}function B(m){A=m,t(13,A)}function ne(m){D=m,t(14,D)}function ue(m){N=m,t(15,N)}function fe(m){j=m,t(11,j)}function _e(m){u=m,t(7,u)}function ze(m){a=m,t(3,a)}function Ne(m){E=m,t(16,E)}function Oe(m){F=m,t(10,F)}return[o,s,d,a,g,i,f,u,V,L,F,j,H,A,D,N,E,te,J,Q,oe,c,n,h,z,ee,B,ne,ue,fe,_e,ze,Ne,Oe]}class ht extends Fe{constructor(e){super(),Ke(this,e,it,st,Ae,{},null,[-1,-1])}}export{ht as component};
