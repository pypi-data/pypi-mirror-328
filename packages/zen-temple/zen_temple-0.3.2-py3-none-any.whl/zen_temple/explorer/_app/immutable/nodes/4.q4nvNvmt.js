import{s as Ae,r as j,e as f,a as R,c,m as re,g as Y,b as I,f as p,o as _,v as Ee,i as de,h as d,w as W,x as Le}from"../chunks/scheduler.Bw2O2KLD.js";import{S as Fe,i as Ke,b as P,c as be,d as he,m as ve,t as Q,a as ne,e as $e,f as me,g as ze}from"../chunks/index.Cyrvb228.js";import{S as Ne,B as Re,g as Ye,a as Ze,f as Ge}from"../chunks/utils.C2HpxDyR.js";import{D as Ce}from"../chunks/Dropdown.B1LicA_3.js";import{g as ae}from"../chunks/variables.CqS7hfz2.js";function Oe(e){let a,o,D='<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">Data selection</button>',l,w,h,y,g,i,V="Year",H,v,S,C,Z,q,L,A,$="Node",se,T,F,z,ee,K,G,te,pe="Carrier",ue,O,J,m,E,u,t,b,s="Smoothing Window Size",U,k,X,oe,x;function le(n){e[21](n)}function B(n){e[22](n)}let _e={enabled:!e[3]&&!e[2]};e[8]!==void 0&&(_e.options=e[8]),e[9]!==void 0&&(_e.selected_option=e[9]),v=new Ce({props:_e}),j.push(()=>P(v,"options",le)),j.push(()=>P(v,"selected_option",B)),v.$on("selection-changed",e[15]);function Ie(n){e[23](n)}function we(n){e[24](n)}let r={enabled:!e[3]&&!e[2]};e[4]!==void 0&&(r.options=e[4]),e[5]!==void 0&&(r.selected_option=e[5]),T=new Ce({props:r}),j.push(()=>P(T,"options",Ie)),j.push(()=>P(T,"selected_option",we)),T.$on("selection-changed",e[15]);function ge(n){e[25](n)}function Pe(n){e[26](n)}let Ve={enabled:!e[3]&&!e[2]};e[6]!==void 0&&(Ve.options=e[6]),e[7]!==void 0&&(Ve.selected_option=e[7]),O=new Ce({props:Ve}),j.push(()=>P(O,"options",ge)),j.push(()=>P(O,"selected_option",Pe)),O.$on("selection-changed",e[15]);function qe(n){e[27](n)}function Be(n){e[28](n)}let He={enabled:!e[3]&&!e[2]};return e[11]!==void 0&&(He.options=e[11]),e[12]!==void 0&&(He.selected_option=e[12]),k=new Ce({props:He}),j.push(()=>P(k,"options",qe)),j.push(()=>P(k,"selected_option",Be)),k.$on("selection-changed",e[15]),{c(){a=f("div"),o=f("h2"),o.innerHTML=D,l=R(),w=f("div"),h=f("div"),y=f("div"),g=f("div"),i=f("h3"),i.textContent=V,H=R(),be(v.$$.fragment),Z=R(),q=f("div"),L=f("div"),A=f("h3"),A.textContent=$,se=R(),be(T.$$.fragment),ee=R(),K=f("div"),G=f("div"),te=f("h3"),te.textContent=pe,ue=R(),be(O.$$.fragment),E=R(),u=f("div"),t=f("div"),b=f("h3"),b.textContent=s,U=R(),be(k.$$.fragment),this.h()},l(n){a=c(n,"DIV",{class:!0});var M=I(a);o=c(M,"H2",{class:!0,"data-svelte-h":!0}),re(o)!=="svelte-1rnon8p"&&(o.innerHTML=D),l=Y(M),w=c(M,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var fe=I(w);h=c(fe,"DIV",{class:!0});var N=I(h);y=c(N,"DIV",{class:!0});var ce=I(y);g=c(ce,"DIV",{class:!0});var ie=I(g);i=c(ie,"H3",{"data-svelte-h":!0}),re(i)!=="svelte-r9e7qt"&&(i.textContent=V),H=Y(ie),he(v.$$.fragment,ie),ie.forEach(p),ce.forEach(p),Z=Y(N),q=c(N,"DIV",{class:!0});var Te=I(q);L=c(Te,"DIV",{class:!0});var ye=I(L);A=c(ye,"H3",{"data-svelte-h":!0}),re(A)!=="svelte-ocjo5w"&&(A.textContent=$),se=Y(ye),he(T.$$.fragment,ye),ye.forEach(p),Te.forEach(p),ee=Y(N),K=c(N,"DIV",{class:!0});var Me=I(K);G=c(Me,"DIV",{class:!0});var ke=I(G);te=c(ke,"H3",{"data-svelte-h":!0}),re(te)!=="svelte-xc22hm"&&(te.textContent=pe),ue=Y(ke),he(O.$$.fragment,ke),ke.forEach(p),Me.forEach(p),E=Y(N),u=c(N,"DIV",{class:!0});var Se=I(u);t=c(Se,"DIV",{class:!0});var De=I(t);b=c(De,"H3",{"data-svelte-h":!0}),re(b)!=="svelte-ec8yqb"&&(b.textContent=s),U=Y(De),he(k.$$.fragment,De),De.forEach(p),Se.forEach(p),N.forEach(p),fe.forEach(p),M.forEach(p),this.h()},h(){_(o,"class","accordion-header"),_(g,"class","col-6"),_(y,"class","row"),_(L,"class","col-6"),_(q,"class","row"),_(G,"class","col-6"),_(K,"class","row"),_(t,"class","col-6"),_(u,"class","row"),_(h,"class","accordion-body"),_(w,"id","collapseTwo"),_(w,"class","accordion-collapse collapse"),_(w,"data-bs-parent","#accordionExample"),_(a,"class","accordion-item")},m(n,M){de(n,a,M),d(a,o),d(a,l),d(a,w),d(w,h),d(h,y),d(y,g),d(g,i),d(g,H),ve(v,g,null),d(h,Z),d(h,q),d(q,L),d(L,A),d(L,se),ve(T,L,null),d(h,ee),d(h,K),d(K,G),d(G,te),d(G,ue),ve(O,G,null),d(h,E),d(h,u),d(u,t),d(t,b),d(t,U),ve(k,t,null),x=!0},p(n,M){const fe={};M[0]&12&&(fe.enabled=!n[3]&&!n[2]),!S&&M[0]&256&&(S=!0,fe.options=n[8],W(()=>S=!1)),!C&&M[0]&512&&(C=!0,fe.selected_option=n[9],W(()=>C=!1)),v.$set(fe);const N={};M[0]&12&&(N.enabled=!n[3]&&!n[2]),!F&&M[0]&16&&(F=!0,N.options=n[4],W(()=>F=!1)),!z&&M[0]&32&&(z=!0,N.selected_option=n[5],W(()=>z=!1)),T.$set(N);const ce={};M[0]&12&&(ce.enabled=!n[3]&&!n[2]),!J&&M[0]&64&&(J=!0,ce.options=n[6],W(()=>J=!1)),!m&&M[0]&128&&(m=!0,ce.selected_option=n[7],W(()=>m=!1)),O.$set(ce);const ie={};M[0]&12&&(ie.enabled=!n[3]&&!n[2]),!X&&M[0]&2048&&(X=!0,ie.options=n[11],W(()=>X=!1)),!oe&&M[0]&4096&&(oe=!0,ie.selected_option=n[12],W(()=>oe=!1)),k.$set(ie)},i(n){x||(Q(v.$$.fragment,n),Q(T.$$.fragment,n),Q(O.$$.fragment,n),Q(k.$$.fragment,n),x=!0)},o(n){ne(v.$$.fragment,n),ne(T.$$.fragment,n),ne(O.$$.fragment,n),ne(k.$$.fragment,n),x=!1},d(n){n&&p(a),me(v),me(T),me(O),me(k)}}}function je(e){let a,o='<div class="spinner-border center" role="status"><span class="visually-hidden">Loading...</span></div>';return{c(){a=f("div"),a.innerHTML=o,this.h()},l(D){a=c(D,"DIV",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-57s7b4"&&(a.innerHTML=o),this.h()},h(){_(a,"class","text-center")},m(D,l){de(D,a,l)},d(D){D&&p(a)}}}function We(e){let a,o,D,l,w;function h(i){e[29](i)}function y(i){e[30](i)}let g={zoom:!0};return e[13]!==void 0&&(g.config=e[13]),e[10]!==void 0&&(g.plot_name=e[10]),o=new Re({props:g}),j.push(()=>P(o,"config",h)),j.push(()=>P(o,"plot_name",y)),{c(){a=f("div"),be(o.$$.fragment),this.h()},l(i){a=c(i,"DIV",{style:!0});var V=I(a);he(o.$$.fragment,V),V.forEach(p),this.h()},h(){Ee(a,"position","relative")},m(i,V){de(i,a,V),ve(o,a,null),w=!0},p(i,V){const H={};!D&&V[0]&8192&&(D=!0,H.config=i[13],W(()=>D=!1)),!l&&V[0]&1024&&(l=!0,H.plot_name=i[10],W(()=>l=!1)),o.$set(H)},i(i){w||(Q(o.$$.fragment,i),w=!0)},o(i){ne(o.$$.fragment,i),w=!1},d(i){i&&p(a),me(o)}}}function Je(e){let a,o='<div class="col"><h2>The Energy Balance</h2></div>',D,l,w,h,y,g,i,V='<button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">Solution Selection</button>',H,v,S,C,Z,q,L,A,$,se,T,F,z,ee,K;function G(t){e[16](t)}function te(t){e[17](t)}function pe(t){e[18](t)}function ue(t){e[19](t)}function O(t){e[20](t)}let J={enabled:!e[2]&&!e[3]};e[6]!==void 0&&(J.carriers=e[6]),e[4]!==void 0&&(J.nodes=e[4]),e[8]!==void 0&&(J.years=e[8]),e[0]!==void 0&&(J.selected_solution=e[0]),e[2]!==void 0&&(J.loading=e[2]),C=new Ne({props:J}),j.push(()=>P(C,"carriers",G)),j.push(()=>P(C,"nodes",te)),j.push(()=>P(C,"years",pe)),j.push(()=>P(C,"selected_solution",ue)),j.push(()=>P(C,"loading",O)),C.$on("solution_selected",e[14]);let m=!e[2]&&e[0]&&Oe(e),E=e[3]&&je(),u=!e[3]&&e[1]&&We(e);return{c(){a=f("div"),a.innerHTML=o,D=R(),l=f("div"),w=f("div"),h=f("div"),y=f("div"),g=f("div"),i=f("h2"),i.innerHTML=V,H=R(),v=f("div"),S=f("div"),be(C.$$.fragment),se=R(),m&&m.c(),T=R(),F=f("div"),z=f("div"),E&&E.c(),ee=R(),u&&u.c(),this.h()},l(t){a=c(t,"DIV",{class:!0,"data-svelte-h":!0}),re(a)!=="svelte-1d6fcfp"&&(a.innerHTML=o),D=Y(t),l=c(t,"DIV",{class:!0});var b=I(l);w=c(b,"DIV",{class:!0});var s=I(w);h=c(s,"DIV",{class:!0,style:!0});var U=I(h);y=c(U,"DIV",{class:!0,id:!0});var k=I(y);g=c(k,"DIV",{class:!0});var X=I(g);i=c(X,"H2",{class:!0,"data-svelte-h":!0}),re(i)!=="svelte-1oln34a"&&(i.innerHTML=V),H=Y(X),v=c(X,"DIV",{id:!0,class:!0,"data-bs-parent":!0});var oe=I(v);S=c(oe,"DIV",{class:!0});var x=I(S);he(C.$$.fragment,x),x.forEach(p),oe.forEach(p),X.forEach(p),se=Y(k),m&&m.l(k),k.forEach(p),U.forEach(p),s.forEach(p),b.forEach(p),T=Y(t),F=c(t,"DIV",{class:!0});var le=I(F);z=c(le,"DIV",{class:!0,style:!0});var B=I(z);E&&E.l(B),ee=Y(B),u&&u.l(B),B.forEach(p),le.forEach(p),this.h()},h(){_(a,"class","row"),_(i,"class","accordion-header"),_(S,"class","accordion-body"),_(v,"id","collapseOne"),_(v,"class","accordion-collapse collapse show"),_(v,"data-bs-parent","#accordionExample"),_(g,"class","accordion-item solution-selection"),_(y,"class","accordion"),_(y,"id","accordionExample"),_(h,"class","filters"),Ee(h,"position","absolute"),Ee(h,"width","100%"),_(w,"class","col position-relative"),_(l,"class","row"),_(z,"class","col"),Ee(z,"margin-top","400px"),_(F,"class","row")},m(t,b){de(t,a,b),de(t,D,b),de(t,l,b),d(l,w),d(w,h),d(h,y),d(y,g),d(g,i),d(g,H),d(g,v),d(v,S),ve(C,S,null),d(y,se),m&&m.m(y,null),de(t,T,b),de(t,F,b),d(F,z),E&&E.m(z,null),d(z,ee),u&&u.m(z,null),K=!0},p(t,b){const s={};b[0]&12&&(s.enabled=!t[2]&&!t[3]),!Z&&b[0]&64&&(Z=!0,s.carriers=t[6],W(()=>Z=!1)),!q&&b[0]&16&&(q=!0,s.nodes=t[4],W(()=>q=!1)),!L&&b[0]&256&&(L=!0,s.years=t[8],W(()=>L=!1)),!A&&b[0]&1&&(A=!0,s.selected_solution=t[0],W(()=>A=!1)),!$&&b[0]&4&&($=!0,s.loading=t[2],W(()=>$=!1)),C.$set(s),!t[2]&&t[0]?m?(m.p(t,b),b[0]&5&&Q(m,1)):(m=Oe(t),m.c(),Q(m,1),m.m(y,null)):m&&(ze(),ne(m,1,1,()=>{m=null}),$e()),t[3]?E||(E=je(),E.c(),E.m(z,ee)):E&&(E.d(1),E=null),!t[3]&&t[1]?u?(u.p(t,b),b[0]&10&&Q(u,1)):(u=We(t),u.c(),Q(u,1),u.m(z,null)):u&&(ze(),ne(u,1,1,()=>{u=null}),$e())},i(t){K||(Q(C.$$.fragment,t),Q(m),Q(u),K=!0)},o(t){ne(C.$$.fragment,t),ne(m),ne(u),K=!1},d(t){t&&(p(a),p(D),p(l),p(T),p(F)),me(C),m&&m.d(),E&&E.d(),u&&u.d()}}}function Qe(e,a,o){var D=["rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(255, 206, 86)","rgb(153, 102, 255)","rgb(255, 159, 64)","rgb(255, 99, 132)","rgb(201, 203, 207)","rgb(220,20,60)","rgb(255,99,71)","rgb(255,69,0)","rgb(154,205,50)","rgb(0,100,0)","rgb(50,205,50)","rgb(0,139,139)","rgb(153,50,204)","rgb(255,105,180)"];let l=null,w=!1,h=!1,y=!1,g=[],i=null,V=[],H=null,v=[],S=null,C="",Z="",q=["Hourly","Daily","Weekly","Monthly"],L="Hourly";const A={counter:1,type:"line",data:{datasets:[]},options:{animation:!1,normalized:!0,elements:{point:{radius:0}},responsive:!0,scales:{x:{stacked:!0,title:{display:!0,text:"Time"}},y:{stacked:!0,beginAtZero:!0,title:{display:!0,text:"Power"}}},borderWidth:1,plugins:{zoom:{pan:{enabled:!0,modifierKey:"ctrl",mode:"x"},zoom:{drag:{enabled:!0},wheel:{enabled:!0},mode:"x"}}}}};let $=structuredClone(A);async function se(){l&&(o(13,$=structuredClone(A)),o(5,i=g[0]),o(7,H=V[0]),o(9,S=v[0]),o(1,w=!1),await T())}async function T(){if(o(3,y=!0),Le(),i==null||H==null||S==null||l==null){o(3,y=!1);return}let s=Math.floor((S-l.detail.system.reference_year)/l.detail.system.interval_between_years),U=1;switch(L){case"Daily":U=24;break;case"Weekly":U=168;break;case"Monthly":U=720;break}let k=await Ye(l.solution_name,i,H,l.scenario_name,s,U),X=await Ze(l.solution_name,ae("flow_export",l.version),l.scenario_name);X===null?C="":C=X.data[0][0];let oe=[],x=0;for(const B in k){let _e={node:[i]};if(k[B]==null||k[B].data.length==0)continue;if("technology"in k[B].data[0]){let r=[];for(const ge of k[B].data)r.push(ge.technology);_e={technology:r}}let Ie={},we=Ge(k[B].data,_e,Ie);if(we.length!=0)for(let r of we){if(Object.keys(r.data).length==0)continue;switch(B){case ae("flow_storage_discharge",l.version):r.label=r.label+" (discharge)";break;case ae("flow_transport_in",l.version):r.label=r.label+" (transport in)";break;case ae("flow_import",l.version):r.label="Import",l.version;break;case ae("shed_demand",l.version):r.label="Shed Demand";break;case ae("flow_storage_charge",l.version):r.label=r.label+" (charge)";break;case ae("flow_transport_out",l.version):r.label=r.label+" (transport out)";break;case ae("flow_export",l.version):r.label="Export";break}let ge="line";Object.keys(r.data).length==1&&(ge="bar"),B=="demand"?(r.label="Demand",r.type="line",r.stack="ownCustomStack",r.fill=!1,r.borderColor="black",r.backgroundColor="white",r.borderWidth=2,r.stepped=!0,Object.keys(r.data).length==1&&(r.pointRadius=2)):(r.type=ge,r.fill="origin",r.borderColor=D[x%D.length],r.backgroundColor=D[x%D.length].replace(")",", 1)"),r.stepped=!0,r.cubicInterpolationMode="monotone"),oe.push(r),x++}}o(13,$.data.labels=Object.keys(oe[0].data),$),o(13,$.data.datasets=oe,$),o(13,$.options.scales.y.title.text="Power ["+C+"]",$),o(3,y=!1),o(1,w=!0),await Le();let le=l.solution_name.split(".");o(10,Z=[le[(le==null?void 0:le.length)-1],l==null?void 0:l.scenario_name,"balance",H,i,S].join("_"))}function F(s){V=s,o(6,V)}function z(s){g=s,o(4,g)}function ee(s){v=s,o(8,v)}function K(s){l=s,o(0,l)}function G(s){h=s,o(2,h)}function te(s){v=s,o(8,v)}function pe(s){S=s,o(9,S)}function ue(s){g=s,o(4,g)}function O(s){i=s,o(5,i)}function J(s){V=s,o(6,V)}function m(s){H=s,o(7,H)}function E(s){q=s,o(11,q)}function u(s){L=s,o(12,L)}function t(s){$=s,o(13,$)}function b(s){Z=s,o(10,Z)}return[l,w,h,y,g,i,V,H,v,S,Z,q,L,$,se,T,F,z,ee,K,G,te,pe,ue,O,J,m,E,u,t,b]}class ot extends Fe{constructor(a){super(),Ke(this,a,Qe,Je,Ae,{},null,[-1,-1])}}export{ot as component};
