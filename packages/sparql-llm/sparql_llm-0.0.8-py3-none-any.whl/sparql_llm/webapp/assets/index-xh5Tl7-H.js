var qs=Object.defineProperty;var Ws=(r,e,t)=>e in r?qs(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var J=(r,e,t)=>Ws(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();const Ks=(r,e)=>r===e,Zs=Symbol("solid-track"),In={equals:Ks};let fs=ps;const ht=1,Ln=2,hs={owned:null,cleanups:null,context:null,owner:null};var me=null;let Zn=null,Ys=null,de=null,ye=null,it=null,Un=0;function Cn(r,e){const t=de,n=me,s=r.length===0,i=e===void 0?n:e,a=s?hs:{owned:null,cleanups:null,context:i?i.context:null,owner:i},o=s?r:()=>r(()=>ln(()=>sn(a)));me=a,de=null;try{return un(o,!0)}finally{de=t,me=n}}function Fe(r,e){e=e?Object.assign({},In,e):In;const t={value:r,observers:null,observerSlots:null,comparator:e.equals||void 0},n=s=>(typeof s=="function"&&(s=s(t.value)),gs(t,s));return[ds.bind(t),n]}function Le(r,e,t){const n=dr(r,e,!1,ht);cn(n)}function Or(r,e,t){fs=Js;const n=dr(r,e,!1,ht);n.user=!0,it?it.push(n):cn(n)}function Et(r,e,t){t=t?Object.assign({},In,t):In;const n=dr(r,e,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=t.equals||void 0,cn(n),ds.bind(n)}function ln(r){if(de===null)return r();const e=de;de=null;try{return r()}finally{de=e}}function Xs(r){return me===null||(me.cleanups===null?me.cleanups=[r]:me.cleanups.push(r)),r}function ds(){if(this.sources&&this.state)if(this.state===ht)cn(this);else{const r=ye;ye=null,un(()=>$n(this),!1),ye=r}if(de){const r=this.observers?this.observers.length:0;de.sources?(de.sources.push(this),de.sourceSlots.push(r)):(de.sources=[this],de.sourceSlots=[r]),this.observers?(this.observers.push(de),this.observerSlots.push(de.sources.length-1)):(this.observers=[de],this.observerSlots=[de.sources.length-1])}return this.value}function gs(r,e,t){let n=r.value;return(!r.comparator||!r.comparator(n,e))&&(r.value=e,r.observers&&r.observers.length&&un(()=>{for(let s=0;s<r.observers.length;s+=1){const i=r.observers[s],a=Zn&&Zn.running;a&&Zn.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?ye.push(i):it.push(i),i.observers&&ms(i)),a||(i.state=ht)}if(ye.length>1e6)throw ye=[],new Error},!1)),e}function cn(r){if(!r.fn)return;sn(r);const e=Un;Qs(r,r.value,e)}function Qs(r,e,t){let n;const s=me,i=de;de=me=r;try{n=r.fn(e)}catch(a){return r.pure&&(r.state=ht,r.owned&&r.owned.forEach(sn),r.owned=null),r.updatedAt=t+1,bs(a)}finally{de=i,me=s}(!r.updatedAt||r.updatedAt<=t)&&(r.updatedAt!=null&&"observers"in r?gs(r,n):r.value=n,r.updatedAt=t)}function dr(r,e,t,n=ht,s){const i={fn:r,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:me,context:me?me.context:null,pure:t};return me===null||me!==hs&&(me.owned?me.owned.push(i):me.owned=[i]),i}function Mn(r){if(r.state===0)return;if(r.state===Ln)return $n(r);if(r.suspense&&ln(r.suspense.inFallback))return r.suspense.effects.push(r);const e=[r];for(;(r=r.owner)&&(!r.updatedAt||r.updatedAt<Un);)r.state&&e.push(r);for(let t=e.length-1;t>=0;t--)if(r=e[t],r.state===ht)cn(r);else if(r.state===Ln){const n=ye;ye=null,un(()=>$n(r,e[0]),!1),ye=n}}function un(r,e){if(ye)return r();let t=!1;e||(ye=[]),it?t=!0:it=[],Un++;try{const n=r();return Vs(t),n}catch(n){t||(it=null),ye=null,bs(n)}}function Vs(r){if(ye&&(ps(ye),ye=null),r)return;const e=it;it=null,e.length&&un(()=>fs(e),!1)}function ps(r){for(let e=0;e<r.length;e++)Mn(r[e])}function Js(r){let e,t=0;for(e=0;e<r.length;e++){const n=r[e];n.user?r[t++]=n:Mn(n)}for(e=0;e<t;e++)Mn(r[e])}function $n(r,e){r.state=0;for(let t=0;t<r.sources.length;t+=1){const n=r.sources[t];if(n.sources){const s=n.state;s===ht?n!==e&&(!n.updatedAt||n.updatedAt<Un)&&Mn(n):s===Ln&&$n(n,e)}}}function ms(r){for(let e=0;e<r.observers.length;e+=1){const t=r.observers[e];t.state||(t.state=Ln,t.pure?ye.push(t):it.push(t),t.observers&&ms(t))}}function sn(r){let e;if(r.sources)for(;r.sources.length;){const t=r.sources.pop(),n=r.sourceSlots.pop(),s=t.observers;if(s&&s.length){const i=s.pop(),a=t.observerSlots.pop();n<s.length&&(i.sourceSlots[a]=n,s[n]=i,t.observerSlots[n]=a)}}if(r.tOwned){for(e=r.tOwned.length-1;e>=0;e--)sn(r.tOwned[e]);delete r.tOwned}if(r.owned){for(e=r.owned.length-1;e>=0;e--)sn(r.owned[e]);r.owned=null}if(r.cleanups){for(e=r.cleanups.length-1;e>=0;e--)r.cleanups[e]();r.cleanups=null}r.state=0}function ei(r){return r instanceof Error?r:new Error(typeof r=="string"?r:"Unknown error",{cause:r})}function bs(r,e=me){throw ei(r)}const ti=Symbol("fallback");function Cr(r){for(let e=0;e<r.length;e++)r[e]()}function ni(r,e,t={}){let n=[],s=[],i=[],a=0,o=e.length>1?[]:null;return Xs(()=>Cr(i)),()=>{let l=r()||[],c=l.length,u,h;return l[Zs],ln(()=>{let m,x,E,k,D,$,C,I,H;if(c===0)a!==0&&(Cr(i),i=[],n=[],s=[],a=0,o&&(o=[])),t.fallback&&(n=[ti],s[0]=Cn(xe=>(i[0]=xe,t.fallback())),a=1);else if(a===0){for(s=new Array(c),h=0;h<c;h++)n[h]=l[h],s[h]=Cn(p);a=c}else{for(E=new Array(c),k=new Array(c),o&&(D=new Array(c)),$=0,C=Math.min(a,c);$<C&&n[$]===l[$];$++);for(C=a-1,I=c-1;C>=$&&I>=$&&n[C]===l[I];C--,I--)E[I]=s[C],k[I]=i[C],o&&(D[I]=o[C]);for(m=new Map,x=new Array(I+1),h=I;h>=$;h--)H=l[h],u=m.get(H),x[h]=u===void 0?-1:u,m.set(H,h);for(u=$;u<=C;u++)H=n[u],h=m.get(H),h!==void 0&&h!==-1?(E[h]=s[u],k[h]=i[u],o&&(D[h]=o[u]),h=x[h],m.set(H,h)):i[u]();for(h=$;h<c;h++)h in E?(s[h]=E[h],i[h]=k[h],o&&(o[h]=D[h],o[h](h))):s[h]=Cn(p);s=s.slice(0,a=c),n=l.slice(0)}return s});function p(m){if(i[h]=m,o){const[x,E]=Fe(h);return o[h]=E,e(l[h],x)}return e(l[h])}}}function Mt(r,e){return ln(()=>r(e||{}))}function $t(r){const e="fallback"in r&&{fallback:()=>r.fallback};return Et(ni(()=>r.each,r.children,e||void 0))}function ri(r,e,t){let n=t.length,s=e.length,i=n,a=0,o=0,l=e[s-1].nextSibling,c=null;for(;a<s||o<i;){if(e[a]===t[o]){a++,o++;continue}for(;e[s-1]===t[i-1];)s--,i--;if(s===a){const u=i<n?o?t[o-1].nextSibling:t[i-o]:l;for(;o<i;)r.insertBefore(t[o++],u)}else if(i===o)for(;a<s;)(!c||!c.has(e[a]))&&e[a].remove(),a++;else if(e[a]===t[i-1]&&t[o]===e[s-1]){const u=e[--s].nextSibling;r.insertBefore(t[o++],e[a++].nextSibling),r.insertBefore(t[--i],u),e[s]=t[i]}else{if(!c){c=new Map;let h=o;for(;h<i;)c.set(t[h],h++)}const u=c.get(e[a]);if(u!=null)if(o<u&&u<i){let h=a,p=1,m;for(;++h<s&&h<i&&!((m=c.get(e[h]))==null||m!==u+p);)p++;if(p>u-o){const x=e[a];for(;o<u;)r.insertBefore(t[o++],x)}else r.replaceChild(t[o++],e[a++])}else a++;else e[a++].remove()}}}const Nr="_$DX_DELEGATE";function we(r,e,t){let n;const s=()=>{const a=document.createElement("template");return a.innerHTML=r,a.content.firstChild},i=()=>(n||(n=s())).cloneNode(!0);return i.cloneNode=i,i}function si(r,e=window.document){const t=e[Nr]||(e[Nr]=new Set);for(let n=0,s=r.length;n<s;n++){const i=r[n];t.has(i)||(t.add(i),e.addEventListener(i,ii))}}function _e(r,e,t){t==null?r.removeAttribute(e):r.setAttribute(e,t)}function Pt(r,e){e==null?r.removeAttribute("class"):r.className=e}function Ir(r,e,t){return ln(()=>r(e,t))}function ie(r,e,t,n){if(t!==void 0&&!n&&(n=[]),typeof e!="function")return Pn(r,e,n,t);Le(s=>Pn(r,e(),s,t),n)}function ii(r){let e=r.target;const t=`$$${r.type}`,n=r.target,s=r.currentTarget,i=l=>Object.defineProperty(r,"target",{configurable:!0,value:l}),a=()=>{const l=e[t];if(l&&!e.disabled){const c=e[`${t}Data`];if(c!==void 0?l.call(e,c,r):l.call(e,r),r.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(r.target)&&i(e.host),!0},o=()=>{for(;a()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return e||document}}),r.composedPath){const l=r.composedPath();i(l[0]);for(let c=0;c<l.length-2&&(e=l[c],!!a());c++){if(e._$host){e=e._$host,o();break}if(e.parentNode===s)break}}else o();i(n)}function Pn(r,e,t,n,s){for(;typeof t=="function";)t=t();if(e===t)return t;const i=typeof e,a=n!==void 0;if(r=a&&t[0]&&t[0].parentNode||r,i==="string"||i==="number"){if(i==="number"&&(e=e.toString(),e===t))return t;if(a){let o=t[0];o&&o.nodeType===3?o.data!==e&&(o.data=e):o=document.createTextNode(e),t=Dt(r,t,n,o)}else t!==""&&typeof t=="string"?t=r.firstChild.data=e:t=r.textContent=e}else if(e==null||i==="boolean")t=Dt(r,t,n);else{if(i==="function")return Le(()=>{let o=e();for(;typeof o=="function";)o=o();t=Pn(r,o,t,n)}),()=>t;if(Array.isArray(e)){const o=[],l=t&&Array.isArray(t);if(cr(o,e,t,s))return Le(()=>t=Pn(r,o,t,n,!0)),()=>t;if(o.length===0){if(t=Dt(r,t,n),a)return t}else l?t.length===0?Lr(r,o,n):ri(r,t,o):(t&&Dt(r),Lr(r,o));t=o}else if(e.nodeType){if(Array.isArray(t)){if(a)return t=Dt(r,t,n,e);Dt(r,t,null,e)}else t==null||t===""||!r.firstChild?r.appendChild(e):r.replaceChild(e,r.firstChild);t=e}}return t}function cr(r,e,t,n){let s=!1;for(let i=0,a=e.length;i<a;i++){let o=e[i],l=t&&t[r.length],c;if(!(o==null||o===!0||o===!1))if((c=typeof o)=="object"&&o.nodeType)r.push(o);else if(Array.isArray(o))s=cr(r,o,l)||s;else if(c==="function")if(n){for(;typeof o=="function";)o=o();s=cr(r,Array.isArray(o)?o:[o],Array.isArray(l)?l:[l])||s}else r.push(o),s=!0;else{const u=String(o);l&&l.nodeType===3&&l.data===u?r.push(l):r.push(document.createTextNode(u))}}return s}function Lr(r,e,t=null){for(let n=0,s=e.length;n<s;n++)r.insertBefore(e[n],t)}function Dt(r,e,t,n){if(t===void 0)return r.textContent="";const s=n||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const o=e[a];if(s!==o){const l=o.parentNode===r;!i&&!a?l?r.replaceChild(s,o):r.insertBefore(s,t):l&&o.remove()}else i=!0}}else r.insertBefore(s,t);return[s]}function oi(r){return Object.keys(r).reduce((t,n)=>{const s=r[n];return t[n]=Object.assign({},s),ws(s.value)&&!fi(s.value)&&!Array.isArray(s.value)&&(t[n].value=Object.assign({},s.value)),Array.isArray(s.value)&&(t[n].value=s.value.slice(0)),t},{})}function ai(r){return r?Object.keys(r).reduce((t,n)=>{const s=r[n];return t[n]=ws(s)&&"value"in s?s:{value:s},t[n].attribute||(t[n].attribute=ui(n)),t[n].parse="parse"in t[n]?t[n].parse:typeof t[n].value!="string",t},{}):{}}function li(r){return Object.keys(r).reduce((t,n)=>(t[n]=r[n].value,t),{})}function ci(r,e){const t=oi(e);return Object.keys(e).forEach(s=>{const i=t[s],a=r.getAttribute(i.attribute),o=r[s];a!=null&&(i.value=i.parse?_s(a):a),o!=null&&(i.value=Array.isArray(o)?o.slice(0):o),i.reflect&&Mr(r,i.attribute,i.value,!!i.parse),Object.defineProperty(r,s,{get(){return i.value},set(l){const c=i.value;i.value=l,i.reflect&&Mr(this,i.attribute,i.value,!!i.parse);for(let u=0,h=this.__propertyChangedCallbacks.length;u<h;u++)this.__propertyChangedCallbacks[u](s,l,c)},enumerable:!0,configurable:!0})}),t}function _s(r){if(r)try{return JSON.parse(r)}catch{return r}}function Mr(r,e,t,n){if(t==null||t===!1)return r.removeAttribute(e);let s=n?JSON.stringify(t):t;r.__updating[e]=!0,s==="true"&&(s=""),r.setAttribute(e,s),Promise.resolve().then(()=>delete r.__updating[e])}function ui(r){return r.replace(/\.?([A-Z]+)/g,(e,t)=>"-"+t.toLowerCase()).replace("_","-").replace(/^-/,"")}function ws(r){return r!=null&&(typeof r=="object"||typeof r=="function")}function fi(r){return Object.prototype.toString.call(r)==="[object Function]"}function hi(r){return typeof r=="function"&&r.toString().indexOf("class")===0}let tn;function di(){Object.defineProperty(tn,"renderRoot",{value:tn})}function gi(r,e){const t=Object.keys(e);return class extends r{static get observedAttributes(){return t.map(s=>e[s].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=ci(this,e);const s=li(this.props),i=this.Component,a=tn;try{tn=this,this.__initialized=!0,hi(i)?new i(s,{element:this}):i(s,{element:this})}finally{tn=a}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let s=null;for(;s=this.__releaseCallbacks.pop();)s(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(s,i,a){if(this.__initialized&&!this.__updating[s]&&(s=this.lookupProp(s),s in e)){if(a==null&&!this[s])return;this[s]=e[s].parse?_s(a):a}}lookupProp(s){if(e)return t.find(i=>s===i||s===e[i].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(s){this.__releaseCallbacks.push(s)}addPropertyChangedCallback(s){this.__propertyChangedCallbacks.push(s)}}}function pi(r,e={},t={}){const{BaseElement:n=HTMLElement,extension:s,customElements:i=window.customElements}=t;return a=>{let o=i.get(r);return o?(o.prototype.Component=a,o):(o=gi(n,ai(e)),o.prototype.Component=a,o.prototype.registeredTag=r,i.define(r,o,s),o)}}function mi(r){const e=Object.keys(r),t={};for(let n=0;n<e.length;n++){const[s,i]=Fe(r[e[n]]);Object.defineProperty(t,e[n],{get:s,set(a){i(()=>a)}})}return t}function bi(r){if(r.assignedSlot&&r.assignedSlot._$owner)return r.assignedSlot._$owner;let e=r.parentNode;for(;e&&!e._$owner&&!(e.assignedSlot&&e.assignedSlot._$owner);)e=e.parentNode;return e&&e.assignedSlot?e.assignedSlot._$owner:r._$owner}function _i(r){return(e,t)=>{const{element:n}=t;return Cn(s=>{const i=mi(e);n.addPropertyChangedCallback((o,l)=>i[o]=l),n.addReleaseCallback(()=>{n.renderRoot.textContent="",s()});const a=r(i,t);return ie(n.renderRoot,a)},bi(n))}}function wi(r,e,t){return arguments.length===2&&(t=e,e={}),pi(r,e)(_i(t))}function gr(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let vt=gr();function xs(r){vt=r}const nn={exec:()=>null};function V(r,e=""){let t=typeof r=="string"?r:r.source;const n={replace:(s,i)=>{let a=typeof i=="string"?i:i.source;return a=a.replace(Ce.caret,"$1"),t=t.replace(s,a),n},getRegex:()=>new RegExp(t,e)};return n}const Ce={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:r=>new RegExp(`^( {0,3}${r})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}#`),htmlBeginRegex:r=>new RegExp(`^ {0,${Math.min(3,r-1)}}<(?:[a-z].*>|!--)`,"i")},xi=/^(?:[ \t]*(?:\n|$))+/,Ei=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,ki=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,fn=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ti=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Es=/(?:[*+-]|\d{1,9}[.)])/,ks=V(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,Es).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pr=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,vi=/^[^\n]+/,mr=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Si=V(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",mr).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Ai=V(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Es).getRegex(),jn="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",br=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Ri=V("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",br).replace("tag",jn).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Ts=V(pr).replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex(),yi=V(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Ts).getRegex(),_r={blockquote:yi,code:Ei,def:Si,fences:ki,heading:Ti,hr:fn,html:Ri,lheading:ks,list:Ai,newline:xi,paragraph:Ts,table:nn,text:vi},$r=V("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex(),Oi={..._r,table:$r,paragraph:V(pr).replace("hr",fn).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$r).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",jn).getRegex()},Ci={..._r,html:V(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",br).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:nn,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:V(pr).replace("hr",fn).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ks).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},vs=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ni=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ss=/^( {2,}|\\)\n(?!\s*$)/,Ii=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Hn=/[\p{P}\p{S}]/u,wr=/[\s\p{P}\p{S}]/u,As=/[^\s\p{P}\p{S}]/u,Li=V(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,wr).getRegex(),Mi=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,$i=V(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,Hn).getRegex(),Pi=V("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,As).replace(/punctSpace/g,wr).replace(/punct/g,Hn).getRegex(),Di=V("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,As).replace(/punctSpace/g,wr).replace(/punct/g,Hn).getRegex(),Bi=V(/\\(punct)/,"gu").replace(/punct/g,Hn).getRegex(),zi=V(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Ui=V(br).replace("(?:-->|$)","-->").getRegex(),ji=V("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Ui).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Dn=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Hi=V(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Dn).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Rs=V(/^!?\[(label)\]\[(ref)\]/).replace("label",Dn).replace("ref",mr).getRegex(),ys=V(/^!?\[(ref)\](?:\[\])?/).replace("ref",mr).getRegex(),Fi=V("reflink|nolink(?!\\()","g").replace("reflink",Rs).replace("nolink",ys).getRegex(),xr={_backpedal:nn,anyPunctuation:Bi,autolink:zi,blockSkip:Mi,br:Ss,code:Ni,del:nn,emStrongLDelim:$i,emStrongRDelimAst:Pi,emStrongRDelimUnd:Di,escape:vs,link:Hi,nolink:ys,punctuation:Li,reflink:Rs,reflinkSearch:Fi,tag:ji,text:Ii,url:nn},Gi={...xr,link:V(/^!?\[(label)\]\((.*?)\)/).replace("label",Dn).getRegex(),reflink:V(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Dn).getRegex()},ur={...xr,escape:V(vs).replace("])","~|])").getRegex(),url:V(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},qi={...ur,br:V(Ss).replace("{2,}","*").getRegex(),text:V(ur.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vn={normal:_r,gfm:Oi,pedantic:Ci},Wt={normal:xr,gfm:ur,breaks:qi,pedantic:Gi},Wi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Pr=r=>Wi[r];function et(r,e){if(e){if(Ce.escapeTest.test(r))return r.replace(Ce.escapeReplace,Pr)}else if(Ce.escapeTestNoEncode.test(r))return r.replace(Ce.escapeReplaceNoEncode,Pr);return r}function Dr(r){try{r=encodeURI(r).replace(Ce.percentDecode,"%")}catch{return null}return r}function Br(r,e){var i;const t=r.replace(Ce.findPipe,(a,o,l)=>{let c=!1,u=o;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),n=t.split(Ce.splitPipe);let s=0;if(n[0].trim()||n.shift(),n.length>0&&!((i=n.at(-1))!=null&&i.trim())&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;s<n.length;s++)n[s]=n[s].trim().replace(Ce.slashPipe,"|");return n}function Kt(r,e,t){const n=r.length;if(n===0)return"";let s=0;for(;s<n;){const i=r.charAt(n-s-1);if(i===e&&!t)s++;else if(i!==e&&t)s++;else break}return r.slice(0,n-s)}function Ki(r,e){if(r.indexOf(e[1])===-1)return-1;let t=0;for(let n=0;n<r.length;n++)if(r[n]==="\\")n++;else if(r[n]===e[0])t++;else if(r[n]===e[1]&&(t--,t<0))return n;return-1}function zr(r,e,t,n,s){const i=e.href,a=e.title||null,o=r[1].replace(s.other.outputLinkReplace,"$1");if(r[0].charAt(0)!=="!"){n.state.inLink=!0;const l={type:"link",raw:t,href:i,title:a,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,l}return{type:"image",raw:t,href:i,title:a,text:o}}function Zi(r,e,t){const n=r.match(t.other.indentCodeCompensation);if(n===null)return e;const s=n[1];return e.split(`
`).map(i=>{const a=i.match(t.other.beginningSpace);if(a===null)return i;const[o]=a;return o.length>=s.length?i.slice(s.length):i}).join(`
`)}class Bn{constructor(e){J(this,"options");J(this,"rules");J(this,"lexer");this.options=e||vt}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:Kt(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],s=Zi(n,t[3]||"",this.rules);return{type:"code",raw:n,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:s}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(this.rules.other.endingHash.test(n)){const s=Kt(n,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(n=s.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Kt(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let n=Kt(t[0],`
`).split(`
`),s="",i="";const a=[];for(;n.length>0;){let o=!1;const l=[];let c;for(c=0;c<n.length;c++)if(this.rules.other.blockquoteStart.test(n[c]))l.push(n[c]),o=!0;else if(!o)l.push(n[c]);else break;n=n.slice(c);const u=l.join(`
`),h=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${u}`:u,i=i?`${i}
${h}`:h;const p=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,a,!0),this.lexer.state.top=p,n.length===0)break;const m=a.at(-1);if((m==null?void 0:m.type)==="code")break;if((m==null?void 0:m.type)==="blockquote"){const x=m,E=x.raw+`
`+n.join(`
`),k=this.blockquote(E);a[a.length-1]=k,s=s.substring(0,s.length-x.raw.length)+k.raw,i=i.substring(0,i.length-x.text.length)+k.text;break}else if((m==null?void 0:m.type)==="list"){const x=m,E=x.raw+`
`+n.join(`
`),k=this.list(E);a[a.length-1]=k,s=s.substring(0,s.length-m.raw.length)+k.raw,i=i.substring(0,i.length-x.raw.length)+k.raw,n=E.substring(a.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:a,text:i}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const s=n.length>1,i={type:"list",raw:"",ordered:s,start:s?+n.slice(0,-1):"",loose:!1,items:[]};n=s?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=s?n:"[*+-]");const a=this.rules.other.listItemRegex(n);let o=!1;for(;e;){let c=!1,u="",h="";if(!(t=a.exec(e))||this.rules.block.hr.test(e))break;u=t[0],e=e.substring(u.length);let p=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,$=>" ".repeat(3*$.length)),m=e.split(`
`,1)[0],x=!p.trim(),E=0;if(this.options.pedantic?(E=2,h=p.trimStart()):x?E=t[1].length+1:(E=t[2].search(this.rules.other.nonSpaceChar),E=E>4?1:E,h=p.slice(E),E+=t[1].length),x&&this.rules.other.blankLine.test(m)&&(u+=m+`
`,e=e.substring(m.length+1),c=!0),!c){const $=this.rules.other.nextBulletRegex(E),C=this.rules.other.hrRegex(E),I=this.rules.other.fencesBeginRegex(E),H=this.rules.other.headingBeginRegex(E),xe=this.rules.other.htmlBeginRegex(E);for(;e;){const q=e.split(`
`,1)[0];let ve;if(m=q,this.options.pedantic?(m=m.replace(this.rules.other.listReplaceNesting,"  "),ve=m):ve=m.replace(this.rules.other.tabCharGlobal,"    "),I.test(m)||H.test(m)||xe.test(m)||$.test(m)||C.test(m))break;if(ve.search(this.rules.other.nonSpaceChar)>=E||!m.trim())h+=`
`+ve.slice(E);else{if(x||p.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(p)||H.test(p)||C.test(p))break;h+=`
`+m}!x&&!m.trim()&&(x=!0),u+=q+`
`,e=e.substring(q.length+1),p=ve.slice(E)}}i.loose||(o?i.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(o=!0));let k=null,D;this.options.gfm&&(k=this.rules.other.listIsTask.exec(h),k&&(D=k[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:u,task:!!k,checked:D,loose:!1,text:h,tokens:[]}),i.raw+=u}const l=i.items.at(-1);l&&(l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd()),i.raw=i.raw.trimEnd();for(let c=0;c<i.items.length;c++)if(this.lexer.state.top=!1,i.items[c].tokens=this.lexer.blockTokens(i.items[c].text,[]),!i.loose){const u=i.items[c].tokens.filter(p=>p.type==="space"),h=u.length>0&&u.some(p=>this.rules.other.anyLine.test(p.raw));i.loose=h}if(i.loose)for(let c=0;c<i.items.length;c++)i.items[c].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const n=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:n,raw:t[0],href:s,title:i}}}table(e){var o;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const n=Br(t[1]),s=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(o=t[3])!=null&&o.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],a={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===s.length){for(const l of s)this.rules.other.tableAlignRight.test(l)?a.align.push("right"):this.rules.other.tableAlignCenter.test(l)?a.align.push("center"):this.rules.other.tableAlignLeft.test(l)?a.align.push("left"):a.align.push(null);for(let l=0;l<n.length;l++)a.header.push({text:n[l],tokens:this.lexer.inline(n[l]),header:!0,align:a.align[l]});for(const l of i)a.rows.push(Br(l,a.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:a.align[u]})));return a}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const n=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:n,tokens:this.lexer.inline(n)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const a=Kt(n.slice(0,-1),"\\");if((n.length-a.length)%2===0)return}else{const a=Ki(t[2],"()");if(a>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+a;t[2]=t[2].substring(0,a),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let s=t[2],i="";if(this.options.pedantic){const a=this.rules.other.pedanticHrefTitle.exec(s);a&&(s=a[1],i=a[3])}else i=t[3]?t[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?s=s.slice(1):s=s.slice(1,-1)),zr(t,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const s=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=t[s.toLowerCase()];if(!i){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return zr(n,i,n[0],this.lexer,this.rules)}}emStrong(e,t,n=""){let s=this.rules.inline.emStrongLDelim.exec(e);if(!s||s[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(s[1]||s[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const a=[...s[0]].length-1;let o,l,c=a,u=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+a);(s=h.exec(t))!=null;){if(o=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!o)continue;if(l=[...o].length,s[3]||s[4]){c+=l;continue}else if((s[5]||s[6])&&a%3&&!((a+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const p=[...s[0]][0].length,m=e.slice(0,a+s.index+p+l);if(Math.min(a,l)%2){const E=m.slice(1,-1);return{type:"em",raw:m,text:E,tokens:this.lexer.inlineTokens(E)}}const x=m.slice(2,-2);return{type:"strong",raw:m,text:x,tokens:this.lexer.inlineTokens(x)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return s&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let n,s;return t[2]==="@"?(n=t[1],s="mailto:"+n):(n=t[1],s=n),{type:"link",raw:t[0],text:n,href:s,tokens:[{type:"text",raw:n,text:n}]}}}url(e){var n;let t;if(t=this.rules.inline.url.exec(e)){let s,i;if(t[2]==="@")s=t[0],i="mailto:"+s;else{let a;do a=t[0],t[0]=((n=this.rules.inline._backpedal.exec(t[0]))==null?void 0:n[0])??"";while(a!==t[0]);s=t[0],t[1]==="www."?i="http://"+t[0]:i=t[0]}return{type:"link",raw:t[0],text:s,href:i,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const n=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:n}}}}class Ge{constructor(e){J(this,"tokens");J(this,"options");J(this,"state");J(this,"tokenizer");J(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||vt,this.options.tokenizer=this.options.tokenizer||new Bn,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Ce,block:vn.normal,inline:Wt.normal};this.options.pedantic?(t.block=vn.pedantic,t.inline=Wt.pedantic):this.options.gfm&&(t.block=vn.gfm,this.options.breaks?t.inline=Wt.breaks:t.inline=Wt.gfm),this.tokenizer.rules=t}static get rules(){return{block:vn,inline:Wt}}static lex(e,t){return new Ge(t).lex(e)}static lexInline(e,t){return new Ge(t).inlineTokens(e)}lex(e){e=e.replace(Ce.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const n=this.inlineQueue[t];this.inlineTokens(n.src,n.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){var s,i,a;for(this.options.pedantic&&(e=e.replace(Ce.tabCharGlobal,"    ").replace(Ce.spaceLine,""));e;){let o;if((i=(s=this.options.extensions)==null?void 0:s.block)!=null&&i.some(c=>(o=c.call({lexer:this},e,t))?(e=e.substring(o.raw.length),t.push(o),!0):!1))continue;if(o=this.tokenizer.space(e)){e=e.substring(o.raw.length);const c=t.at(-1);o.raw.length===1&&c!==void 0?c.raw+=`
`:t.push(o);continue}if(o=this.tokenizer.code(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(o=this.tokenizer.fences(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.heading(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.hr(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.blockquote(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.list(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.html(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.def(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[o.tag]||(this.tokens.links[o.tag]={href:o.href,title:o.title});continue}if(o=this.tokenizer.table(e)){e=e.substring(o.raw.length),t.push(o);continue}if(o=this.tokenizer.lheading(e)){e=e.substring(o.raw.length),t.push(o);continue}let l=e;if((a=this.options.extensions)!=null&&a.startBlock){let c=1/0;const u=e.slice(1);let h;this.options.extensions.startBlock.forEach(p=>{h=p.call({lexer:this},u),typeof h=="number"&&h>=0&&(c=Math.min(c,h))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(o=this.tokenizer.paragraph(l))){const c=t.at(-1);n&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o),n=l.length!==e.length,e=e.substring(o.raw.length);continue}if(o=this.tokenizer.text(e)){e=e.substring(o.raw.length);const c=t.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+o.raw,c.text+=`
`+o.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):t.push(o);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var o,l,c;let n=e,s=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(s=this.tokenizer.rules.inline.reflinkSearch.exec(n))!=null;)u.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(s=this.tokenizer.rules.inline.blockSkip.exec(n))!=null;)n=n.slice(0,s.index)+"["+"a".repeat(s[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(s=this.tokenizer.rules.inline.anyPunctuation.exec(n))!=null;)n=n.slice(0,s.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let i=!1,a="";for(;e;){i||(a=""),i=!1;let u;if((l=(o=this.options.extensions)==null?void 0:o.inline)!=null&&l.some(p=>(u=p.call({lexer:this},e,t))?(e=e.substring(u.raw.length),t.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const p=t.at(-1);u.type==="text"&&(p==null?void 0:p.type)==="text"?(p.raw+=u.raw,p.text+=u.text):t.push(u);continue}if(u=this.tokenizer.emStrong(e,n,a)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),t.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),t.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),t.push(u);continue}let h=e;if((c=this.options.extensions)!=null&&c.startInline){let p=1/0;const m=e.slice(1);let x;this.options.extensions.startInline.forEach(E=>{x=E.call({lexer:this},m),typeof x=="number"&&x>=0&&(p=Math.min(p,x))}),p<1/0&&p>=0&&(h=e.substring(0,p+1))}if(u=this.tokenizer.inlineText(h)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(a=u.raw.slice(-1)),i=!0;const p=t.at(-1);(p==null?void 0:p.type)==="text"?(p.raw+=u.raw,p.text+=u.text):t.push(u);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return t}}class zn{constructor(e){J(this,"options");J(this,"parser");this.options=e||vt}space(e){return""}code({text:e,lang:t,escaped:n}){var a;const s=(a=(t||"").match(Ce.notSpaceStart))==null?void 0:a[0],i=e.replace(Ce.endingNewline,"")+`
`;return s?'<pre><code class="language-'+et(s)+'">'+(n?i:et(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:et(i,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,n=e.start;let s="";for(let o=0;o<e.items.length;o++){const l=e.items[o];s+=this.listitem(l)}const i=t?"ol":"ul",a=t&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+s+"</"+i+`>
`}listitem(e){var n;let t="";if(e.task){const s=this.checkbox({checked:!!e.checked});e.loose?((n=e.tokens[0])==null?void 0:n.type)==="paragraph"?(e.tokens[0].text=s+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=s+" "+et(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let s="";for(let i=0;i<e.rows.length;i++){const a=e.rows[i];n="";for(let o=0;o<a.length;o++)n+=this.tablecell(a[o]);s+=this.tablerow({text:n})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+s+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td";return(e.align?`<${n} align="${e.align}">`:`<${n}>`)+t+`</${n}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${et(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const s=this.parser.parseInline(n),i=Dr(e);if(i===null)return s;e=i;let a='<a href="'+e+'"';return t&&(a+=' title="'+et(t)+'"'),a+=">"+s+"</a>",a}image({href:e,title:t,text:n}){const s=Dr(e);if(s===null)return et(n);e=s;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${et(t)}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:et(e.text)}}class Er{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class qe{constructor(e){J(this,"options");J(this,"renderer");J(this,"textRenderer");this.options=e||vt,this.options.renderer=this.options.renderer||new zn,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Er}static parse(e,t){return new qe(t).parse(e)}static parseInline(e,t){return new qe(t).parseInline(e)}parse(e,t=!0){var s,i;let n="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const c=o,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){n+=u||"";continue}}const l=o;switch(l.type){case"space":{n+=this.renderer.space(l);continue}case"hr":{n+=this.renderer.hr(l);continue}case"heading":{n+=this.renderer.heading(l);continue}case"code":{n+=this.renderer.code(l);continue}case"table":{n+=this.renderer.table(l);continue}case"blockquote":{n+=this.renderer.blockquote(l);continue}case"list":{n+=this.renderer.list(l);continue}case"html":{n+=this.renderer.html(l);continue}case"paragraph":{n+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;a+1<e.length&&e[a+1].type==="text";)c=e[++a],u+=`
`+this.renderer.text(c);t?n+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):n+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}parseInline(e,t=this.renderer){var s,i;let n="";for(let a=0;a<e.length;a++){const o=e[a];if((i=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&i[o.type]){const c=this.options.extensions.renderers[o.type].call({parser:this},o);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(o.type)){n+=c||"";continue}}const l=o;switch(l.type){case"escape":{n+=t.text(l);break}case"html":{n+=t.html(l);break}case"link":{n+=t.link(l);break}case"image":{n+=t.image(l);break}case"strong":{n+=t.strong(l);break}case"em":{n+=t.em(l);break}case"codespan":{n+=t.codespan(l);break}case"br":{n+=t.br(l);break}case"del":{n+=t.del(l);break}case"text":{n+=t.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return n}}class rn{constructor(e){J(this,"options");J(this,"block");this.options=e||vt}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?Ge.lex:Ge.lexInline}provideParser(){return this.block?qe.parse:qe.parseInline}}J(rn,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Yi{constructor(...e){J(this,"defaults",gr());J(this,"options",this.setOptions);J(this,"parse",this.parseMarkdown(!0));J(this,"parseInline",this.parseMarkdown(!1));J(this,"Parser",qe);J(this,"Renderer",zn);J(this,"TextRenderer",Er);J(this,"Lexer",Ge);J(this,"Tokenizer",Bn);J(this,"Hooks",rn);this.use(...e)}walkTokens(e,t){var s,i;let n=[];for(const a of e)switch(n=n.concat(t.call(this,a)),a.type){case"table":{const o=a;for(const l of o.header)n=n.concat(this.walkTokens(l.tokens,t));for(const l of o.rows)for(const c of l)n=n.concat(this.walkTokens(c.tokens,t));break}case"list":{const o=a;n=n.concat(this.walkTokens(o.items,t));break}default:{const o=a;(i=(s=this.defaults.extensions)==null?void 0:s.childTokens)!=null&&i[o.type]?this.defaults.extensions.childTokens[o.type].forEach(l=>{const c=o[l].flat(1/0);n=n.concat(this.walkTokens(c,t))}):o.tokens&&(n=n.concat(this.walkTokens(o.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(n=>{const s={...n};if(s.async=this.defaults.async||s.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const a=t.renderers[i.name];a?t.renderers[i.name]=function(...o){let l=i.renderer.apply(this,o);return l===!1&&(l=a.apply(this,o)),l}:t.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const a=t[i.level];a?a.unshift(i.tokenizer):t[i.level]=[i.tokenizer],i.start&&(i.level==="block"?t.startBlock?t.startBlock.push(i.start):t.startBlock=[i.start]:i.level==="inline"&&(t.startInline?t.startInline.push(i.start):t.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(t.childTokens[i.name]=i.childTokens)}),s.extensions=t),n.renderer){const i=this.defaults.renderer||new zn(this.defaults);for(const a in n.renderer){if(!(a in i))throw new Error(`renderer '${a}' does not exist`);if(["options","parser"].includes(a))continue;const o=a,l=n.renderer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h||""}}s.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new Bn(this.defaults);for(const a in n.tokenizer){if(!(a in i))throw new Error(`tokenizer '${a}' does not exist`);if(["options","rules","lexer"].includes(a))continue;const o=a,l=n.tokenizer[o],c=i[o];i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new rn;for(const a in n.hooks){if(!(a in i))throw new Error(`hook '${a}' does not exist`);if(["options","block"].includes(a))continue;const o=a,l=n.hooks[o],c=i[o];rn.passThroughHooks.has(a)?i[o]=u=>{if(this.defaults.async)return Promise.resolve(l.call(i,u)).then(p=>c.call(i,p));const h=l.call(i,u);return c.call(i,h)}:i[o]=(...u)=>{let h=l.apply(i,u);return h===!1&&(h=c.apply(i,u)),h}}s.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,a=n.walkTokens;s.walkTokens=function(o){let l=[];return l.push(a.call(this,o)),i&&(l=l.concat(i.call(this,o))),l}}this.defaults={...this.defaults,...s}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Ge.lex(e,t??this.defaults)}parser(e,t){return qe.parse(e,t??this.defaults)}parseMarkdown(e){return(n,s)=>{const i={...s},a={...this.defaults,...i},o=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&i.async===!1)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return o(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=e);const l=a.hooks?a.hooks.provideLexer():e?Ge.lex:Ge.lexInline,c=a.hooks?a.hooks.provideParser():e?qe.parse:qe.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(n):n).then(u=>l(u,a)).then(u=>a.hooks?a.hooks.processAllTokens(u):u).then(u=>a.walkTokens?Promise.all(this.walkTokens(u,a.walkTokens)).then(()=>u):u).then(u=>c(u,a)).then(u=>a.hooks?a.hooks.postprocess(u):u).catch(o);try{a.hooks&&(n=a.hooks.preprocess(n));let u=l(n,a);a.hooks&&(u=a.hooks.processAllTokens(u)),a.walkTokens&&this.walkTokens(u,a.walkTokens);let h=c(u,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(u){return o(u)}}}onError(e,t){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const s="<p>An error occurred:</p><pre>"+et(n.message+"",!0)+"</pre>";return t?Promise.resolve(s):s}if(t)return Promise.reject(n);throw n}}}const Tt=new Yi;function Y(r,e){return Tt.parse(r,e)}Y.options=Y.setOptions=function(r){return Tt.setOptions(r),Y.defaults=Tt.defaults,xs(Y.defaults),Y};Y.getDefaults=gr;Y.defaults=vt;Y.use=function(...r){return Tt.use(...r),Y.defaults=Tt.defaults,xs(Y.defaults),Y};Y.walkTokens=function(r,e){return Tt.walkTokens(r,e)};Y.parseInline=Tt.parseInline;Y.Parser=qe;Y.parser=qe.parse;Y.Renderer=zn;Y.TextRenderer=Er;Y.Lexer=Ge;Y.lexer=Ge.lex;Y.Tokenizer=Bn;Y.Hooks=rn;Y.parse=Y;Y.options;Y.setOptions;Y.use;Y.walkTokens;Y.parseInline;qe.parse;Ge.lex;/*! @license DOMPurify 3.2.3 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.3/LICENSE */const{entries:Os,setPrototypeOf:Ur,isFrozen:Xi,getPrototypeOf:Qi,getOwnPropertyDescriptor:Vi}=Object;let{freeze:Ne,seal:We,create:Cs}=Object,{apply:fr,construct:hr}=typeof Reflect<"u"&&Reflect;Ne||(Ne=function(e){return e});We||(We=function(e){return e});fr||(fr=function(e,t,n){return e.apply(t,n)});hr||(hr=function(e,t){return new e(...t)});const Sn=Be(Array.prototype.forEach),jr=Be(Array.prototype.pop),Zt=Be(Array.prototype.push),Nn=Be(String.prototype.toLowerCase),Yn=Be(String.prototype.toString),Hr=Be(String.prototype.match),Yt=Be(String.prototype.replace),Ji=Be(String.prototype.indexOf),eo=Be(String.prototype.trim),Qe=Be(Object.prototype.hasOwnProperty),Oe=Be(RegExp.prototype.test),Xt=to(TypeError);function Be(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return fr(r,e,n)}}function to(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return hr(r,t)}}function U(r,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Nn;Ur&&Ur(r,null);let n=e.length;for(;n--;){let s=e[n];if(typeof s=="string"){const i=t(s);i!==s&&(Xi(e)||(e[n]=i),s=i)}r[s]=!0}return r}function no(r){for(let e=0;e<r.length;e++)Qe(r,e)||(r[e]=null);return r}function kt(r){const e=Cs(null);for(const[t,n]of Os(r))Qe(r,t)&&(Array.isArray(n)?e[t]=no(n):n&&typeof n=="object"&&n.constructor===Object?e[t]=kt(n):e[t]=n);return e}function Qt(r,e){for(;r!==null;){const n=Vi(r,e);if(n){if(n.get)return Be(n.get);if(typeof n.value=="function")return Be(n.value)}r=Qi(r)}function t(){return null}return t}const Fr=Ne(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Xn=Ne(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qn=Ne(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ro=Ne(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vn=Ne(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),so=Ne(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Gr=Ne(["#text"]),qr=Ne(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jn=Ne(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Wr=Ne(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),An=Ne(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),io=We(/\{\{[\w\W]*|[\w\W]*\}\}/gm),oo=We(/<%[\w\W]*|[\w\W]*%>/gm),ao=We(/\$\{[\w\W]*}/gm),lo=We(/^data-[\-\w.\u00B7-\uFFFF]+$/),co=We(/^aria-[\-\w]+$/),Ns=We(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),uo=We(/^(?:\w+script|data):/i),fo=We(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Is=We(/^html$/i),ho=We(/^[a-z][.\w]*(-[.\w]+)+$/i);var Kr=Object.freeze({__proto__:null,ARIA_ATTR:co,ATTR_WHITESPACE:fo,CUSTOM_ELEMENT:ho,DATA_ATTR:lo,DOCTYPE_NAME:Is,ERB_EXPR:oo,IS_ALLOWED_URI:Ns,IS_SCRIPT_OR_DATA:uo,MUSTACHE_EXPR:io,TMPLIT_EXPR:ao});const Vt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},go=function(){return typeof window>"u"?null:window},po=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";t&&t.hasAttribute(s)&&(n=t.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},Zr=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ls(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:go();const e=y=>Ls(y);if(e.version="3.2.3",e.removed=[],!r||!r.document||r.document.nodeType!==Vt.document)return e.isSupported=!1,e;let{document:t}=r;const n=t,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:a,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:h,DOMParser:p,trustedTypes:m}=r,x=l.prototype,E=Qt(x,"cloneNode"),k=Qt(x,"remove"),D=Qt(x,"nextSibling"),$=Qt(x,"childNodes"),C=Qt(x,"parentNode");if(typeof a=="function"){const y=t.createElement("template");y.content&&y.content.ownerDocument&&(t=y.content.ownerDocument)}let I,H="";const{implementation:xe,createNodeIterator:q,createDocumentFragment:ve,getElementsByTagName:Ie}=t,{importNode:tt}=n;let be=Zr();e.isSupported=typeof Os=="function"&&typeof C=="function"&&xe&&xe.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:Ke,ERB_EXPR:nt,TMPLIT_EXPR:ze,DATA_ATTR:Bt,ARIA_ATTR:St,IS_SCRIPT_OR_DATA:At,ATTR_WHITESPACE:j,CUSTOM_ELEMENT:ee}=Kr;let{IS_ALLOWED_URI:Se}=Kr,W=null;const dt=U({},[...Fr,...Xn,...Qn,...Vn,...Gr]);let le=null;const K=U({},[...qr,...Jn,...Wr,...An]);let L=Object.seal(Cs(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,oe=null,Ze=!0,Ue=!0,Ee=!1,Z=!0,ce=!1,ue=!0,ke=!1,gt=!1,ot=!1,Ye=!1,Rt=!1,yt=!1,zt=!0,dn=!1;const Fn="user-content-";let Ot=!0,Me=!1,rt={},$e=null;const pt=U({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ut=null;const gn=U({},["audio","video","img","source","image","track"]);let jt=null;const pn=U({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ct="http://www.w3.org/1998/Math/MathML",Nt="http://www.w3.org/2000/svg",je="http://www.w3.org/1999/xhtml";let at=je,Ht=!1,Ft=null;const Gt=U({},[Ct,Nt,je],Yn);let mt=U({},["mi","mo","mn","ms","mtext"]),bt=U({},["annotation-xml"]);const Gn=U({},["title","style","font","a","script"]);let lt=null;const ct=["application/xhtml+xml","text/html"],f="text/html";let g=null,w=null;const M=t.createElement("form"),ae=function(d){return d instanceof RegExp||d instanceof Function},ne=function(){let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(w&&w===d)){if((!d||typeof d!="object")&&(d={}),d=kt(d),lt=ct.indexOf(d.PARSER_MEDIA_TYPE)===-1?f:d.PARSER_MEDIA_TYPE,g=lt==="application/xhtml+xml"?Yn:Nn,W=Qe(d,"ALLOWED_TAGS")?U({},d.ALLOWED_TAGS,g):dt,le=Qe(d,"ALLOWED_ATTR")?U({},d.ALLOWED_ATTR,g):K,Ft=Qe(d,"ALLOWED_NAMESPACES")?U({},d.ALLOWED_NAMESPACES,Yn):Gt,jt=Qe(d,"ADD_URI_SAFE_ATTR")?U(kt(pn),d.ADD_URI_SAFE_ATTR,g):pn,Ut=Qe(d,"ADD_DATA_URI_TAGS")?U(kt(gn),d.ADD_DATA_URI_TAGS,g):gn,$e=Qe(d,"FORBID_CONTENTS")?U({},d.FORBID_CONTENTS,g):pt,z=Qe(d,"FORBID_TAGS")?U({},d.FORBID_TAGS,g):{},oe=Qe(d,"FORBID_ATTR")?U({},d.FORBID_ATTR,g):{},rt=Qe(d,"USE_PROFILES")?d.USE_PROFILES:!1,Ze=d.ALLOW_ARIA_ATTR!==!1,Ue=d.ALLOW_DATA_ATTR!==!1,Ee=d.ALLOW_UNKNOWN_PROTOCOLS||!1,Z=d.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=d.SAFE_FOR_TEMPLATES||!1,ue=d.SAFE_FOR_XML!==!1,ke=d.WHOLE_DOCUMENT||!1,Ye=d.RETURN_DOM||!1,Rt=d.RETURN_DOM_FRAGMENT||!1,yt=d.RETURN_TRUSTED_TYPE||!1,ot=d.FORCE_BODY||!1,zt=d.SANITIZE_DOM!==!1,dn=d.SANITIZE_NAMED_PROPS||!1,Ot=d.KEEP_CONTENT!==!1,Me=d.IN_PLACE||!1,Se=d.ALLOWED_URI_REGEXP||Ns,at=d.NAMESPACE||je,mt=d.MATHML_TEXT_INTEGRATION_POINTS||mt,bt=d.HTML_INTEGRATION_POINTS||bt,L=d.CUSTOM_ELEMENT_HANDLING||{},d.CUSTOM_ELEMENT_HANDLING&&ae(d.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=d.CUSTOM_ELEMENT_HANDLING.tagNameCheck),d.CUSTOM_ELEMENT_HANDLING&&ae(d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=d.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),d.CUSTOM_ELEMENT_HANDLING&&typeof d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=d.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(Ue=!1),Rt&&(Ye=!0),rt&&(W=U({},Gr),le=[],rt.html===!0&&(U(W,Fr),U(le,qr)),rt.svg===!0&&(U(W,Xn),U(le,Jn),U(le,An)),rt.svgFilters===!0&&(U(W,Qn),U(le,Jn),U(le,An)),rt.mathMl===!0&&(U(W,Vn),U(le,Wr),U(le,An))),d.ADD_TAGS&&(W===dt&&(W=kt(W)),U(W,d.ADD_TAGS,g)),d.ADD_ATTR&&(le===K&&(le=kt(le)),U(le,d.ADD_ATTR,g)),d.ADD_URI_SAFE_ATTR&&U(jt,d.ADD_URI_SAFE_ATTR,g),d.FORBID_CONTENTS&&($e===pt&&($e=kt($e)),U($e,d.FORBID_CONTENTS,g)),Ot&&(W["#text"]=!0),ke&&U(W,["html","head","body"]),W.table&&(U(W,["tbody"]),delete z.tbody),d.TRUSTED_TYPES_POLICY){if(typeof d.TRUSTED_TYPES_POLICY.createHTML!="function")throw Xt('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof d.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Xt('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=d.TRUSTED_TYPES_POLICY,H=I.createHTML("")}else I===void 0&&(I=po(m,s)),I!==null&&typeof H=="string"&&(H=I.createHTML(""));Ne&&Ne(d),w=d}},S=U({},[...Xn,...Qn,...ro]),v=U({},[...Vn,...so]),N=function(d){let _=C(d);(!_||!_.tagName)&&(_={namespaceURI:at,tagName:"template"});const A=Nn(d.tagName),G=Nn(_.tagName);return Ft[d.namespaceURI]?d.namespaceURI===Nt?_.namespaceURI===je?A==="svg":_.namespaceURI===Ct?A==="svg"&&(G==="annotation-xml"||mt[G]):!!S[A]:d.namespaceURI===Ct?_.namespaceURI===je?A==="math":_.namespaceURI===Nt?A==="math"&&bt[G]:!!v[A]:d.namespaceURI===je?_.namespaceURI===Nt&&!bt[G]||_.namespaceURI===Ct&&!mt[G]?!1:!v[A]&&(Gn[A]||!S[A]):!!(lt==="application/xhtml+xml"&&Ft[d.namespaceURI]):!1},X=function(d){Zt(e.removed,{element:d});try{C(d).removeChild(d)}catch{k(d)}},re=function(d,_){try{Zt(e.removed,{attribute:_.getAttributeNode(d),from:_})}catch{Zt(e.removed,{attribute:null,from:_})}if(_.removeAttribute(d),d==="is")if(Ye||Rt)try{X(_)}catch{}else try{_.setAttribute(d,"")}catch{}},ut=function(d){let _=null,A=null;if(ot)d="<remove></remove>"+d;else{const fe=Hr(d,/^[\r\n\t ]+/);A=fe&&fe[0]}lt==="application/xhtml+xml"&&at===je&&(d='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+d+"</body></html>");const G=I?I.createHTML(d):d;if(at===je)try{_=new p().parseFromString(G,lt)}catch{}if(!_||!_.documentElement){_=xe.createDocument(at,"template",null);try{_.documentElement.innerHTML=Ht?H:G}catch{}}const ge=_.body||_.documentElement;return d&&A&&ge.insertBefore(t.createTextNode(A),ge.childNodes[0]||null),at===je?Ie.call(_,ke?"html":"body")[0]:ke?_.documentElement:ge},It=function(d){return q.call(d.ownerDocument||d,d,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},_t=function(d){return d instanceof h&&(typeof d.nodeName!="string"||typeof d.textContent!="string"||typeof d.removeChild!="function"||!(d.attributes instanceof u)||typeof d.removeAttribute!="function"||typeof d.setAttribute!="function"||typeof d.namespaceURI!="string"||typeof d.insertBefore!="function"||typeof d.hasChildNodes!="function")},mn=function(d){return typeof o=="function"&&d instanceof o};function Pe(y,d,_){Sn(y,A=>{A.call(e,d,_,w)})}const bn=function(d){let _=null;if(Pe(be.beforeSanitizeElements,d,null),_t(d))return X(d),!0;const A=g(d.nodeName);if(Pe(be.uponSanitizeElement,d,{tagName:A,allowedTags:W}),d.hasChildNodes()&&!mn(d.firstElementChild)&&Oe(/<[/\w]/g,d.innerHTML)&&Oe(/<[/\w]/g,d.textContent)||d.nodeType===Vt.progressingInstruction||ue&&d.nodeType===Vt.comment&&Oe(/<[/\w]/g,d.data))return X(d),!0;if(!W[A]||z[A]){if(!z[A]&&wn(A)&&(L.tagNameCheck instanceof RegExp&&Oe(L.tagNameCheck,A)||L.tagNameCheck instanceof Function&&L.tagNameCheck(A)))return!1;if(Ot&&!$e[A]){const G=C(d)||d.parentNode,ge=$(d)||d.childNodes;if(ge&&G){const fe=ge.length;for(let Ae=fe-1;Ae>=0;--Ae){const He=E(ge[Ae],!0);He.__removalCount=(d.__removalCount||0)+1,G.insertBefore(He,D(d))}}}return X(d),!0}return d instanceof l&&!N(d)||(A==="noscript"||A==="noembed"||A==="noframes")&&Oe(/<\/no(script|embed|frames)/i,d.innerHTML)?(X(d),!0):(ce&&d.nodeType===Vt.text&&(_=d.textContent,Sn([Ke,nt,ze],G=>{_=Yt(_,G," ")}),d.textContent!==_&&(Zt(e.removed,{element:d.cloneNode()}),d.textContent=_)),Pe(be.afterSanitizeElements,d,null),!1)},_n=function(d,_,A){if(zt&&(_==="id"||_==="name")&&(A in t||A in M))return!1;if(!(Ue&&!oe[_]&&Oe(Bt,_))){if(!(Ze&&Oe(St,_))){if(!le[_]||oe[_]){if(!(wn(d)&&(L.tagNameCheck instanceof RegExp&&Oe(L.tagNameCheck,d)||L.tagNameCheck instanceof Function&&L.tagNameCheck(d))&&(L.attributeNameCheck instanceof RegExp&&Oe(L.attributeNameCheck,_)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(_))||_==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&Oe(L.tagNameCheck,A)||L.tagNameCheck instanceof Function&&L.tagNameCheck(A))))return!1}else if(!jt[_]){if(!Oe(Se,Yt(A,j,""))){if(!((_==="src"||_==="xlink:href"||_==="href")&&d!=="script"&&Ji(A,"data:")===0&&Ut[d])){if(!(Ee&&!Oe(At,Yt(A,j,"")))){if(A)return!1}}}}}}return!0},wn=function(d){return d!=="annotation-xml"&&Hr(d,ee)},qt=function(d){Pe(be.beforeSanitizeAttributes,d,null);const{attributes:_}=d;if(!_||_t(d))return;const A={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:le,forceKeepAttr:void 0};let G=_.length;for(;G--;){const ge=_[G],{name:fe,namespaceURI:Ae,value:He}=ge,wt=g(fe);let he=fe==="value"?He:eo(He);if(A.attrName=wt,A.attrValue=he,A.keepAttr=!0,A.forceKeepAttr=void 0,Pe(be.uponSanitizeAttribute,d,A),he=A.attrValue,dn&&(wt==="id"||wt==="name")&&(re(fe,d),he=Fn+he),ue&&Oe(/((--!?|])>)|<\/(style|title)/i,he)){re(fe,d);continue}if(A.forceKeepAttr||(re(fe,d),!A.keepAttr))continue;if(!Z&&Oe(/\/>/i,he)){re(fe,d);continue}ce&&Sn([Ke,nt,ze],b=>{he=Yt(he,b," ")});const xn=g(d.nodeName);if(_n(xn,wt,he)){if(I&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Ae)switch(m.getAttributeType(xn,wt)){case"TrustedHTML":{he=I.createHTML(he);break}case"TrustedScriptURL":{he=I.createScriptURL(he);break}}try{Ae?d.setAttributeNS(Ae,fe,he):d.setAttribute(fe,he),_t(d)?X(d):jr(e.removed)}catch{}}}Pe(be.afterSanitizeAttributes,d,null)},Lt=function y(d){let _=null;const A=It(d);for(Pe(be.beforeSanitizeShadowDOM,d,null);_=A.nextNode();)Pe(be.uponSanitizeShadowNode,_,null),bn(_),qt(_),_.content instanceof i&&y(_.content);Pe(be.afterSanitizeShadowDOM,d,null)};return e.sanitize=function(y){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=null,A=null,G=null,ge=null;if(Ht=!y,Ht&&(y="<!-->"),typeof y!="string"&&!mn(y))if(typeof y.toString=="function"){if(y=y.toString(),typeof y!="string")throw Xt("dirty is not a string, aborting")}else throw Xt("toString is not a function");if(!e.isSupported)return y;if(gt||ne(d),e.removed=[],typeof y=="string"&&(Me=!1),Me){if(y.nodeName){const He=g(y.nodeName);if(!W[He]||z[He])throw Xt("root node is forbidden and cannot be sanitized in-place")}}else if(y instanceof o)_=ut("<!---->"),A=_.ownerDocument.importNode(y,!0),A.nodeType===Vt.element&&A.nodeName==="BODY"||A.nodeName==="HTML"?_=A:_.appendChild(A);else{if(!Ye&&!ce&&!ke&&y.indexOf("<")===-1)return I&&yt?I.createHTML(y):y;if(_=ut(y),!_)return Ye?null:yt?H:""}_&&ot&&X(_.firstChild);const fe=It(Me?y:_);for(;G=fe.nextNode();)bn(G),qt(G),G.content instanceof i&&Lt(G.content);if(Me)return y;if(Ye){if(Rt)for(ge=ve.call(_.ownerDocument);_.firstChild;)ge.appendChild(_.firstChild);else ge=_;return(le.shadowroot||le.shadowrootmode)&&(ge=tt.call(n,ge,!0)),ge}let Ae=ke?_.outerHTML:_.innerHTML;return ke&&W["!doctype"]&&_.ownerDocument&&_.ownerDocument.doctype&&_.ownerDocument.doctype.name&&Oe(Is,_.ownerDocument.doctype.name)&&(Ae="<!DOCTYPE "+_.ownerDocument.doctype.name+`>
`+Ae),ce&&Sn([Ke,nt,ze],He=>{Ae=Yt(Ae,He," ")}),I&&yt?I.createHTML(Ae):Ae},e.setConfig=function(){let y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ne(y),gt=!0},e.clearConfig=function(){w=null,gt=!1},e.isValidAttribute=function(y,d,_){w||ne({});const A=g(y),G=g(d);return _n(A,G,_)},e.addHook=function(y,d){typeof d=="function"&&Zt(be[y],d)},e.removeHook=function(y){return jr(be[y])},e.removeHooks=function(y){be[y]=[]},e.removeAllHooks=function(){be=Zr()},e}var Yr=Ls();function kr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var er,Xr;function mo(){if(Xr)return er;Xr=1;function r(f){return f instanceof Map?f.clear=f.delete=f.set=function(){throw new Error("map is read-only")}:f instanceof Set&&(f.add=f.clear=f.delete=function(){throw new Error("set is read-only")}),Object.freeze(f),Object.getOwnPropertyNames(f).forEach(g=>{const w=f[g],M=typeof w;(M==="object"||M==="function")&&!Object.isFrozen(w)&&r(w)}),f}class e{constructor(g){g.data===void 0&&(g.data={}),this.data=g.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function t(f){return f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function n(f,...g){const w=Object.create(null);for(const M in f)w[M]=f[M];return g.forEach(function(M){for(const ae in M)w[ae]=M[ae]}),w}const s="</span>",i=f=>!!f.scope,a=(f,{prefix:g})=>{if(f.startsWith("language:"))return f.replace("language:","language-");if(f.includes(".")){const w=f.split(".");return[`${g}${w.shift()}`,...w.map((M,ae)=>`${M}${"_".repeat(ae+1)}`)].join(" ")}return`${g}${f}`};class o{constructor(g,w){this.buffer="",this.classPrefix=w.classPrefix,g.walk(this)}addText(g){this.buffer+=t(g)}openNode(g){if(!i(g))return;const w=a(g.scope,{prefix:this.classPrefix});this.span(w)}closeNode(g){i(g)&&(this.buffer+=s)}value(){return this.buffer}span(g){this.buffer+=`<span class="${g}">`}}const l=(f={})=>{const g={children:[]};return Object.assign(g,f),g};class c{constructor(){this.rootNode=l(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(g){this.top.children.push(g)}openNode(g){const w=l({scope:g});this.add(w),this.stack.push(w)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(g){return this.constructor._walk(g,this.rootNode)}static _walk(g,w){return typeof w=="string"?g.addText(w):w.children&&(g.openNode(w),w.children.forEach(M=>this._walk(g,M)),g.closeNode(w)),g}static _collapse(g){typeof g!="string"&&g.children&&(g.children.every(w=>typeof w=="string")?g.children=[g.children.join("")]:g.children.forEach(w=>{c._collapse(w)}))}}class u extends c{constructor(g){super(),this.options=g}addText(g){g!==""&&this.add(g)}startScope(g){this.openNode(g)}endScope(){this.closeNode()}__addSublanguage(g,w){const M=g.root;w&&(M.scope=`language:${w}`),this.add(M)}toHTML(){return new o(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function h(f){return f?typeof f=="string"?f:f.source:null}function p(f){return E("(?=",f,")")}function m(f){return E("(?:",f,")*")}function x(f){return E("(?:",f,")?")}function E(...f){return f.map(w=>h(w)).join("")}function k(f){const g=f[f.length-1];return typeof g=="object"&&g.constructor===Object?(f.splice(f.length-1,1),g):{}}function D(...f){return"("+(k(f).capture?"":"?:")+f.map(M=>h(M)).join("|")+")"}function $(f){return new RegExp(f.toString()+"|").exec("").length-1}function C(f,g){const w=f&&f.exec(g);return w&&w.index===0}const I=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function H(f,{joinWith:g}){let w=0;return f.map(M=>{w+=1;const ae=w;let ne=h(M),S="";for(;ne.length>0;){const v=I.exec(ne);if(!v){S+=ne;break}S+=ne.substring(0,v.index),ne=ne.substring(v.index+v[0].length),v[0][0]==="\\"&&v[1]?S+="\\"+String(Number(v[1])+ae):(S+=v[0],v[0]==="("&&w++)}return S}).map(M=>`(${M})`).join(g)}const xe=/\b\B/,q="[a-zA-Z]\\w*",ve="[a-zA-Z_]\\w*",Ie="\\b\\d+(\\.\\d+)?",tt="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",be="\\b(0b[01]+)",Ke="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",nt=(f={})=>{const g=/^#![ ]*\//;return f.binary&&(f.begin=E(g,/.*\b/,f.binary,/\b.*/)),n({scope:"meta",begin:g,end:/$/,relevance:0,"on:begin":(w,M)=>{w.index!==0&&M.ignoreMatch()}},f)},ze={begin:"\\\\[\\s\\S]",relevance:0},Bt={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[ze]},St={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[ze]},At={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},j=function(f,g,w={}){const M=n({scope:"comment",begin:f,end:g,contains:[]},w);M.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const ae=D("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return M.contains.push({begin:E(/[ ]+/,"(",ae,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),M},ee=j("//","$"),Se=j("/\\*","\\*/"),W=j("#","$"),dt={scope:"number",begin:Ie,relevance:0},le={scope:"number",begin:tt,relevance:0},K={scope:"number",begin:be,relevance:0},L={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[ze,{begin:/\[/,end:/\]/,relevance:0,contains:[ze]}]},z={scope:"title",begin:q,relevance:0},oe={scope:"title",begin:ve,relevance:0},Ze={begin:"\\.\\s*"+ve,relevance:0};var Ee=Object.freeze({__proto__:null,APOS_STRING_MODE:Bt,BACKSLASH_ESCAPE:ze,BINARY_NUMBER_MODE:K,BINARY_NUMBER_RE:be,COMMENT:j,C_BLOCK_COMMENT_MODE:Se,C_LINE_COMMENT_MODE:ee,C_NUMBER_MODE:le,C_NUMBER_RE:tt,END_SAME_AS_BEGIN:function(f){return Object.assign(f,{"on:begin":(g,w)=>{w.data._beginMatch=g[1]},"on:end":(g,w)=>{w.data._beginMatch!==g[1]&&w.ignoreMatch()}})},HASH_COMMENT_MODE:W,IDENT_RE:q,MATCH_NOTHING_RE:xe,METHOD_GUARD:Ze,NUMBER_MODE:dt,NUMBER_RE:Ie,PHRASAL_WORDS_MODE:At,QUOTE_STRING_MODE:St,REGEXP_MODE:L,RE_STARTERS_RE:Ke,SHEBANG:nt,TITLE_MODE:z,UNDERSCORE_IDENT_RE:ve,UNDERSCORE_TITLE_MODE:oe});function Z(f,g){f.input[f.index-1]==="."&&g.ignoreMatch()}function ce(f,g){f.className!==void 0&&(f.scope=f.className,delete f.className)}function ue(f,g){g&&f.beginKeywords&&(f.begin="\\b("+f.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",f.__beforeBegin=Z,f.keywords=f.keywords||f.beginKeywords,delete f.beginKeywords,f.relevance===void 0&&(f.relevance=0))}function ke(f,g){Array.isArray(f.illegal)&&(f.illegal=D(...f.illegal))}function gt(f,g){if(f.match){if(f.begin||f.end)throw new Error("begin & end are not supported with match");f.begin=f.match,delete f.match}}function ot(f,g){f.relevance===void 0&&(f.relevance=1)}const Ye=(f,g)=>{if(!f.beforeMatch)return;if(f.starts)throw new Error("beforeMatch cannot be used with starts");const w=Object.assign({},f);Object.keys(f).forEach(M=>{delete f[M]}),f.keywords=w.keywords,f.begin=E(w.beforeMatch,p(w.begin)),f.starts={relevance:0,contains:[Object.assign(w,{endsParent:!0})]},f.relevance=0,delete w.beforeMatch},Rt=["of","and","for","in","not","or","if","then","parent","list","value"],yt="keyword";function zt(f,g,w=yt){const M=Object.create(null);return typeof f=="string"?ae(w,f.split(" ")):Array.isArray(f)?ae(w,f):Object.keys(f).forEach(function(ne){Object.assign(M,zt(f[ne],g,ne))}),M;function ae(ne,S){g&&(S=S.map(v=>v.toLowerCase())),S.forEach(function(v){const N=v.split("|");M[N[0]]=[ne,dn(N[0],N[1])]})}}function dn(f,g){return g?Number(g):Fn(f)?0:1}function Fn(f){return Rt.includes(f.toLowerCase())}const Ot={},Me=f=>{console.error(f)},rt=(f,...g)=>{console.log(`WARN: ${f}`,...g)},$e=(f,g)=>{Ot[`${f}/${g}`]||(console.log(`Deprecated as of ${f}. ${g}`),Ot[`${f}/${g}`]=!0)},pt=new Error;function Ut(f,g,{key:w}){let M=0;const ae=f[w],ne={},S={};for(let v=1;v<=g.length;v++)S[v+M]=ae[v],ne[v+M]=!0,M+=$(g[v-1]);f[w]=S,f[w]._emit=ne,f[w]._multi=!0}function gn(f){if(Array.isArray(f.begin)){if(f.skip||f.excludeBegin||f.returnBegin)throw Me("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),pt;if(typeof f.beginScope!="object"||f.beginScope===null)throw Me("beginScope must be object"),pt;Ut(f,f.begin,{key:"beginScope"}),f.begin=H(f.begin,{joinWith:""})}}function jt(f){if(Array.isArray(f.end)){if(f.skip||f.excludeEnd||f.returnEnd)throw Me("skip, excludeEnd, returnEnd not compatible with endScope: {}"),pt;if(typeof f.endScope!="object"||f.endScope===null)throw Me("endScope must be object"),pt;Ut(f,f.end,{key:"endScope"}),f.end=H(f.end,{joinWith:""})}}function pn(f){f.scope&&typeof f.scope=="object"&&f.scope!==null&&(f.beginScope=f.scope,delete f.scope)}function Ct(f){pn(f),typeof f.beginScope=="string"&&(f.beginScope={_wrap:f.beginScope}),typeof f.endScope=="string"&&(f.endScope={_wrap:f.endScope}),gn(f),jt(f)}function Nt(f){function g(S,v){return new RegExp(h(S),"m"+(f.case_insensitive?"i":"")+(f.unicodeRegex?"u":"")+(v?"g":""))}class w{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(v,N){N.position=this.position++,this.matchIndexes[this.matchAt]=N,this.regexes.push([N,v]),this.matchAt+=$(v)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const v=this.regexes.map(N=>N[1]);this.matcherRe=g(H(v,{joinWith:"|"}),!0),this.lastIndex=0}exec(v){this.matcherRe.lastIndex=this.lastIndex;const N=this.matcherRe.exec(v);if(!N)return null;const X=N.findIndex((ut,It)=>It>0&&ut!==void 0),re=this.matchIndexes[X];return N.splice(0,X),Object.assign(N,re)}}class M{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(v){if(this.multiRegexes[v])return this.multiRegexes[v];const N=new w;return this.rules.slice(v).forEach(([X,re])=>N.addRule(X,re)),N.compile(),this.multiRegexes[v]=N,N}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(v,N){this.rules.push([v,N]),N.type==="begin"&&this.count++}exec(v){const N=this.getMatcher(this.regexIndex);N.lastIndex=this.lastIndex;let X=N.exec(v);if(this.resumingScanAtSamePosition()&&!(X&&X.index===this.lastIndex)){const re=this.getMatcher(0);re.lastIndex=this.lastIndex+1,X=re.exec(v)}return X&&(this.regexIndex+=X.position+1,this.regexIndex===this.count&&this.considerAll()),X}}function ae(S){const v=new M;return S.contains.forEach(N=>v.addRule(N.begin,{rule:N,type:"begin"})),S.terminatorEnd&&v.addRule(S.terminatorEnd,{type:"end"}),S.illegal&&v.addRule(S.illegal,{type:"illegal"}),v}function ne(S,v){const N=S;if(S.isCompiled)return N;[ce,gt,Ct,Ye].forEach(re=>re(S,v)),f.compilerExtensions.forEach(re=>re(S,v)),S.__beforeBegin=null,[ue,ke,ot].forEach(re=>re(S,v)),S.isCompiled=!0;let X=null;return typeof S.keywords=="object"&&S.keywords.$pattern&&(S.keywords=Object.assign({},S.keywords),X=S.keywords.$pattern,delete S.keywords.$pattern),X=X||/\w+/,S.keywords&&(S.keywords=zt(S.keywords,f.case_insensitive)),N.keywordPatternRe=g(X,!0),v&&(S.begin||(S.begin=/\B|\b/),N.beginRe=g(N.begin),!S.end&&!S.endsWithParent&&(S.end=/\B|\b/),S.end&&(N.endRe=g(N.end)),N.terminatorEnd=h(N.end)||"",S.endsWithParent&&v.terminatorEnd&&(N.terminatorEnd+=(S.end?"|":"")+v.terminatorEnd)),S.illegal&&(N.illegalRe=g(S.illegal)),S.contains||(S.contains=[]),S.contains=[].concat(...S.contains.map(function(re){return at(re==="self"?S:re)})),S.contains.forEach(function(re){ne(re,N)}),S.starts&&ne(S.starts,v),N.matcher=ae(N),N}if(f.compilerExtensions||(f.compilerExtensions=[]),f.contains&&f.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return f.classNameAliases=n(f.classNameAliases||{}),ne(f)}function je(f){return f?f.endsWithParent||je(f.starts):!1}function at(f){return f.variants&&!f.cachedVariants&&(f.cachedVariants=f.variants.map(function(g){return n(f,{variants:null},g)})),f.cachedVariants?f.cachedVariants:je(f)?n(f,{starts:f.starts?n(f.starts):null}):Object.isFrozen(f)?n(f):f}var Ht="11.10.0";class Ft extends Error{constructor(g,w){super(g),this.name="HTMLInjectionError",this.html=w}}const Gt=t,mt=n,bt=Symbol("nomatch"),Gn=7,lt=function(f){const g=Object.create(null),w=Object.create(null),M=[];let ae=!0;const ne="Could not find the language '{}', did you forget to load/include a language module?",S={disableAutodetect:!0,name:"Plain text",contains:[]};let v={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:u};function N(b){return v.noHighlightRe.test(b)}function X(b){let O=b.className+" ";O+=b.parentNode?b.parentNode.className:"";const F=v.languageDetectRe.exec(O);if(F){const te=G(F[1]);return te||(rt(ne.replace("{}",F[1])),rt("Falling back to no-highlight mode for this block.",b)),te?F[1]:"no-highlight"}return O.split(/\s+/).find(te=>N(te)||G(te))}function re(b,O,F){let te="",pe="";typeof O=="object"?(te=b,F=O.ignoreIllegals,pe=O.language):($e("10.7.0","highlight(lang, code, ...args) has been deprecated."),$e("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),pe=b,te=O),F===void 0&&(F=!0);const Xe={code:te,language:pe};he("before:highlight",Xe);const ft=Xe.result?Xe.result:ut(Xe.language,Xe.code,F);return ft.code=Xe.code,he("after:highlight",ft),ft}function ut(b,O,F,te){const pe=Object.create(null);function Xe(T,R){return T.keywords[R]}function ft(){if(!P.keywords){Te.addText(se);return}let T=0;P.keywordPatternRe.lastIndex=0;let R=P.keywordPatternRe.exec(se),B="";for(;R;){B+=se.substring(T,R.index);const Q=Je.case_insensitive?R[0].toLowerCase():R[0],Re=Xe(P,Q);if(Re){const[st,Fs]=Re;if(Te.addText(B),B="",pe[Q]=(pe[Q]||0)+1,pe[Q]<=Gn&&(Tn+=Fs),st.startsWith("_"))B+=R[0];else{const Gs=Je.classNameAliases[st]||st;Ve(R[0],Gs)}}else B+=R[0];T=P.keywordPatternRe.lastIndex,R=P.keywordPatternRe.exec(se)}B+=se.substring(T),Te.addText(B)}function En(){if(se==="")return;let T=null;if(typeof P.subLanguage=="string"){if(!g[P.subLanguage]){Te.addText(se);return}T=ut(P.subLanguage,se,!0,yr[P.subLanguage]),yr[P.subLanguage]=T._top}else T=_t(se,P.subLanguage.length?P.subLanguage:null);P.relevance>0&&(Tn+=T.relevance),Te.__addSublanguage(T._emitter,T.language)}function De(){P.subLanguage!=null?En():ft(),se=""}function Ve(T,R){T!==""&&(Te.startScope(R),Te.addText(T),Te.endScope())}function vr(T,R){let B=1;const Q=R.length-1;for(;B<=Q;){if(!T._emit[B]){B++;continue}const Re=Je.classNameAliases[T[B]]||T[B],st=R[B];Re?Ve(st,Re):(se=st,ft(),se=""),B++}}function Sr(T,R){return T.scope&&typeof T.scope=="string"&&Te.openNode(Je.classNameAliases[T.scope]||T.scope),T.beginScope&&(T.beginScope._wrap?(Ve(se,Je.classNameAliases[T.beginScope._wrap]||T.beginScope._wrap),se=""):T.beginScope._multi&&(vr(T.beginScope,R),se="")),P=Object.create(T,{parent:{value:P}}),P}function Ar(T,R,B){let Q=C(T.endRe,B);if(Q){if(T["on:end"]){const Re=new e(T);T["on:end"](R,Re),Re.isMatchIgnored&&(Q=!1)}if(Q){for(;T.endsParent&&T.parent;)T=T.parent;return T}}if(T.endsWithParent)return Ar(T.parent,R,B)}function Bs(T){return P.matcher.regexIndex===0?(se+=T[0],1):(Kn=!0,0)}function zs(T){const R=T[0],B=T.rule,Q=new e(B),Re=[B.__beforeBegin,B["on:begin"]];for(const st of Re)if(st&&(st(T,Q),Q.isMatchIgnored))return Bs(R);return B.skip?se+=R:(B.excludeBegin&&(se+=R),De(),!B.returnBegin&&!B.excludeBegin&&(se=R)),Sr(B,T),B.returnBegin?0:R.length}function Us(T){const R=T[0],B=O.substring(T.index),Q=Ar(P,T,B);if(!Q)return bt;const Re=P;P.endScope&&P.endScope._wrap?(De(),Ve(R,P.endScope._wrap)):P.endScope&&P.endScope._multi?(De(),vr(P.endScope,T)):Re.skip?se+=R:(Re.returnEnd||Re.excludeEnd||(se+=R),De(),Re.excludeEnd&&(se=R));do P.scope&&Te.closeNode(),!P.skip&&!P.subLanguage&&(Tn+=P.relevance),P=P.parent;while(P!==Q.parent);return Q.starts&&Sr(Q.starts,T),Re.returnEnd?0:R.length}function js(){const T=[];for(let R=P;R!==Je;R=R.parent)R.scope&&T.unshift(R.scope);T.forEach(R=>Te.openNode(R))}let kn={};function Rr(T,R){const B=R&&R[0];if(se+=T,B==null)return De(),0;if(kn.type==="begin"&&R.type==="end"&&kn.index===R.index&&B===""){if(se+=O.slice(R.index,R.index+1),!ae){const Q=new Error(`0 width match regex (${b})`);throw Q.languageName=b,Q.badRule=kn.rule,Q}return 1}if(kn=R,R.type==="begin")return zs(R);if(R.type==="illegal"&&!F){const Q=new Error('Illegal lexeme "'+B+'" for mode "'+(P.scope||"<unnamed>")+'"');throw Q.mode=P,Q}else if(R.type==="end"){const Q=Us(R);if(Q!==bt)return Q}if(R.type==="illegal"&&B==="")return 1;if(Wn>1e5&&Wn>R.index*3)throw new Error("potential infinite loop, way more iterations than matches");return se+=B,B.length}const Je=G(b);if(!Je)throw Me(ne.replace("{}",b)),new Error('Unknown language: "'+b+'"');const Hs=Nt(Je);let qn="",P=te||Hs;const yr={},Te=new v.__emitter(v);js();let se="",Tn=0,xt=0,Wn=0,Kn=!1;try{if(Je.__emitTokens)Je.__emitTokens(O,Te);else{for(P.matcher.considerAll();;){Wn++,Kn?Kn=!1:P.matcher.considerAll(),P.matcher.lastIndex=xt;const T=P.matcher.exec(O);if(!T)break;const R=O.substring(xt,T.index),B=Rr(R,T);xt=T.index+B}Rr(O.substring(xt))}return Te.finalize(),qn=Te.toHTML(),{language:b,value:qn,relevance:Tn,illegal:!1,_emitter:Te,_top:P}}catch(T){if(T.message&&T.message.includes("Illegal"))return{language:b,value:Gt(O),illegal:!0,relevance:0,_illegalBy:{message:T.message,index:xt,context:O.slice(xt-100,xt+100),mode:T.mode,resultSoFar:qn},_emitter:Te};if(ae)return{language:b,value:Gt(O),illegal:!1,relevance:0,errorRaised:T,_emitter:Te,_top:P};throw T}}function It(b){const O={value:Gt(b),illegal:!1,relevance:0,_top:S,_emitter:new v.__emitter(v)};return O._emitter.addText(b),O}function _t(b,O){O=O||v.languages||Object.keys(g);const F=It(b),te=O.filter(G).filter(fe).map(De=>ut(De,b,!1));te.unshift(F);const pe=te.sort((De,Ve)=>{if(De.relevance!==Ve.relevance)return Ve.relevance-De.relevance;if(De.language&&Ve.language){if(G(De.language).supersetOf===Ve.language)return 1;if(G(Ve.language).supersetOf===De.language)return-1}return 0}),[Xe,ft]=pe,En=Xe;return En.secondBest=ft,En}function mn(b,O,F){const te=O&&w[O]||F;b.classList.add("hljs"),b.classList.add(`language-${te}`)}function Pe(b){let O=null;const F=X(b);if(N(F))return;if(he("before:highlightElement",{el:b,language:F}),b.dataset.highlighted){console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",b);return}if(b.children.length>0&&(v.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(b)),v.throwUnescapedHTML))throw new Ft("One of your code blocks includes unescaped HTML.",b.innerHTML);O=b;const te=O.textContent,pe=F?re(te,{language:F,ignoreIllegals:!0}):_t(te);b.innerHTML=pe.value,b.dataset.highlighted="yes",mn(b,F,pe.language),b.result={language:pe.language,re:pe.relevance,relevance:pe.relevance},pe.secondBest&&(b.secondBest={language:pe.secondBest.language,relevance:pe.secondBest.relevance}),he("after:highlightElement",{el:b,result:pe,text:te})}function bn(b){v=mt(v,b)}const _n=()=>{Lt(),$e("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function wn(){Lt(),$e("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let qt=!1;function Lt(){if(document.readyState==="loading"){qt=!0;return}document.querySelectorAll(v.cssSelector).forEach(Pe)}function y(){qt&&Lt()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",y,!1);function d(b,O){let F=null;try{F=O(f)}catch(te){if(Me("Language definition for '{}' could not be registered.".replace("{}",b)),ae)Me(te);else throw te;F=S}F.name||(F.name=b),g[b]=F,F.rawDefinition=O.bind(null,f),F.aliases&&ge(F.aliases,{languageName:b})}function _(b){delete g[b];for(const O of Object.keys(w))w[O]===b&&delete w[O]}function A(){return Object.keys(g)}function G(b){return b=(b||"").toLowerCase(),g[b]||g[w[b]]}function ge(b,{languageName:O}){typeof b=="string"&&(b=[b]),b.forEach(F=>{w[F.toLowerCase()]=O})}function fe(b){const O=G(b);return O&&!O.disableAutodetect}function Ae(b){b["before:highlightBlock"]&&!b["before:highlightElement"]&&(b["before:highlightElement"]=O=>{b["before:highlightBlock"](Object.assign({block:O.el},O))}),b["after:highlightBlock"]&&!b["after:highlightElement"]&&(b["after:highlightElement"]=O=>{b["after:highlightBlock"](Object.assign({block:O.el},O))})}function He(b){Ae(b),M.push(b)}function wt(b){const O=M.indexOf(b);O!==-1&&M.splice(O,1)}function he(b,O){const F=b;M.forEach(function(te){te[F]&&te[F](O)})}function xn(b){return $e("10.7.0","highlightBlock will be removed entirely in v12.0"),$e("10.7.0","Please use highlightElement now."),Pe(b)}Object.assign(f,{highlight:re,highlightAuto:_t,highlightAll:Lt,highlightElement:Pe,highlightBlock:xn,configure:bn,initHighlighting:_n,initHighlightingOnLoad:wn,registerLanguage:d,unregisterLanguage:_,listLanguages:A,getLanguage:G,registerAliases:ge,autoDetection:fe,inherit:mt,addPlugin:He,removePlugin:wt}),f.debugMode=function(){ae=!1},f.safeMode=function(){ae=!0},f.versionString=Ht,f.regex={concat:E,lookahead:p,either:D,optional:x,anyNumberOfTimes:m};for(const b in Ee)typeof Ee[b]=="object"&&r(Ee[b]);return Object.assign(f,Ee),f},ct=lt({});return ct.newInstance=()=>lt({}),er=ct,ct.HighlightJS=ct,ct.default=ct,er}var bo=mo();const tr=kr(bo),Tr={label:"Run and edit the query",title:"Open the SPARQL query in an editor in a new tab"};function Ms(r){const e=/```sparql([\s\S]*?)```/g,t=[...r.matchAll(e)].map(o=>o[1].trim()),n=t.length>0?t[t.length-1]:null;if(!n)return null;const s=/#.*(https?:\/\/[^\s]+)/i,i=n.match(s),a=i?i[1]:null;return a?$s(n,a):null}function $s(r,e=""){return`https://sib-swiss.github.io/sparql-editor/?${e?`endpoint=${e}&`:""}query=${encodeURIComponent(r)}`}function Qr(r){switch(r){case"SPARQL endpoints query examples":return"language-sparql";case"SPARQL endpoints classes schema":return"language-turtle";case"Ontology":return"language-turtle";default:return""}}const _o=`chat-with-context {
  button:hover {
    filter: brightness(90%);
  }
}
.iconBtn {
  filter: invert(44%) sepia(22%) saturate(496%) hue-rotate(176deg) brightness(93%) contrast(79%);
}`;function wo(r){var e={keyword:"base|10 prefix|10 @base|10 @prefix|10",literal:"true|0 false|0",built_in:"a|0"},t={className:"literal",relevance:1,begin:/</,end:/>/,illegal:/[^\x00-\x20<>"{}|^`]/},n="A-Za-zÀ-ÖØ-öø-˿Ͱ-ͽͿ-῿‌-‍⁰-↏Ⰰ-⿯、-퟿豈-﷏ﷰ-�က0-F",s=n+"_",i="-"+s+"0-9·̀-ͯ‿-⁀",a="_:["+s+"0-9](["+i+".]*["+i+"])?",o="["+n+"](["+i+".]*["+i+"])?",l="%[0-9A-Fa-f][0-9A-Fa-f]",c="\\\\[_~.!$&'()*+,;=/?#@%-]",u=l+"|"+c,h="("+o+")?:",p="(["+s+":0-9]|"+u+")(["+i+".:]|"+u+")*(["+i+":]|"+u+")?",m=h+p,x=h+"("+p+")?",E={begin:x,relevance:0,className:"symbol"},k={begin:a,relevance:10,className:"template-variable"},D={begin:/@[a-zA-Z]+([a-zA-Z0-9-]+)*/,className:"type",relevance:5},$={begin:"\\^\\^"+m,className:"type",relevance:10},C={begin:/'''/,end:/'''/,className:"string",relevance:0},I={begin:/"""/,end:/"""/,className:"string",relevance:0},H=JSON.parse(JSON.stringify(r.APOS_STRING_MODE));H.relevance=0;var xe=JSON.parse(JSON.stringify(r.QUOTE_STRING_MODE));xe.relevance=0;var q=JSON.parse(JSON.stringify(r.C_NUMBER_MODE));return q.relevance=0,{case_insensitive:!0,keywords:e,aliases:["turtle","ttl","n3","ntriples"],contains:[D,$,t,k,E,C,I,H,xe,q,r.HASH_COMMENT_MODE],exports:{LANGTAG:D,DATATYPE:$,IRI_LITERAL:t,BLANK_NODE:k,PNAME:E,TRIPLE_APOS_STRING:C,TRIPLE_QUOTE_STRING:I,APOS_STRING_LITERAL:H,QUOTE_STRING_LITERAL:xe,NUMBER:q,KEYWORDS:e}}}function xo(r){var e=r.getLanguage("ttl").exports,t={keyword:"base|10 prefix|10 @base|10 @prefix|10 add all as|0 ask bind by|0 clear construct|10 copymove create data default define delete describe distinct drop exists filter from|0 graph|10 group having in|0 insert limit load minus named|10 not offset optional order reduced select|0 service silent to union using values where with|0",function:"abs asc avg bound ceil coalesce concat containsstrbefore count dayhours desc encode_for_uri floor group_concat if|0 iri isblank isiri isliteral isnumeric isuri langdatatype langmatches lcase max md5 min|0 minutes month now rand regex replace round sameterm sample seconds separator sha1 sha256 sha384 sha512 str strafter strdt strends strlang strlen strstarts struuid substr sum then timezone tz ucase uribnode uuid year",literal:"true|0 false|0",built_in:"a|0"},n={className:"variable",begin:"[?$]"+r.IDENT_RE,relevance:0},s={begin:/"""\s*\{/,end:/"""/,subLanguage:"json",excludeBegin:!0,excludeEnd:!0,relevance:0},i={begin:/'''\s*\{/,end:/'''/,subLanguage:"json",excludeBegin:!0,excludeEnd:!0,relevance:0};return{case_insensitive:!0,keywords:t,aliases:["sparql","rql","rq","ru"],contains:[e.LANGTAG,e.DATATYPE,e.IRI_LITERAL,e.BLANK_NODE,e.PNAME,n,s,i,e.TRIPLE_QUOTE_STRING,e.TRIPLE_APOS_STRING,e.QUOTE_STRING_LITERAL,e.APOS_STRING_LITERAL,e.NUMBER,r.HASH_COMMENT_MODE]}}const Eo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-send'%3e%3cline%20x1='22'%20y1='2'%20x2='11'%20y2='13'%3e%3c/line%3e%3cpolygon%20points='22%202%2015%2022%2011%2013%202%209%2022%202'%3e%3c/polygon%3e%3c/svg%3e",Vr="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-x'%3e%3cline%20x1='18'%20y1='6'%20x2='6'%20y2='18'%3e%3c/line%3e%3cline%20x1='6'%20y1='6'%20x2='18'%20y2='18'%3e%3c/line%3e%3c/svg%3e",ko="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-edit'%3e%3cpath%20d='M11%204H4a2%202%200%200%200-2%202v14a2%202%200%200%200%202%202h14a2%202%200%200%200%202-2v-7'%3e%3c/path%3e%3cpath%20d='M18.5%202.5a2.121%202.121%200%200%201%203%203L12%2015l-4%201%201-4%209.5-9.5z'%3e%3c/path%3e%3c/svg%3e",To="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-square'%3e%3crect%20x='3'%20y='3'%20width='18'%20height='18'%20rx='2'%20ry='2'%3e%3c/rect%3e%3c/svg%3e",vo="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-thumbs-down'%3e%3cpath%20d='M10%2015v4a3%203%200%200%200%203%203l4-9V2H5.72a2%202%200%200%200-2%201.7l-1.38%209a2%202%200%200%200%202%202.3zm7-13h2.67A2.31%202.31%200%200%201%2022%204v7a2.31%202.31%200%200%201-2.33%202H17'%3e%3c/path%3e%3c/svg%3e",So="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='2'%20stroke-linecap='round'%20stroke-linejoin='round'%20class='feather%20feather-thumbs-up'%3e%3cpath%20d='M14%209V5a3%203%200%200%200-3-3l-4%209v11h11.28a2%202%200%200%200%202-1.7l1.38-9a2%202%200%200%200-2-2.3zM7%2022H4a2%202%200%200%201-2-2v-7a2%202%200%200%201%202-2h3'%3e%3c/path%3e%3c/svg%3e";var Jt={exports:{}},nr={},rr,Jr;function Ao(){if(Jr)return rr;Jr=1;function r(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return rr=r,r.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},r.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},r.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var n=this._timeouts.shift();if(n===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),n=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},n),this._options.unref&&this._timer.unref(),!0},r.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var n=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},r.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},r.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},r.prototype.start=r.prototype.try,r.prototype.errors=function(){return this._errors},r.prototype.attempts=function(){return this._attempts},r.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,n=0,s=0;s<this._errors.length;s++){var i=this._errors[s],a=i.message,o=(e[a]||0)+1;e[a]=o,o>=n&&(t=i,n=o)}return t},rr}var es;function Ro(){return es||(es=1,function(r){var e=Ao();r.operation=function(t){var n=r.timeouts(t);return new e(n,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})},r.timeouts=function(t){if(t instanceof Array)return[].concat(t);var n={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var s in t)n[s]=t[s];if(n.minTimeout>n.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],a=0;a<n.retries;a++)i.push(this.createTimeout(a,n));return t&&t.forever&&!i.length&&i.push(this.createTimeout(a,n)),i.sort(function(o,l){return o-l}),i},r.createTimeout=function(t,n){var s=n.randomize?Math.random()+1:1,i=Math.round(s*Math.max(n.minTimeout,1)*Math.pow(n.factor,t));return i=Math.min(i,n.maxTimeout),i},r.wrap=function(t,n,s){if(n instanceof Array&&(s=n,n=null),!s){s=[];for(var i in t)typeof t[i]=="function"&&s.push(i)}for(var a=0;a<s.length;a++){var o=s[a],l=t[o];t[o]=(function(u){var h=r.operation(n),p=Array.prototype.slice.call(arguments,1),m=p.pop();p.push(function(x){h.retry(x)||(x&&(arguments[0]=h.mainError()),m.apply(this,arguments))}),h.attempt(function(){u.apply(t,p)})}).bind(t,l),t[o].options=n}}}(nr)),nr}var sr,ts;function yo(){return ts||(ts=1,sr=Ro()),sr}var ns;function Oo(){if(ns)return Jt.exports;ns=1;const r=yo(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class t extends Error{constructor(o){super(),o instanceof Error?(this.originalError=o,{message:o}=o):(this.originalError=new Error(o),this.originalError.stack=this.stack),this.name="AbortError",this.message=o}}const n=(a,o,l)=>{const c=l.retries-(o-1);return a.attemptNumber=o,a.retriesLeft=c,a},s=a=>e.includes(a),i=(a,o)=>new Promise((l,c)=>{o={onFailedAttempt:()=>{},retries:10,...o};const u=r.operation(o);u.attempt(async h=>{try{l(await a(h))}catch(p){if(!(p instanceof Error)){c(new TypeError(`Non-error was thrown: "${p}". You should only throw errors.`));return}if(p instanceof t)u.stop(),c(p.originalError);else if(p instanceof TypeError&&!s(p.message))u.stop(),c(p);else{n(p,h,o);try{await o.onFailedAttempt(p)}catch(m){c(m);return}u.retry(p)||c(u.mainError())}}})});return Jt.exports=i,Jt.exports.default=i,Jt.exports.AbortError=t,Jt.exports}var Co=Oo();const No=kr(Co);var Rn={},ir={exports:{}},rs;function Io(){return rs||(rs=1,function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,h,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,h||l,p),x=t?t+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],m]:l._events[x].push(m):(l._events[x]=m,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var p=0,m=h.length,x=new Array(m);p<m;p++)x[p]=h[p].fn;return x},o.prototype.listenerCount=function(c){var u=t?t+c:c,h=this._events[u];return h?h.fn?1:h.length:0},o.prototype.emit=function(c,u,h,p,m,x){var E=t?t+c:c;if(!this._events[E])return!1;var k=this._events[E],D=arguments.length,$,C;if(k.fn){switch(k.once&&this.removeListener(c,k.fn,void 0,!0),D){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,u),!0;case 3:return k.fn.call(k.context,u,h),!0;case 4:return k.fn.call(k.context,u,h,p),!0;case 5:return k.fn.call(k.context,u,h,p,m),!0;case 6:return k.fn.call(k.context,u,h,p,m,x),!0}for(C=1,$=new Array(D-1);C<D;C++)$[C-1]=arguments[C];k.fn.apply(k.context,$)}else{var I=k.length,H;for(C=0;C<I;C++)switch(k[C].once&&this.removeListener(c,k[C].fn,void 0,!0),D){case 1:k[C].fn.call(k[C].context);break;case 2:k[C].fn.call(k[C].context,u);break;case 3:k[C].fn.call(k[C].context,u,h);break;case 4:k[C].fn.call(k[C].context,u,h,p);break;default:if(!$)for(H=1,$=new Array(D-1);H<D;H++)$[H-1]=arguments[H];k[C].fn.apply(k[C].context,$)}}return!0},o.prototype.on=function(c,u,h){return i(this,c,u,h,!1)},o.prototype.once=function(c,u,h){return i(this,c,u,h,!0)},o.prototype.removeListener=function(c,u,h,p){var m=t?t+c:c;if(!this._events[m])return this;if(!u)return a(this,m),this;var x=this._events[m];if(x.fn)x.fn===u&&(!p||x.once)&&(!h||x.context===h)&&a(this,m);else{for(var E=0,k=[],D=x.length;E<D;E++)(x[E].fn!==u||p&&!x[E].once||h&&x[E].context!==h)&&k.push(x[E]);k.length?this._events[m]=k.length===1?k[0]:k:a(this,m)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o}(ir)),ir.exports}var en={exports:{}},or,ss;function Lo(){return ss||(ss=1,or=(r,e)=>(e=e||(()=>{}),r.then(t=>new Promise(n=>{n(e())}).then(()=>t),t=>new Promise(n=>{n(e())}).then(()=>{throw t})))),or}var is;function Mo(){if(is)return en.exports;is=1;const r=Lo();class e extends Error{constructor(s){super(s),this.name="TimeoutError"}}const t=(n,s,i)=>new Promise((a,o)=>{if(typeof s!="number"||s<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(s===1/0){a(n);return}const l=setTimeout(()=>{if(typeof i=="function"){try{a(i())}catch(h){o(h)}return}const c=typeof i=="string"?i:`Promise timed out after ${s} milliseconds`,u=i instanceof Error?i:new e(c);typeof n.cancel=="function"&&n.cancel(),o(u)},s);r(n.then(a,o),()=>{clearTimeout(l)})});return en.exports=t,en.exports.default=t,en.exports.TimeoutError=e,en.exports}var yn={},On={},os;function $o(){if(os)return On;os=1,Object.defineProperty(On,"__esModule",{value:!0});function r(e,t,n){let s=0,i=e.length;for(;i>0;){const a=i/2|0;let o=s+a;n(e[o],t)<=0?(s=++o,i-=a+1):i=a}return s}return On.default=r,On}var as;function Po(){if(as)return yn;as=1,Object.defineProperty(yn,"__esModule",{value:!0});const r=$o();class e{constructor(){this._queue=[]}enqueue(n,s){s=Object.assign({priority:0},s);const i={priority:s.priority,run:n};if(this.size&&this._queue[this.size-1].priority>=s.priority){this._queue.push(i);return}const a=r.default(this._queue,i,(o,l)=>l.priority-o.priority);this._queue.splice(a,0,i)}dequeue(){const n=this._queue.shift();return n==null?void 0:n.run}filter(n){return this._queue.filter(s=>s.priority===n.priority).map(s=>s.run)}get size(){return this._queue.length}}return yn.default=e,yn}var ls;function Do(){if(ls)return Rn;ls=1,Object.defineProperty(Rn,"__esModule",{value:!0});const r=Io(),e=Mo(),t=Po(),n=()=>{},s=new e.TimeoutError;class i extends r{constructor(o){var l,c,u,h;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,o=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:t.default},o),!(typeof o.intervalCap=="number"&&o.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(c=(l=o.intervalCap)===null||l===void 0?void 0:l.toString())!==null&&c!==void 0?c:""}\` (${typeof o.intervalCap})`);if(o.interval===void 0||!(Number.isFinite(o.interval)&&o.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(h=(u=o.interval)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""}\` (${typeof o.interval})`);this._carryoverConcurrencyCount=o.carryoverConcurrencyCount,this._isIntervalIgnored=o.intervalCap===1/0||o.interval===0,this._intervalCap=o.intervalCap,this._interval=o.interval,this._queue=new o.queueClass,this._queueClass=o.queueClass,this.concurrency=o.concurrency,this._timeout=o.timeout,this._throwOnTimeout=o.throwOnTimeout===!0,this._isPaused=o.autoStart===!1}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,this._pendingCount===0&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const o=Date.now();if(this._intervalId===void 0){const l=this._intervalEnd-o;if(l<0)this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0;else return this._timeoutId===void 0&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},l)),!0}return!1}_tryToStartAnother(){if(this._queue.size===0)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const o=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const l=this._queue.dequeue();return l?(this.emit("active"),l(),o&&this._initializeIntervalIfNeeded(),!0):!1}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||this._intervalId!==void 0||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){this._intervalCount===0&&this._pendingCount===0&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(o){if(!(typeof o=="number"&&o>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${o}\` (${typeof o})`);this._concurrency=o,this._processQueue()}async add(o,l={}){return new Promise((c,u)=>{const h=async()=>{this._pendingCount++,this._intervalCount++;try{const p=this._timeout===void 0&&l.timeout===void 0?o():e.default(Promise.resolve(o()),l.timeout===void 0?this._timeout:l.timeout,()=>{(l.throwOnTimeout===void 0?this._throwOnTimeout:l.throwOnTimeout)&&u(s)});c(await p)}catch(p){u(p)}this._next()};this._queue.enqueue(h,l),this._tryToStartAnother(),this.emit("add")})}async addAll(o,l){return Promise.all(o.map(async c=>this.add(c,l)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(this._queue.size!==0)return new Promise(o=>{const l=this._resolveEmpty;this._resolveEmpty=()=>{l(),o()}})}async onIdle(){if(!(this._pendingCount===0&&this._queue.size===0))return new Promise(o=>{const l=this._resolveIdle;this._resolveIdle=()=>{l(),o()}})}get size(){return this._queue.size}sizeBy(o){return this._queue.filter(o).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(o){this._timeout=o}}return Rn.default=i,Rn}var Bo=Do();const ar=kr(Bo),zo=[400,401,402,403,404,405,406,407,408,422],Uo=[409];function jo(r){return r==null||typeof r!="object"?!1:"status"in r&&"statusText"in r&&"text"in r}class on extends Error{constructor(e,t,n){super(`HTTP ${e}: ${t}`),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.status=e,this.text=t,this.response=n}static async fromResponse(e,t){try{return new on(e.status,await e.text(),t!=null&&t.includeResponse?e:void 0)}catch{return new on(e.status,e.statusText,t!=null&&t.includeResponse?e:void 0)}}}class Ho{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"customFetch",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??4,"default"in ar?this.queue=new ar.default({concurrency:this.maxConcurrency}):this.queue=new ar({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e==null?void 0:e.onFailedResponseHook,this.customFetch=e.fetch}call(e,...t){const n=this.onFailedResponseHook;return this.queue.add(()=>No(()=>e(...t).catch(async s=>{throw s instanceof Error?s:jo(s)?await on.fromResponse(s,{includeResponse:!!n}):new Error(s)}),{async onFailedAttempt(s){if(s.message.startsWith("Cancel")||s.message.startsWith("TimeoutError")||s.message.startsWith("AbortError")||(s==null?void 0:s.code)==="ECONNABORTED")throw s;if(s instanceof on){if(zo.includes(s.status))throw s;if(Uo.includes(s.status))return;n&&s.response&&await n(s.response)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...n){return e.signal?Promise.race([this.call(t,...n),new Promise((s,i)=>{var a;(a=e.signal)==null||a.addEventListener("abort",()=>{i(new Error("AbortError"))})})]):this.call(t,...n)}fetch(...e){const t=this.customFetch??fetch;return this.call(()=>t(...e).then(n=>n.ok?n:Promise.reject(n)))}}function cs(r){let e,t,n,s,i,a,o;return l(),{feed:c,reset:l};function l(){e=!0,t="",n=0,s=-1,i=void 0,a=void 0,o=""}function c(h){t=t?t+h:h,e&&Fo(t)&&(t=t.slice(Ps.length)),e=!1;const p=t.length;let m=0,x=!1;for(;m<p;){x&&(t[m]===`
`&&++m,x=!1);let E=-1,k=s,D;for(let $=n;E<0&&$<p;++$)D=t[$],D===":"&&k<0?k=$-m:D==="\r"?(x=!0,E=$-m):D===`
`&&(E=$-m);if(E<0){n=p-m,s=k;break}else n=0,s=-1;u(t,m,k,E),m+=E+1}m===p?t="":m>0&&(t=t.slice(m))}function u(h,p,m,x){if(x===0){o.length>0&&(r({type:"event",id:i,event:a||void 0,data:o.slice(0,-1)}),o="",i=void 0),a=void 0;return}const E=m<0,k=h.slice(p,p+(E?x:m));let D=0;E?D=x:h[p+m+1]===" "?D=m+2:D=m+1;const $=p+D,C=x-D,I=h.slice($,$+C).toString();if(k==="data")o+=I?`${I}
`:`
`;else if(k==="event")a=I;else if(k==="id"&&!I.includes("\0"))i=I;else if(k==="retry"){const H=parseInt(I,10);Number.isNaN(H)||r({type:"reconnect-interval",value:H})}}}const Ps=[239,187,191];function Fo(r){return Ps.every((e,t)=>r.charCodeAt(t)===e)}class an extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const t=this.reader.cancel();this.reader.releaseLock(),await t}throw e}async[Symbol.asyncDispose](){await this.return()}[Symbol.asyncIterator](){return this}static fromReadableStream(e){const t=e.getReader();return new an({start(n){return s();function s(){return t.read().then(({done:i,value:a})=>{if(i){n.close();return}return n.enqueue(a),s()})}},cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new an({async pull(t){const{value:n,done:s}=await e.next();s&&t.close(),t.enqueue(n)},async cancel(t){await e.return(t)}})}}function Go(...r){const e=r.filter(n=>n!=null);if(e.length===0)return;if(e.length===1)return e[0];const t=new AbortController;for(const n of r){if(n!=null&&n.aborted)return t.abort(n.reason),t.signal;n==null||n.addEventListener("abort",()=>t.abort(n.reason),{once:!0})}return t.signal}var lr={};function qo(r){try{return typeof process<"u"?lr==null?void 0:lr[r]:void 0}catch{return}}function Wo(r){if(r)return r;const e=["LANGGRAPH","LANGSMITH","LANGCHAIN"];for(const t of e){const n=qo(`${t}_API_KEY`);if(n)return n.trim().replace(/^["']|["']$/g,"")}}class hn{constructor(e){var n;Object.defineProperty(this,"asyncCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeoutMs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultHeaders",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.asyncCaller=new Ho({maxRetries:4,maxConcurrency:4,...e==null?void 0:e.callerOptions}),this.timeoutMs=(e==null?void 0:e.timeoutMs)||12e3,this.apiUrl=((n=e==null?void 0:e.apiUrl)==null?void 0:n.replace(/\/$/,""))||"http://localhost:8123",this.defaultHeaders=(e==null?void 0:e.defaultHeaders)||{};const t=Wo(e==null?void 0:e.apiKey);t&&(this.defaultHeaders["X-Api-Key"]=t)}prepareFetchOptions(e,t){const n={...t,headers:{...this.defaultHeaders,...t==null?void 0:t.headers}};n.json&&(n.body=JSON.stringify(n.json),n.headers={...n.headers,"Content-Type":"application/json"},delete n.json);let s=null;typeof(t==null?void 0:t.timeoutMs)<"u"?t.timeoutMs!=null&&(s=AbortSignal.timeout(t.timeoutMs)):s=AbortSignal.timeout(this.timeoutMs),n.signal=Go(s,n.signal);const i=new URL(`${this.apiUrl}${e}`);if(n.params){for(const[a,o]of Object.entries(n.params)){if(o==null)continue;let l=typeof o=="string"||typeof o=="number"?o.toString():JSON.stringify(o);i.searchParams.append(a,l)}delete n.params}return[i,n]}async fetch(e,t){const n=await this.asyncCaller.fetch(...this.prepareFetchOptions(e,t));if(!(n.status===202||n.status===204))return n.json()}}class Ko extends hn{async createForThread(e,t,n){const s={schedule:n==null?void 0:n.schedule,input:n==null?void 0:n.input,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,if_not_exists:n==null?void 0:n.ifNotExists};return this.fetch(`/threads/${e}/runs/crons`,{method:"POST",json:s})}async create(e,t){const n={schedule:t==null?void 0:t.schedule,input:t==null?void 0:t.input,config:t==null?void 0:t.config,metadata:t==null?void 0:t.metadata,assistant_id:e,interrupt_before:t==null?void 0:t.interruptBefore,interrupt_after:t==null?void 0:t.interruptAfter,webhook:t==null?void 0:t.webhook,multitask_strategy:t==null?void 0:t.multitaskStrategy,if_not_exists:t==null?void 0:t.ifNotExists};return this.fetch("/runs/crons",{method:"POST",json:n})}async delete(e){await this.fetch(`/runs/crons/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/runs/crons/search",{method:"POST",json:{assistant_id:(e==null?void 0:e.assistantId)??void 0,thread_id:(e==null?void 0:e.threadId)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0}})}}class Zo extends hn{async get(e){return this.fetch(`/assistants/${e}`)}async getGraph(e,t){return this.fetch(`/assistants/${e}/graph`,{params:{xray:t==null?void 0:t.xray}})}async getSchemas(e){return this.fetch(`/assistants/${e}/schemas`)}async getSubgraphs(e,t){return t!=null&&t.namespace?this.fetch(`/assistants/${e}/subgraphs/${t.namespace}`,{params:{recurse:t==null?void 0:t.recurse}}):this.fetch(`/assistants/${e}/subgraphs`,{params:{recurse:t==null?void 0:t.recurse}})}async create(e){return this.fetch("/assistants",{method:"POST",json:{graph_id:e.graphId,config:e.config,metadata:e.metadata,assistant_id:e.assistantId,if_exists:e.ifExists,name:e.name}})}async update(e,t){return this.fetch(`/assistants/${e}`,{method:"PATCH",json:{graph_id:t.graphId,config:t.config,metadata:t.metadata,name:t.name}})}async delete(e){return this.fetch(`/assistants/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/assistants/search",{method:"POST",json:{graph_id:(e==null?void 0:e.graphId)??void 0,metadata:(e==null?void 0:e.metadata)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0}})}async getVersions(e,t){return this.fetch(`/assistants/${e}/versions`,{method:"POST",json:{metadata:(t==null?void 0:t.metadata)??void 0,limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0}})}async setLatest(e,t){return this.fetch(`/assistants/${e}/latest`,{method:"POST",json:{version:t}})}}class Yo extends hn{async get(e){return this.fetch(`/threads/${e}`)}async create(e){return this.fetch("/threads",{method:"POST",json:{metadata:e==null?void 0:e.metadata,thread_id:e==null?void 0:e.threadId,if_exists:e==null?void 0:e.ifExists}})}async copy(e){return this.fetch(`/threads/${e}/copy`,{method:"POST"})}async update(e,t){return this.fetch(`/threads/${e}`,{method:"PATCH",json:{metadata:t==null?void 0:t.metadata}})}async delete(e){return this.fetch(`/threads/${e}`,{method:"DELETE"})}async search(e){return this.fetch("/threads/search",{method:"POST",json:{metadata:(e==null?void 0:e.metadata)??void 0,limit:(e==null?void 0:e.limit)??10,offset:(e==null?void 0:e.offset)??0,status:e==null?void 0:e.status}})}async getState(e,t,n){return t!=null?typeof t!="string"?this.fetch(`/threads/${e}/state/checkpoint`,{method:"POST",json:{checkpoint:t,subgraphs:n==null?void 0:n.subgraphs}}):this.fetch(`/threads/${e}/state/${t}`,{params:{subgraphs:n==null?void 0:n.subgraphs}}):this.fetch(`/threads/${e}/state`,{params:{subgraphs:n==null?void 0:n.subgraphs}})}async updateState(e,t){return this.fetch(`/threads/${e}/state`,{method:"POST",json:{values:t.values,checkpoint_id:t.checkpointId,checkpoint:t.checkpoint,as_node:t==null?void 0:t.asNode}})}async patchState(e,t){let n;if(typeof e!="string"){if(typeof e.configurable.thread_id!="string")throw new Error("Thread ID is required when updating state with a config.");n=e.configurable.thread_id}else n=e;return this.fetch(`/threads/${n}/state`,{method:"PATCH",json:{metadata:t}})}async getHistory(e,t){return this.fetch(`/threads/${e}/history`,{method:"POST",json:{limit:(t==null?void 0:t.limit)??10,before:t==null?void 0:t.before,metadata:t==null?void 0:t.metadata,checkpoint:t==null?void 0:t.checkpoint}})}}class Xo extends hn{async*stream(e,t,n){const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,stream_mode:n==null?void 0:n.streamMode,stream_subgraphs:n==null?void 0:n.streamSubgraphs,feedback_keys:n==null?void 0:n.feedbackKeys,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,on_completion:n==null?void 0:n.onCompletion,on_disconnect:n==null?void 0:n.onDisconnect,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists},i=e==null?"/runs/stream":`/threads/${e}/runs/stream`,a=await this.asyncCaller.fetch(...this.prepareFetchOptions(i,{method:"POST",json:s,timeoutMs:null,signal:n==null?void 0:n.signal}));let o,l;const c=new TextDecoder,u=(a.body||new ReadableStream({start:h=>h.close()})).pipeThrough(new TransformStream({async start(h){o=cs(p=>{if(n!=null&&n.signal&&n.signal.aborted||p.type==="event"&&p.data==="[DONE]"){h.terminate();return}"data"in p&&h.enqueue({event:p.event??"message",data:JSON.parse(p.data)})}),l=()=>{h.enqueue({event:"end",data:void 0})}},async transform(h){const p=c.decode(h);o.feed(p),p.trim()==="event: end"&&l()}}));yield*an.fromReadableStream(u)}async create(e,t,n){const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,webhook:n==null?void 0:n.webhook,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,multitask_strategy:n==null?void 0:n.multitaskStrategy,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists};return this.fetch(`/threads/${e}/runs`,{method:"POST",json:s,signal:n==null?void 0:n.signal})}async createBatch(e){const t=e.map(n=>({...n,assistant_id:n.assistantId})).map(n=>Object.fromEntries(Object.entries(n).filter(([s,i])=>i!==void 0)));return this.fetch("/runs/batch",{method:"POST",json:t})}async wait(e,t,n){var l,c;const s={input:n==null?void 0:n.input,command:n==null?void 0:n.command,config:n==null?void 0:n.config,metadata:n==null?void 0:n.metadata,assistant_id:t,interrupt_before:n==null?void 0:n.interruptBefore,interrupt_after:n==null?void 0:n.interruptAfter,checkpoint:n==null?void 0:n.checkpoint,checkpoint_id:n==null?void 0:n.checkpointId,webhook:n==null?void 0:n.webhook,multitask_strategy:n==null?void 0:n.multitaskStrategy,on_completion:n==null?void 0:n.onCompletion,on_disconnect:n==null?void 0:n.onDisconnect,after_seconds:n==null?void 0:n.afterSeconds,if_not_exists:n==null?void 0:n.ifNotExists},i=e==null?"/runs/wait":`/threads/${e}/runs/wait`,a=await this.fetch(i,{method:"POST",json:s,timeoutMs:null,signal:n==null?void 0:n.signal});if(((n==null?void 0:n.raiseError)!==void 0?n.raiseError:!0)&&"__error__"in a&&typeof a.__error__=="object"&&a.__error__&&"error"in a.__error__&&"message"in a.__error__)throw new Error(`${(l=a.__error__)==null?void 0:l.error}: ${(c=a.__error__)==null?void 0:c.message}`);return a}async list(e,t){return this.fetch(`/threads/${e}/runs`,{params:{limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0,status:(t==null?void 0:t.status)??void 0}})}async get(e,t){return this.fetch(`/threads/${e}/runs/${t}`)}async cancel(e,t,n=!1,s="interrupt"){return this.fetch(`/threads/${e}/runs/${t}/cancel`,{method:"POST",params:{wait:n?"1":"0",action:s}})}async join(e,t,n){return this.fetch(`/threads/${e}/runs/${t}/join`,{timeoutMs:null,signal:n==null?void 0:n.signal})}async*joinStream(e,t,n){const s=typeof n=="object"&&n!=null&&n instanceof AbortSignal?{signal:n}:n,i=await this.asyncCaller.fetch(...this.prepareFetchOptions(`/threads/${e}/runs/${t}/stream`,{method:"GET",timeoutMs:null,signal:s==null?void 0:s.signal,params:{cancel_on_disconnect:s!=null&&s.cancelOnDisconnect?"1":"0"}}));let a,o;const l=new TextDecoder,c=(i.body||new ReadableStream({start:u=>u.close()})).pipeThrough(new TransformStream({async start(u){a=cs(h=>{if(s!=null&&s.signal&&s.signal.aborted||h.type==="event"&&h.data==="[DONE]"){u.terminate();return}"data"in h&&u.enqueue({event:h.event??"message",data:JSON.parse(h.data)})}),o=()=>{u.enqueue({event:"end",data:void 0})}},async transform(u){const h=l.decode(u);a.feed(h),h.trim()==="event: end"&&o()}}));yield*an.fromReadableStream(c)}async delete(e,t){return this.fetch(`/threads/${e}/runs/${t}`,{method:"DELETE"})}}class Qo extends hn{async putItem(e,t,n){e.forEach(i=>{if(i.includes("."))throw new Error(`Invalid namespace label '${i}'. Namespace labels cannot contain periods ('.')`)});const s={namespace:e,key:t,value:n};return this.fetch("/store/items",{method:"PUT",json:s})}async getItem(e,t){e.forEach(s=>{if(s.includes("."))throw new Error(`Invalid namespace label '${s}'. Namespace labels cannot contain periods ('.')`)});const n=await this.fetch("/store/items",{params:{namespace:e.join("."),key:t}});return n?{...n,createdAt:n.created_at,updatedAt:n.updated_at}:null}async deleteItem(e,t){return e.forEach(n=>{if(n.includes("."))throw new Error(`Invalid namespace label '${n}'. Namespace labels cannot contain periods ('.')`)}),this.fetch("/store/items",{method:"DELETE",json:{namespace:e,key:t}})}async searchItems(e,t){const n={namespace_prefix:e,filter:t==null?void 0:t.filter,limit:(t==null?void 0:t.limit)??10,offset:(t==null?void 0:t.offset)??0,query:t==null?void 0:t.query};return{items:(await this.fetch("/store/items/search",{method:"POST",json:n})).items.map(i=>({...i,createdAt:i.created_at,updatedAt:i.updated_at}))}}async listNamespaces(e){const t={prefix:e==null?void 0:e.prefix,suffix:e==null?void 0:e.suffix,max_depth:e==null?void 0:e.maxDepth,limit:(e==null?void 0:e.limit)??100,offset:(e==null?void 0:e.offset)??0};return this.fetch("/store/namespaces",{method:"POST",json:t})}}class Vo{constructor(e){Object.defineProperty(this,"assistants",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"threads",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"crons",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"store",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.assistants=new Zo(e),this.threads=new Yo(e),this.runs=new Xo(e),this.crons=new Ko(e),this.store=new Qo(e)}}class Jo{constructor({apiUrl:e,apiKey:t,model:n}){this.abortRequest=()=>{this.abortController.abort(),this.abortController=new AbortController},this.lastMsg=()=>this.messages()[this.messages().length-1],this.scrollToInput=()=>{},this.appendMessage=(a,o="assistant")=>{const[l,c]=Fe(a),[u,h]=Fe([]),[p,m]=Fe([]),x={content:l,setContent:c,steps:u,setSteps:h,role:o,links:p,setLinks:m},E=Ms(a);E&&x.setLinks([{url:E,...Tr}]),this.setMessages(k=>[...k,x])},this.appendContentToLastMsg=(a,o=!1)=>{this.lastMsg().setContent(l=>l+(o?`

`:"")+a)},this.appendStepToLastMsg=(a,o,l=[],c="")=>{this.lastMsg().setSteps(u=>[...u,{node_id:o,label:a,retrieved_docs:l,details:c}]),this.scrollToInput()},this.apiUrl=e,this.apiKey=t,this.model=n;const[s,i]=Fe([]);this.messages=s,this.setMessages=i,this.abortController=new AbortController}}async function ea(r,e){r.appendMessage(e,"user"),r.apiUrl.endsWith(":2024/")||r.apiUrl.endsWith(":8123/")?await na(r):r.apiUrl.endsWith("/completions/")?await ra(r):await ta(r)}async function Ds(r,e){var t;if(e.event==="error")throw new Error(`An error occurred. Please try again. ${e.data.error}: ${e.data.message}`);if(e.event==="updates")for(const n of Object.keys(e.data)){const s=e.data[n];if(s.retrieved_docs&&r.appendStepToLastMsg(`📚️ Using ${s.retrieved_docs.length} documents`,n,s.retrieved_docs),s.extracted_entities&&s.extracted_entities.sparql_query&&r.lastMsg().setLinks([{url:$s(s.extracted_entities.sparql_query,s.extracted_entities.sparql_endpoint_url),...Tr}]),s.validation)for(const i of s.validation)r.appendStepToLastMsg(i.label,n,[],i.details),i.type==="recall"?r.lastMsg().setContent(""):i.fixed_message&&r.lastMsg().setContent(i.fixed_message)}if(e.event==="messages"){const[n,s]=e.data;if(((t=n.tool_calls)==null?void 0:t.length)>0){const i=n.tool_calls.map(a=>a.name).join(", ");i&&r.appendStepToLastMsg(`💭 Calling tools: ${i}`,s.langgraph_node)}n.content&&n.type==="tool"?r.appendStepToLastMsg(`🔧 Tool ${n.name} result: ${n.content}`,s.langgraph_node):n.content&&n.type==="AIMessageChunk"&&r.appendContentToLastMsg(n.content)}}async function ta(r){var i;const e=await fetch(`${r.apiUrl}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},signal:r.abortController.signal,body:JSON.stringify({messages:r.messages().map(({content:a,role:o})=>({content:a(),role:o})),model:r.model,max_tokens:500,stream:!0})});r.appendMessage("","assistant");const t=(i=e.body)==null?void 0:i.getReader(),n=new TextDecoder("utf-8");let s="";for(;;)if(t){const{value:a,done:o}=await t.read();if(o)break;const l=n.decode(a,{stream:!0});s+=l;let c=s.split(`
`);s=c.pop()||"";for(const u of c.filter(h=>h.trim()!==""))if(u.startsWith("data: "))try{const h=JSON.parse(u.substring(6));Ds(r,h)}catch(h){console.log("Error parsing line",h,u)}}}async function na(r){const e=new Vo({apiUrl:r.apiUrl}),t="agent",n=await e.threads.create(),s=e.runs.stream(n.thread_id,t,{input:{messages:r.messages().map(({content:i,role:a})=>({content:i(),role:a}))},config:{configurable:{}},streamMode:["messages-tuple","updates"],signal:r.abortController.signal});r.appendMessage("","assistant");for await(const i of s)Ds(r,i)}async function ra(r){var a,o;const e=await fetch(`${r.apiUrl}chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r.apiKey}`},signal:r.abortController.signal,body:JSON.stringify({messages:r.messages().map(({content:l,role:c})=>({content:l(),role:c})),model:r.model,max_tokens:500,stream:!0})});r.appendMessage("","assistant");const t=(a=e.body)==null?void 0:a.getReader(),n=new TextDecoder("utf-8");let s="";for(;;)if(t){const{value:l,done:c}=await t.read();if(c)break;const u=n.decode(l,{stream:!0}),h=s+u;s&&(s="");for(const p of h.split(`
`).filter(m=>m.trim()!=="")){if(p==="data: [DONE]")return;if(p.startsWith("data: "))try{const m=JSON.parse(p.substring(6));if(m.retrieved_docs)r.appendStepToLastMsg(`📚️ Using ${m.retrieved_docs.length} documents`,"retrieve",m.retrieved_docs);else{const x=(o=m.choices[0].delta)==null?void 0:o.content;x&&r.appendContentToLastMsg(x)}}catch{s=p}}}const i=Ms(r.lastMsg().content());i&&r.lastMsg().setLinks([{url:i,...Tr}])}var sa=we('<div><style></style><div></div><form class="p-2 flex"><div class="container flex mx-auto max-w-5xl"><textarea autofocus class="flex-grow px-4 py-2 h-auto border border-slate-400 bg-slate-200 dark:bg-slate-700 dark:border-slate-500 rounded-3xl focus:outline-none focus:ring focus:ring-blue-200 dark:focus:ring-blue-400 overflow-y-hidden resize-none"placeholder="Ask a question"rows=1></textarea><button type=submit class="ml-2 px-4 py-2 rounded-3xl text-slate-500 bg-slate-200 dark:text-slate-400 dark:bg-slate-700"></button><button title="Start a new conversation"class="ml-2 px-4 py-2 rounded-3xl text-slate-500 bg-slate-200 dark:text-slate-400 dark:bg-slate-700"><img alt="Start a new conversation"class=iconBtn>'),ia=we('<div><div><div class="flex flex-col items-start"></div><article class="prose max-w-full">'),us=we('<button class="text-gray-400 ml-8 mb-4">'),oa=we('<dialog class="bg-white dark:bg-gray-800 m-3 rounded-3xl shadow-md w-full"><button class="fixed top-2 right-8 m-3 px-2 text-xl text-slate-500 bg-gray-200 dark:bg-gray-700 rounded-3xl"title="Close documents details"><img alt="Close the dialog"class=iconBtn></button><article class="prose max-w-full p-3"><div class="flex space-x-2 mb-4">'),aa=we('<button title="Show only this type of document">'),la=we("<p><code class=mr-1> - </code> (<a target=_blank></a>)"),ca=we("<pre><code>"),ua=we("<p>"),fa=we('<dialog class="bg-white dark:bg-gray-800 m-3 rounded-3xl shadow-md w-full"><button class="fixed top-2 right-8 m-3 px-2 text-xl text-slate-500 bg-gray-200 dark:bg-gray-700 rounded-3xl"title="Close step details"><img alt="Close the dialog"class=iconBtn></button><article class="prose max-w-full p-6">'),ha=we('<p class="text-gray-400 ml-8 mb-4">'),da=we('<a target=_blank class=hover:text-inherit><button class="my-3 mr-1 px-3 py-1 text-sm bg-gray-300 dark:bg-gray-700 rounded-3xl align-middle">'),ga=we('<button class="mr-1 my-3 px-3 py-1 text-sm hover:bg-gray-300 dark:hover:bg-gray-800 rounded-3xl align-middle"title="Report a good response"><img alt="Thumbs up"height=20px width=20px class=iconBtn>'),pa=we('<button class="my-3 px-3 py-1 text-sm hover:bg-gray-300 dark:hover:bg-gray-800 rounded-3xl align-middle"title="Report a bad response"><img alt="Thumbs down"height=20px width=20px class=iconBtn>'),ma=we('<div class=text-center><div class="bg-orange-300 p-2 text-orange-900 text-sm rounded-3xl font-semibold mb-2 inline-block">'),ba=we('<div class="py-2 px-4 justify-center items-center text-sm flex flex-col space-y-2">'),_a=we('<button class="px-5 py-2.5 bg-slate-200 text-slate-600 rounded-3xl">'),wa=we('<img alt="Stop generation"class=iconBtn>'),xa=we('<img alt="Send question"class=iconBtn>');wi("chat-with-context",{chatEndpoint:"",examples:"",apiKey:"",feedbackEndpoint:"",model:"openai/gpt-4o"},r=>{di(),tr.registerLanguage("ttl",wo),tr.registerLanguage("sparql",xo);const[e,t]=Fe(""),[n,s]=Fe(!1),[i,a]=Fe(!1),[o,l]=Fe(""),[c,u]=Fe(""),[h,p]=Fe(""),m=new Jo({apiUrl:r.chatEndpoint,apiKey:r.apiKey,model:r.model});let x,E;const k=r.examples.split(",").map(q=>q.trim());Or(()=>{r.chatEndpoint===""&&t("Please provide an API URL for the chat component to work."),m.scrollToInput=()=>E.scrollIntoView({behavior:"smooth"}),xe(),p(r.feedbackEndpoint)});const D=q=>{u(q),document.getElementById(q).showModal(),history.pushState({dialogOpen:!0},""),C()},$=()=>{document.getElementById(c()).close(),u("")};Or(()=>{window.addEventListener("popstate",q=>{c()&&(q.preventDefault(),$())})});const C=()=>{document.querySelectorAll("pre code:not(.hljs)").forEach(q=>{tr.highlightElement(q)})};async function I(q){if(!q.trim()||n())return;E.value="",s(!0),t(""),setTimeout(()=>xe(),0);const ve=Date.now();try{await ea(m,q)}catch(Ie){Ie instanceof Error&&Ie.name!=="AbortError"&&(console.error("An error occurred when querying the API:",Ie),t("An error occurred when querying the API. Please try again or contact an admin."))}s(!1),a(!1),C(),m.scrollToInput(),console.log(`Request completed in ${(Date.now()-ve)/1e3} seconds`)}function H(q){fetch(h(),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({like:q,messages:m.messages()})}),a(!0)}function xe(){E.style.height="auto",E.style.height=E.scrollHeight+"px"}return(()=>{var q=sa(),ve=q.firstChild,Ie=ve.nextSibling,tt=Ie.nextSibling,be=tt.firstChild,Ke=be.firstChild,nt=Ke.nextSibling,ze=nt.nextSibling,Bt=ze.firstChild;ie(ve,_o);var St=x;typeof St=="function"?Ir(St,Ie):x=Ie,ie(Ie,Mt($t,{get each(){return m.messages()},children:(j,ee)=>(()=>{var Se=ia(),W=Se.firstChild,dt=W.firstChild,le=dt.nextSibling;return ie(dt,Mt($t,{get each(){return j.steps()},children:(K,L)=>K.retrieved_docs.length>0?[(()=>{var z=us();return z.$$click=()=>{l(K.retrieved_docs[0].metadata.doc_type),D(`step-dialog-${ee()}-${L()}`)},ie(z,()=>K.label),Le(()=>_e(z,"title",`Click to see the documents used to generate the response

Node: ${K.node_id}`)),z})(),(()=>{var z=oa(),oe=z.firstChild,Ze=oe.firstChild,Ue=oe.nextSibling,Ee=Ue.firstChild;return oe.$$click=()=>$(),_e(Ze,"src",Vr),ie(Ee,Mt($t,{get each(){return Array.from(new Set(K.retrieved_docs.map(Z=>Z.metadata.doc_type)))},children:Z=>(()=>{var ce=aa();return ce.$$click=()=>{l(Z),C()},ie(ce,Z),Le(()=>Pt(ce,`px-4 py-2 rounded-lg transition-all ${o()===Z?"bg-gray-600 text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`)),ce})()})),ie(Ue,Mt($t,{get each(){return K.retrieved_docs.filter(Z=>Z.metadata.doc_type===o())},children:(Z,ce)=>[(()=>{var ue=la(),ke=ue.firstChild,gt=ke.firstChild,ot=ke.nextSibling,Ye=ot.nextSibling;return ie(ke,()=>ce()+1,gt),ie(ke,()=>Math.round(Z.metadata.score*1e3)/1e3,null),ie(ue,()=>Z.metadata.question,ot),ie(Ye,()=>Z.metadata.endpoint_url),Le(()=>_e(Ye,"href",Z.metadata.endpoint_url)),ue})(),Et(()=>Et(()=>!!Qr(Z.metadata.doc_type).startsWith("language-"))()?(()=>{var ue=ca(),ke=ue.firstChild;return ie(ke,()=>Z.metadata.answer),Le(()=>Pt(ke,`${Qr(Z.metadata.doc_type)}`)),ue})():(()=>{var ue=ua();return ie(ue,()=>Z.metadata.answer),ue})())]}),null),Le(Z=>{var ce=`step-dialog-${ee()}-${L()}`,ue=`close-dialog-${ee()}-${L()}`;return ce!==Z.e&&_e(z,"id",Z.e=ce),ue!==Z.t&&_e(oe,"id",Z.t=ue),Z},{e:void 0,t:void 0}),z})()]:K.details?[(()=>{var z=us();return z.$$click=()=>{D(`step-dialog-${ee()}-${L()}`)},ie(z,()=>K.label),Le(()=>_e(z,"title",`Click to see the documents used to generate the response

Node: ${K.node_id}`)),z})(),(()=>{var z=fa(),oe=z.firstChild,Ze=oe.firstChild,Ue=oe.nextSibling;return oe.$$click=()=>$(),_e(Ze,"src",Vr),Le(Ee=>{var Z=`step-dialog-${ee()}-${L()}`,ce=`close-dialog-${ee()}-${L()}`,ue=Yr.sanitize(Y.parse(K.details));return Z!==Ee.e&&_e(z,"id",Ee.e=Z),ce!==Ee.t&&_e(oe,"id",Ee.t=ce),ue!==Ee.a&&(Ue.innerHTML=Ee.a=ue),Ee},{e:void 0,t:void 0,a:void 0}),z})()]:(()=>{var z=ha();return ie(z,()=>K.label),Le(()=>_e(z,"title",`Node: ${K.node_id}`)),z})()})),ie(W,Mt($t,{get each(){return j.links()},children:K=>(()=>{var L=da(),z=L.firstChild;return ie(z,()=>K.label),Le(oe=>{var Ze=K.url,Ue=K.title;return Ze!==oe.e&&_e(L,"href",oe.e=Ze),Ue!==oe.t&&_e(L,"title",oe.t=Ue),oe},{e:void 0,t:void 0}),L})()}),null),ie(W,(()=>{var K=Et(()=>!!(h()&&j.role==="assistant"&&ee()===m.messages().length-1&&m.lastMsg().content()&&!i()));return()=>K()&&[(()=>{var L=ga(),z=L.firstChild;return L.$$click=()=>H(!0),_e(z,"src",So),L})(),(()=>{var L=pa(),z=L.firstChild;return L.$$click=()=>H(!1),_e(z,"src",vo),L})()]})(),null),Le(K=>{var L=`w-full flex flex-col flex-grow ${j.role==="user"?"items-end":""}`,z=`py-2.5 mb-2 ${j.role==="user"?"bg-gray-300 rounded-3xl px-5":""}`,oe=Yr.sanitize(Y.parse(j.content()));return L!==K.e&&Pt(Se,K.e=L),z!==K.t&&Pt(W,K.t=z),oe!==K.a&&(le.innerHTML=K.a=oe),K},{e:void 0,t:void 0,a:void 0}),Se})()})),ie(q,(()=>{var j=Et(()=>!!e());return()=>j()&&(()=>{var ee=ma(),Se=ee.firstChild;return ie(Se,e),ee})()})(),tt),ie(q,(()=>{var j=Et(()=>m.messages().length<1);return()=>j()&&(()=>{var ee=ba();return ie(ee,Mt($t,{each:k,children:Se=>(()=>{var W=_a();return W.$$click=()=>I(Se),ie(W,Se),W})()})),ee})()})(),tt),tt.addEventListener("submit",j=>{j.preventDefault(),j.type==="submit"&&j.submitter&&n()&&m.abortRequest(),I(E.value)}),Ke.$$input=()=>xe(),Ke.$$keydown=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),I(E.value))};var At=E;return typeof At=="function"?Ir(At,Ke):E=Ke,ie(nt,(()=>{var j=Et(()=>!!n());return()=>j()?(()=>{var ee=wa();return _e(ee,"src",To),ee})():(()=>{var ee=xa();return _e(ee,"src",Eo),ee})()})()),ze.$$click=()=>m.setMessages([]),_e(Bt,"src",ko),Le(j=>{var ee=`chat-with-context w-full h-full flex flex-col ${m.messages().length===0?"justify-center":""}`,Se=`overflow-y-auto ${m.messages().length!==0?"flex-grow":""}`,W=n()?"Stop generation":"Send question";return ee!==j.e&&Pt(q,j.e=ee),Se!==j.t&&Pt(Ie,j.t=Se),W!==j.a&&_e(nt,"title",j.a=W),j},{e:void 0,t:void 0,a:void 0}),q})()});si(["keydown","input","click"]);
