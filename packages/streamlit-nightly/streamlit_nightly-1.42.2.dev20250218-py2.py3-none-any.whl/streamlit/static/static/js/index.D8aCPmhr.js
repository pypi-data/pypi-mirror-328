import{r as s,be as U,y as k,co as x,C as A,j as l,bp as L,bC as P,bq as B,b7 as D,br as j}from"./index.CLsHMaqe.js";import{u as w}from"./uniqueId.fc9w8X88.js";import{u as O,a as _,b as q}from"./useOnInputChange.BF6Trlh5.js";import{I as K}from"./InputInstructions.CpNPMMpX.js";import{a as $}from"./useBasicWidgetState.CySX_BlM.js";import{T as G}from"./textarea.ZI_0MUsX.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.DzU-mNjk.js";import"./base-input.DYDwDBVN.js";const T=(a,t)=>a.getStringValue(t)??t.default??null,N=a=>a.default??null,J=a=>a.value??null,M=(a,t,o,u)=>{t.setStringValue(a,o.value,{fromUi:o.fromUi},u)},Q=({disabled:a,element:t,widgetMgr:o,fragmentId:u})=>{var f;const h=s.useRef(w("text_area_")).current,{values:[W],elementRef:S}=U(s.useMemo(()=>["width"],[])),[r,n]=s.useState(!1),[y,b]=s.useState(!1),[i,d]=s.useState(T(o,t)??null),C=s.useCallback(()=>{d(t.default??null),n(!0)},[t]),[I,c]=$({getStateFromWidgetMgr:T,getDefaultStateFromProto:N,getCurrStateFromProto:J,updateWidgetMgrState:M,element:t,widgetMgr:o,fragmentId:u,onFormCleared:C});O(I,i,d,r);const e=k(),m=s.useCallback(()=>{n(!1),c({value:i,fromUi:!0})},[i,c]),V=s.useCallback(()=>{r&&m(),b(!1)},[r,m]),v=s.useCallback(()=>{b(!0)},[]),F=_({formId:t.formId,maxChars:t.maxChars,setDirty:n,setUiValue:d,setValueWithSource:c}),R=q(t.formId,m,r,o,u,!0),{height:g,placeholder:z,formId:p}=t,E=x({formId:p})?o.allowFormEnterToSubmit(p):r,H=y&&W>e.breakpoints.hideWidgetDetails;return A("div",{className:"stTextArea","data-testid":"stTextArea",ref:S,children:[l(j,{label:t.label,disabled:a,labelVisibility:L((f=t.labelVisibility)==null?void 0:f.value),htmlFor:h,children:t.help&&l(P,{children:l(B,{content:t.help,placement:D.TOP_RIGHT})})}),l(G,{value:i??"",placeholder:z,onBlur:V,onFocus:v,onChange:F,onKeyDown:R,"aria-label":t.label,disabled:a,id:h,overrides:{Input:{style:{lineHeight:e.lineHeights.inputWidget,height:g?`${g}px`:"",minHeight:e.sizes.largestElementHeight,resize:"vertical","::placeholder":{opacity:"0.7"},paddingRight:e.spacing.lg,paddingLeft:e.spacing.lg,paddingBottom:e.spacing.lg,paddingTop:e.spacing.lg}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth}}}}),H&&l(K,{dirty:r,value:i??"",maxLength:t.maxChars,type:"multiline",inForm:x({formId:p}),allowEnterToSubmit:E})]})},it=s.memo(Q);export{it as default};
