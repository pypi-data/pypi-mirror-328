import{d as Ge,bq as J,r as x,bT as mt,bD as bt,br as G,bU as yt,bV as Tt,n as me,at as kt,y as Ot,aH as wt,C as Ve,j as re,R as ze,ch as Rt,bm as St,bz as Mt,bn as _t,b6 as $t,bo as Et,O as It,ci as $e}from"./index.bLZVjplR.js";import{s as Ne}from"./sprintf.D7DtBTRn.js";import{a as xt}from"./useBasicWidgetState.DNqxSbNL.js";import"./FormClearHelper.Doa6Lh7Q.js";var se={},H={},ce={},ue={},Ue;function Ie(){if(Ue)return ue;Ue=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.Direction=void 0;var e;return function(r){r.Right="to right",r.Left="to left",r.Down="to bottom",r.Up="to top"}(e||(ue.Direction=e={})),ue}var He;function Je(){return He||(He=1,function(e){var r=ce&&ce.__spreadArray||function(i,o,c){if(c||arguments.length===2)for(var f=0,y=o.length,h;f<y;f++)(h||!(f in o))&&(h||(h=Array.prototype.slice.call(o,0,f)),h[f]=o[f]);return i.concat(h||Array.prototype.slice.call(o))};Object.defineProperty(e,"__esModule",{value:!0}),e.isIOS=e.useThumbOverlap=e.assertUnreachable=e.voidFn=e.getTrackBackground=e.replaceAt=e.schd=e.translate=e.getClosestThumbIndex=e.translateThumbs=e.getPaddingAndBorder=e.getMargin=e.checkInitialOverlap=e.checkValuesAgainstBoundaries=e.checkBoundaries=e.isVertical=e.relativeValue=e.normalizeValue=e.isStepDivisible=e.isTouchEvent=e.getStepDecimals=void 0;var a=Ge(),s=Ie(),m=function(i){var o=i.toString().split(".")[1];return o?o.length:0};e.getStepDecimals=m;function M(i){return i.touches&&i.touches.length||i.changedTouches&&i.changedTouches.length}e.isTouchEvent=M;function u(i,o,c){var f=(o-i)/c,y=8,h=Number(f.toFixed(y));return parseInt(h.toString(),10)===h}e.isStepDivisible=u;function g(i,o,c,f,y,h,v){var S=1e11;if(i=Math.round(i*S)/S,!h){var P=v[o-1],I=v[o+1];if(P&&P>i)return P;if(I&&I<i)return I}if(i>f)return f;if(i<c)return c;var U=Math.floor(i*S-c*S)%Math.floor(y*S),z=Math.floor(i*S-Math.abs(U)),q=U===0?i:z/S,A=Math.abs(U/S)<y/2?q:q+y,L=(0,e.getStepDecimals)(y);return parseFloat(A.toFixed(L))}e.normalizeValue=g;function j(i,o,c){return(i-o)/(c-o)}e.relativeValue=j;function V(i){return i===s.Direction.Up||i===s.Direction.Down}e.isVertical=V;function F(i,o,c){if(o>=c)throw new RangeError("min (".concat(o,") is equal/bigger than max (").concat(c,")"));if(i<o)throw new RangeError("value (".concat(i,") is smaller than min (").concat(o,")"));if(i>c)throw new RangeError("value (".concat(i,") is bigger than max (").concat(c,")"))}e.checkBoundaries=F;function _(i,o,c){return i<o?o:i>c?c:i}e.checkValuesAgainstBoundaries=_;function T(i){if(!(i.length<2)&&!i.slice(1).every(function(o,c){return i[c]<=o}))throw new RangeError("values={[".concat(i,"]} needs to be sorted when allowOverlap={false}"))}e.checkInitialOverlap=T;function d(i){var o=window.getComputedStyle(i);return{top:parseInt(o["margin-top"],10),bottom:parseInt(o["margin-bottom"],10),left:parseInt(o["margin-left"],10),right:parseInt(o["margin-right"],10)}}e.getMargin=d;function t(i){var o=window.getComputedStyle(i);return{top:parseInt(o["padding-top"],10)+parseInt(o["border-top-width"],10),bottom:parseInt(o["padding-bottom"],10)+parseInt(o["border-bottom-width"],10),left:parseInt(o["padding-left"],10)+parseInt(o["border-left-width"],10),right:parseInt(o["padding-right"],10)+parseInt(o["border-right-width"],10)}}e.getPaddingAndBorder=t;function n(i,o,c){var f=c?-1:1;i.forEach(function(y,h){return p(y,f*o[h].x,o[h].y)})}e.translateThumbs=n;function l(i,o,c,f){for(var y=0,h=D(i[0],o,c,f),v=1;v<i.length;v++){var S=D(i[v],o,c,f);S<h&&(h=S,y=v)}return y}e.getClosestThumbIndex=l;function p(i,o,c){i.style.transform="translate(".concat(o,"px, ").concat(c,"px)")}e.translate=p;var b=function(i){var o=[],c=null,f=function(){for(var y=[],h=0;h<arguments.length;h++)y[h]=arguments[h];o=y,!c&&(c=requestAnimationFrame(function(){c=null,i.apply(void 0,o)}))};return f};e.schd=b;function k(i,o,c){var f=i.slice(0);return f[o]=c,f}e.replaceAt=k;function E(i){var o=i.values,c=i.colors,f=i.min,y=i.max,h=i.direction,v=h===void 0?s.Direction.Right:h,S=i.rtl,P=S===void 0?!1:S;P&&v===s.Direction.Right?v=s.Direction.Left:P&&s.Direction.Left&&(v=s.Direction.Right);var I=o.slice(0).sort(function(z,q){return z-q}).map(function(z){return(z-f)/(y-f)*100}),U=I.reduce(function(z,q,A){return"".concat(z,", ").concat(c[A]," ").concat(q,"%, ").concat(c[A+1]," ").concat(q,"%")},"");return"linear-gradient(".concat(v,", ").concat(c[0]," 0%").concat(U,", ").concat(c[c.length-1]," 100%)")}e.getTrackBackground=E;function O(){}e.voidFn=O;function w(i){throw new Error("Didn't expect to get here")}e.assertUnreachable=w;var $=function(i,o,c,f,y){y===void 0&&(y=function(v){return v});var h=Math.ceil(r([i],Array.from(i.children),!0).reduce(function(v,S){var P=Math.ceil(S.getBoundingClientRect().width);if(S.innerText&&S.innerText.includes(c)&&S.childElementCount===0){var I=S.cloneNode(!0);I.innerHTML=y(o.toFixed(f)),I.style.visibility="hidden",document.body.appendChild(I),P=Math.ceil(I.getBoundingClientRect().width),document.body.removeChild(I)}return P>v?P:v},i.getBoundingClientRect().width));return h},B=function(i,o,c,f,y,h,v){v===void 0&&(v=function(I){return I});var S=[],P=function(I){var U=$(c[I],f[I],y,h,v),z=o[I].x;o.forEach(function(q,A){var L=q.x,Z=$(c[A],f[A],y,h,v);I!==A&&(z>=L&&z<=L+Z||z+U>=L&&z+U<=L+Z)&&(S.includes(A)||(S.push(I),S.push(A),S=r(r([],S,!0),[I,A],!1),P(A)))})};return P(i),Array.from(new Set(S.sort()))},R=function(i,o,c,f,y,h){f===void 0&&(f=.1),y===void 0&&(y=" - "),h===void 0&&(h=function(A){return A});var v=(0,e.getStepDecimals)(f),S=(0,a.useState)({}),P=S[0],I=S[1],U=(0,a.useState)(h(o[c].toFixed(v))),z=U[0],q=U[1];return(0,a.useEffect)(function(){if(i){var A=i.getThumbs();if(A.length<1)return;var L={},Z=i.getOffsets(),ne=B(c,Z,A,o,y,v,h),le=h(o[c].toFixed(v));if(ne.length){var Q=ne.reduce(function(ee,oe,ge,pe){return ee.length?r(r([],ee,!0),[Z[pe[ge]].x],!1):[Z[pe[ge]].x]},[]);if(Math.min.apply(Math,Q)===Z[c].x){var de=[];ne.forEach(function(ee){de.push(o[ee].toFixed(v))}),le=Array.from(new Set(de.sort(function(ee,oe){return parseFloat(ee)-parseFloat(oe)}))).map(h).join(y);var fe=Math.min.apply(Math,Q),he=Math.max.apply(Math,Q),_e=A[ne[Q.indexOf(he)]].getBoundingClientRect().width;L.left="".concat(Math.abs(fe-(he+_e))/2,"px"),L.transform="translate(-50%, 0)"}else L.visibility="hidden"}q(le),I(L)}},[i,o]),[z,P]};e.useThumbOverlap=R;function D(i,o,c,f){var y=i.getBoundingClientRect(),h=y.left,v=y.top,S=y.width,P=y.height;return V(f)?Math.abs(c-(v+P/2)):Math.abs(o-(h+S/2))}var C=function(){var i,o=((i=navigator.userAgentData)===null||i===void 0?void 0:i.platform)||navigator.platform;return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(o)||navigator.userAgent.includes("Mac")&&"ontouchend"in document};e.isIOS=C}(ce)),ce}var qe;function Ct(){if(qe)return H;qe=1;var e=H&&H.__extends||function(){var _=function(T,d){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(t[l]=n[l])},_(T,d)};return function(T,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");_(T,d);function t(){this.constructor=T}T.prototype=d===null?Object.create(d):(t.prototype=d.prototype,new t)}}(),r=H&&H.__createBinding||(Object.create?function(_,T,d,t){t===void 0&&(t=d);var n=Object.getOwnPropertyDescriptor(T,d);(!n||("get"in n?!T.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return T[d]}}),Object.defineProperty(_,t,n)}:function(_,T,d,t){t===void 0&&(t=d),_[t]=T[d]}),a=H&&H.__setModuleDefault||(Object.create?function(_,T){Object.defineProperty(_,"default",{enumerable:!0,value:T})}:function(_,T){_.default=T}),s=H&&H.__importStar||function(_){if(_&&_.__esModule)return _;var T={};if(_!=null)for(var d in _)d!=="default"&&Object.prototype.hasOwnProperty.call(_,d)&&r(T,_,d);return a(T,_),T},m=H&&H.__spreadArray||function(_,T,d){if(d||arguments.length===2)for(var t=0,n=T.length,l;t<n;t++)(l||!(t in T))&&(l||(l=Array.prototype.slice.call(T,0,t)),l[t]=T[t]);return _.concat(l||Array.prototype.slice.call(T))};Object.defineProperty(H,"__esModule",{value:!0});var M=s(Ge()),u=Je(),g=Ie(),j=["ArrowRight","ArrowUp","k","PageUp"],V=["ArrowLeft","ArrowDown","j","PageDown"],F=function(_){e(T,_);function T(d){var t=_.call(this,d)||this;if(t.trackRef=M.createRef(),t.thumbRefs=[],t.state={draggedTrackPos:[-1,-1],draggedThumbIndex:-1,thumbZIndexes:new Array(t.props.values.length).fill(0).map(function(n,l){return l}),isChanged:!1,markOffsets:[]},t.getOffsets=function(){var n=t.props,l=n.direction,p=n.values,b=n.min,k=n.max,E=t.trackRef.current;if(!E)return console.warn("No track element found."),[];var O=E.getBoundingClientRect(),w=(0,u.getPaddingAndBorder)(E);return t.getThumbs().map(function($,B){var R={x:0,y:0},D=$.getBoundingClientRect(),C=(0,u.getMargin)($);switch(l){case g.Direction.Right:return R.x=(C.left+w.left)*-1,R.y=((D.height-O.height)/2+w.top)*-1,R.x+=O.width*(0,u.relativeValue)(p[B],b,k)-D.width/2,R;case g.Direction.Left:return R.x=(C.right+w.right)*-1,R.y=((D.height-O.height)/2+w.top)*-1,R.x+=O.width-O.width*(0,u.relativeValue)(p[B],b,k)-D.width/2,R;case g.Direction.Up:return R.x=((D.width-O.width)/2+C.left+w.left)*-1,R.y=-w.left,R.y+=O.height-O.height*(0,u.relativeValue)(p[B],b,k)-D.height/2,R;case g.Direction.Down:return R.x=((D.width-O.width)/2+C.left+w.left)*-1,R.y=-w.left,R.y+=O.height*(0,u.relativeValue)(p[B],b,k)-D.height/2,R;default:return(0,u.assertUnreachable)(l)}})},t.getThumbs=function(){return t.trackRef&&t.trackRef.current?Array.from(t.trackRef.current.children).filter(function(n){return n.hasAttribute("aria-valuenow")}):(console.warn("No thumbs found in the track container. Did you forget to pass & spread the `props` param in renderTrack?"),[])},t.getTargetIndex=function(n){return t.getThumbs().findIndex(function(l){return l===n.target||l.contains(n.target)})},t.addTouchEvents=function(n){document.addEventListener("touchmove",t.schdOnTouchMove,{passive:!1}),document.addEventListener("touchend",t.schdOnEnd,{passive:!1}),document.addEventListener("touchcancel",t.schdOnEnd,{passive:!1})},t.addMouseEvents=function(n){document.addEventListener("mousemove",t.schdOnMouseMove),document.addEventListener("mouseup",t.schdOnEnd)},t.onMouseDownTrack=function(n){var l;if(!(n.button!==0||(0,u.isIOS)()))if(n.persist(),n.preventDefault(),t.addMouseEvents(n.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(b){var k;return(k=b.current)===null||k===void 0?void 0:k.contains(n.target)}))return;t.setState({draggedTrackPos:[n.clientX,n.clientY]},function(){return t.onMove(n.clientX,n.clientY)})}else{var p=(0,u.getClosestThumbIndex)(t.thumbRefs.map(function(b){return b.current}),n.clientX,n.clientY,t.props.direction);(l=t.thumbRefs[p].current)===null||l===void 0||l.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(n.clientX,n.clientY)})}},t.onResize=function(){(0,u.translateThumbs)(t.getThumbs(),t.getOffsets(),t.props.rtl),t.calculateMarkOffsets()},t.onTouchStartTrack=function(n){var l;if(n.persist(),t.addTouchEvents(n.nativeEvent),t.props.values.length>1&&t.props.draggableTrack){if(t.thumbRefs.some(function(b){var k;return(k=b.current)===null||k===void 0?void 0:k.contains(n.target)}))return;t.setState({draggedTrackPos:[n.touches[0].clientX,n.touches[0].clientY]},function(){return t.onMove(n.touches[0].clientX,n.touches[0].clientY)})}else{var p=(0,u.getClosestThumbIndex)(t.thumbRefs.map(function(b){return b.current}),n.touches[0].clientX,n.touches[0].clientY,t.props.direction);(l=t.thumbRefs[p].current)===null||l===void 0||l.focus(),t.setState({draggedThumbIndex:p},function(){return t.onMove(n.touches[0].clientX,n.touches[0].clientY)})}},t.onMouseOrTouchStart=function(n){if(!t.props.disabled){var l=(0,u.isTouchEvent)(n);if(!(!l&&n.button!==0)){var p=t.getTargetIndex(n);p!==-1&&(l?t.addTouchEvents(n):t.addMouseEvents(n),t.setState({draggedThumbIndex:p,thumbZIndexes:t.state.thumbZIndexes.map(function(b,k){return k===p?Math.max.apply(Math,t.state.thumbZIndexes):b<=t.state.thumbZIndexes[p]?b:b-1})}))}}},t.onMouseMove=function(n){n.preventDefault(),t.onMove(n.clientX,n.clientY)},t.onTouchMove=function(n){n.preventDefault(),t.onMove(n.touches[0].clientX,n.touches[0].clientY)},t.onKeyDown=function(n){var l=t.props,p=l.values,b=l.onChange,k=l.step,E=l.rtl,O=l.direction,w=t.state.isChanged,$=t.getTargetIndex(n.nativeEvent),B=E||O===g.Direction.Left||O===g.Direction.Down?-1:1;$!==-1&&(j.includes(n.key)?(n.preventDefault(),t.setState({draggedThumbIndex:$,isChanged:!0}),b((0,u.replaceAt)(p,$,t.normalizeValue(p[$]+B*(n.key==="PageUp"?k*10:k),$)))):V.includes(n.key)?(n.preventDefault(),t.setState({draggedThumbIndex:$,isChanged:!0}),b((0,u.replaceAt)(p,$,t.normalizeValue(p[$]-B*(n.key==="PageDown"?k*10:k),$)))):n.key==="Tab"?t.setState({draggedThumbIndex:-1},function(){w&&t.fireOnFinalChange()}):w&&t.fireOnFinalChange())},t.onKeyUp=function(n){var l=t.state.isChanged;t.setState({draggedThumbIndex:-1},function(){l&&t.fireOnFinalChange()})},t.onMove=function(n,l){var p=t.state,b=p.draggedThumbIndex,k=p.draggedTrackPos,E=t.props,O=E.direction,w=E.min,$=E.max,B=E.onChange,R=E.values,D=E.step,C=E.rtl;if(b===-1&&k[0]===-1&&k[1]===-1)return null;var i=t.trackRef.current;if(!i)return null;var o=i.getBoundingClientRect(),c=(0,u.isVertical)(O)?o.height:o.width;if(k[0]!==-1&&k[1]!==-1){var f=n-k[0],y=l-k[1],h=0;switch(O){case g.Direction.Right:case g.Direction.Left:h=f/c*($-w);break;case g.Direction.Down:case g.Direction.Up:h=y/c*($-w);break;default:(0,u.assertUnreachable)(O)}if(C&&(h*=-1),Math.abs(h)>=D/2){for(var v=0;v<t.thumbRefs.length;v++){if(R[v]===$&&Math.sign(h)===1||R[v]===w&&Math.sign(h)===-1)return;var S=R[v]+h;S>$?h=$-R[v]:S<w&&(h=w-R[v])}for(var P=R.slice(0),v=0;v<t.thumbRefs.length;v++)P=(0,u.replaceAt)(P,v,t.normalizeValue(R[v]+h,v));t.setState({draggedTrackPos:[n,l]}),B(P)}}else{var I=0;switch(O){case g.Direction.Right:I=(n-o.left)/c*($-w)+w;break;case g.Direction.Left:I=(c-(n-o.left))/c*($-w)+w;break;case g.Direction.Down:I=(l-o.top)/c*($-w)+w;break;case g.Direction.Up:I=(c-(l-o.top))/c*($-w)+w;break;default:(0,u.assertUnreachable)(O)}C&&(I=$+w-I),Math.abs(R[b]-I)>=D/2&&B((0,u.replaceAt)(R,b,t.normalizeValue(I,b)))}},t.normalizeValue=function(n,l){var p=t.props,b=p.min,k=p.max,E=p.step,O=p.allowOverlap,w=p.values;return(0,u.normalizeValue)(n,l,b,k,E,O,w)},t.onEnd=function(n){if(n.preventDefault(),document.removeEventListener("mousemove",t.schdOnMouseMove),document.removeEventListener("touchmove",t.schdOnTouchMove),document.removeEventListener("mouseup",t.schdOnEnd),document.removeEventListener("touchend",t.schdOnEnd),document.removeEventListener("touchcancel",t.schdOnEnd),t.state.draggedThumbIndex===-1&&t.state.draggedTrackPos[0]===-1&&t.state.draggedTrackPos[1]===-1)return null;t.setState({draggedThumbIndex:-1,draggedTrackPos:[-1,-1]},function(){t.fireOnFinalChange()})},t.fireOnFinalChange=function(){t.setState({isChanged:!1});var n=t.props,l=n.onFinalChange,p=n.values;l&&l(p)},t.updateMarkRefs=function(n){if(!n.renderMark){t.numOfMarks=void 0,t.markRefs=void 0;return}t.numOfMarks=(n.max-n.min)/t.props.step,t.markRefs=[];for(var l=0;l<t.numOfMarks+1;l++)t.markRefs[l]=M.createRef()},t.calculateMarkOffsets=function(){if(!(!t.props.renderMark||!t.trackRef||!t.numOfMarks||!t.markRefs||t.trackRef.current===null)){for(var n=window.getComputedStyle(t.trackRef.current),l=parseInt(n.width,10),p=parseInt(n.height,10),b=parseInt(n.paddingLeft,10),k=parseInt(n.paddingTop,10),E=[],O=0;O<t.numOfMarks+1;O++){var w=9999,$=9999;if(t.markRefs[O].current){var B=t.markRefs[O].current.getBoundingClientRect();w=B.height,$=B.width}t.props.direction===g.Direction.Left||t.props.direction===g.Direction.Right?E.push([Math.round(l/t.numOfMarks*O+b-$/2),-Math.round((w-p)/2)]):E.push([Math.round(p/t.numOfMarks*O+k-w/2),-Math.round(($-l)/2)])}t.setState({markOffsets:E})}},d.step===0)throw new Error('"step" property should be a positive number');return t.schdOnMouseMove=(0,u.schd)(t.onMouseMove),t.schdOnTouchMove=(0,u.schd)(t.onTouchMove),t.schdOnEnd=(0,u.schd)(t.onEnd),t.thumbRefs=d.values.map(function(){return M.createRef()}),t.updateMarkRefs(d),t}return T.prototype.componentDidMount=function(){var d=this,t=this.props,n=t.values,l=t.min,p=t.step;this.resizeObserver=window.ResizeObserver?new window.ResizeObserver(this.onResize):{observe:function(){return window.addEventListener("resize",d.onResize)},unobserve:function(){return window.removeEventListener("resize",d.onResize)}},document.addEventListener("touchstart",this.onMouseOrTouchStart,{passive:!1}),document.addEventListener("mousedown",this.onMouseOrTouchStart,{passive:!1}),!this.props.allowOverlap&&(0,u.checkInitialOverlap)(this.props.values),this.props.values.forEach(function(b){return(0,u.checkBoundaries)(b,d.props.min,d.props.max)}),this.resizeObserver.observe(this.trackRef.current),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),this.props.rtl),this.calculateMarkOffsets(),n.forEach(function(b){(0,u.isStepDivisible)(l,b,p)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")})},T.prototype.componentDidUpdate=function(d,t){var n=this.props,l=n.max,p=n.min,b=n.step,k=n.values,E=n.rtl;(d.max!==l||d.min!==p||d.step!==b)&&this.updateMarkRefs(this.props),(0,u.translateThumbs)(this.getThumbs(),this.getOffsets(),E),(d.max!==l||d.min!==p||d.step!==b||t.markOffsets.length!==this.state.markOffsets.length)&&(this.calculateMarkOffsets(),k.forEach(function(O){(0,u.isStepDivisible)(p,O,b)||console.warn("The `values` property is in conflict with the current `step`, `min`, and `max` properties. Please provide values that are accessible using the min, max, and step values.")}))},T.prototype.componentWillUnmount=function(){var d={passive:!1};document.removeEventListener("mousedown",this.onMouseOrTouchStart,d),document.removeEventListener("mousemove",this.schdOnMouseMove),document.removeEventListener("touchmove",this.schdOnTouchMove),document.removeEventListener("touchstart",this.onMouseOrTouchStart),document.removeEventListener("mouseup",this.schdOnEnd),document.removeEventListener("touchend",this.schdOnEnd),this.resizeObserver.unobserve(this.trackRef.current)},T.prototype.render=function(){var d=this,t=this.props,n=t.label,l=t.labelledBy,p=t.renderTrack,b=t.renderThumb,k=t.renderMark,E=k===void 0?function(){return null}:k,O=t.values,w=t.min,$=t.max,B=t.allowOverlap,R=t.disabled,D=this.state,C=D.draggedThumbIndex,i=D.thumbZIndexes,o=D.markOffsets;return p({props:{style:{transform:"scale(1)",cursor:C>-1?"grabbing":this.props.draggableTrack?(0,u.isVertical)(this.props.direction)?"ns-resize":"ew-resize":O.length===1&&!R?"pointer":"inherit"},onMouseDown:R?u.voidFn:this.onMouseDownTrack,onTouchStart:R?u.voidFn:this.onTouchStartTrack,ref:this.trackRef},isDragged:this.state.draggedThumbIndex>-1,disabled:R,children:m(m([],o.map(function(c,f,y){return E({props:{style:d.props.direction===g.Direction.Left||d.props.direction===g.Direction.Right?{position:"absolute",left:"".concat(c[0],"px"),marginTop:"".concat(c[1],"px")}:{position:"absolute",top:"".concat(c[0],"px"),marginLeft:"".concat(c[1],"px")},key:"mark".concat(f),ref:d.markRefs[f]},index:f})}),!0),O.map(function(c,f){var y=d.state.draggedThumbIndex===f;return b({index:f,value:c,isDragged:y,props:{style:{position:"absolute",zIndex:i[f],cursor:R?"inherit":y?"grabbing":"grab",userSelect:"none",touchAction:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},key:f,tabIndex:R?void 0:0,"aria-valuemax":B?$:O[f+1]||$,"aria-valuemin":B?w:O[f-1]||w,"aria-valuenow":c,draggable:!1,ref:d.thumbRefs[f],"aria-label":n,"aria-labelledby":l,role:"slider",onKeyDown:R?u.voidFn:d.onKeyDown,onKeyUp:R?u.voidFn:d.onKeyUp}})}),!0)})},T.defaultProps={label:"Accessibility label",labelledBy:null,step:1,direction:g.Direction.Right,rtl:!1,disabled:!1,allowOverlap:!1,draggableTrack:!1,min:0,max:100},T}(M.Component);return H.default=F,H}var We;function Dt(){return We||(We=1,function(e){var r=se&&se.__importDefault||function(M){return M&&M.__esModule?M:{default:M}};Object.defineProperty(e,"__esModule",{value:!0}),e.checkValuesAgainstBoundaries=e.relativeValue=e.useThumbOverlap=e.Direction=e.getTrackBackground=e.Range=void 0;var a=r(Ct());e.Range=a.default;var s=Je();Object.defineProperty(e,"getTrackBackground",{enumerable:!0,get:function(){return s.getTrackBackground}}),Object.defineProperty(e,"useThumbOverlap",{enumerable:!0,get:function(){return s.useThumbOverlap}}),Object.defineProperty(e,"relativeValue",{enumerable:!0,get:function(){return s.relativeValue}}),Object.defineProperty(e,"checkValuesAgainstBoundaries",{enumerable:!0,get:function(){return s.checkValuesAgainstBoundaries}});var m=Ie();Object.defineProperty(e,"Direction",{enumerable:!0,get:function(){return m.Direction}})}(se)),se}var Qe=Dt();function Ke(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),a.push.apply(a,s)}return a}function ve(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ke(Object(a),!0).forEach(function(s){Pt(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ke(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function Pt(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}var be=J("div",{position:"relative",width:"100%"});be.displayName="Root";be.displayName="Root";be.displayName="StyledRoot";var ye=J("div",function(e){var r=e.$theme,a=e.$value,s=a===void 0?[]:a,m=e.$disabled,M=e.$isDragged,u=r.sizing,g="inherit";return m?g="not-allowed":M?g="grabbing":s.length===1&&(g="pointer"),{paddingTop:u.scale600,paddingBottom:u.scale600,paddingRight:u.scale600,paddingLeft:u.scale600,display:"flex",cursor:g,backgroundColor:r.colors.sliderTrackFill}});ye.displayName="Track";ye.displayName="Track";ye.displayName="StyledTrack";var Te=J("div",function(e){var r=e.$theme,a=e.$value,s=a===void 0?[]:a,m=e.$min,M=e.$max,u=e.$disabled,g=r.colors,j=r.borders,V=r.direction,F=r.borders.useRoundedCorners?j.radius100:0;return{borderTopLeftRadius:F,borderTopRightRadius:F,borderBottomRightRadius:F,borderBottomLeftRadius:F,background:Qe.getTrackBackground({values:s,colors:s.length===1?[u?g.borderOpaque:g.primary,u?g.backgroundSecondary:g.borderOpaque]:[u?g.backgroundSecondary:g.borderOpaque,u?g.borderOpaque:g.primary,u?g.backgroundSecondary:g.borderOpaque],min:m||0,max:M||0,rtl:V==="rtl"}),height:"2px",width:"100%",alignSelf:"center",cursor:u?"not-allowed":"inherit"}});Te.displayName="InnerTrack";Te.displayName="InnerTrack";Te.displayName="StyledInnerTrack";var ke=J("div",function(e){return{width:"4px",height:"2px",backgroundColor:e.$theme.colors.backgroundPrimary,marginLeft:"16px"}});ke.displayName="Mark";ke.displayName="Mark";ke.displayName="StyledMark";var Oe=J("div",function(e){return ve(ve({},e.$theme.typography.font200),{},{color:e.$theme.colors.contentPrimary})});Oe.displayName="Tick";Oe.displayName="Tick";Oe.displayName="StyledTick";var we=J("div",function(e){var r=e.$theme,a=r.sizing;return{display:"flex",justifyContent:"space-between",alignItems:"center",paddingRight:a.scale600,paddingLeft:a.scale600,paddingBottom:a.scale400}});we.displayName="TickBar";we.displayName="TickBar";we.displayName="StyledTickBar";var Re=J("div",function(e){var r=e.$theme,a=e.$value,s=a===void 0?[]:a,m=e.$thumbIndex,M=e.$disabled,u=s.length===2&&m===0,g=s.length===2&&m===1;return r.direction==="rtl"&&(g||u)&&(u=!u,g=!g),{height:"24px",width:"24px",borderTopLeftRadius:"24px",borderTopRightRadius:"24px",borderBottomLeftRadius:"24px",borderBottomRightRadius:"24px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:M?r.colors.sliderHandleFillDisabled:r.colors.sliderHandleFill,outline:"none",boxShadow:e.$isFocusVisible?"0 0 0 3px ".concat(r.colors.accent):"0 1px 4px rgba(0, 0, 0, 0.12)",cursor:M?"not-allowed":"inherit"}});Re.displayName="Thumb";Re.displayName="Thumb";Re.displayName="StyledThumb";var Se=J("div",function(e){var r=e.$disabled,a=e.$theme;return{position:"absolute",top:"-16px",width:"4px",height:"20px",backgroundColor:r?a.colors.sliderHandleFillDisabled:a.colors.sliderHandleInnerFill}});Se.displayName="InnerThumb";Se.displayName="InnerThumb";Se.displayName="StyledInnerThumb";var Me=J("div",function(e){var r=e.$disabled,a=e.$theme;return ve(ve({position:"absolute",top:"-".concat(a.sizing.scale1400)},a.typography.font200),{},{backgroundColor:r?a.colors.sliderHandleFillDisabled:a.colors.sliderHandleInnerFill,color:a.colors.contentInversePrimary,paddingLeft:a.sizing.scale600,paddingRight:a.sizing.scale600,paddingTop:a.sizing.scale500,paddingBottom:a.sizing.scale500,borderBottomLeftRadius:"48px",borderBottomRightRadius:"48px",borderTopLeftRadius:"48px",borderTopRightRadius:"48px",whiteSpace:"nowrap"})});Me.displayName="ThumbValue";Me.displayName="ThumbValue";Me.displayName="StyledThumbValue";function Ye(e,r){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),a.push.apply(a,s)}return a}function Bt(e){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?Ye(Object(a),!0).forEach(function(s){At(e,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ye(Object(a)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(a,s))})}return e}function At(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},Y.apply(this,arguments)}function K(e,r){return Vt(e)||jt(e,r)||Ft(e,r)||Lt()}function Lt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ft(e,r){if(e){if(typeof e=="string")return Xe(e,r);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Xe(e,r)}}function Xe(e,r){(r==null||r>e.length)&&(r=e.length);for(var a=0,s=new Array(r);a<r;a++)s[a]=e[a];return s}function jt(e,r){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var s=[],m=!0,M=!1,u,g;try{for(a=a.call(e);!(m=(u=a.next()).done)&&(s.push(u.value),!(r&&s.length===r));m=!0);}catch(j){M=!0,g=j}finally{try{!m&&a.return!=null&&a.return()}finally{if(M)throw g}}return s}}function Vt(e){if(Array.isArray(e))return e}var zt=function(r){if(r.length>2||r.length===0)throw new Error("the value prop represents positions of thumbs, so its length can be only one or two");return r};function Nt(e){var r=e.overrides,a=r===void 0?{}:r,s=e.disabled,m=s===void 0?!1:s,M=e.marks,u=M===void 0?!1:M,g=e.onChange,j=g===void 0?function(){}:g,V=e.onFinalChange,F=V===void 0?function(){}:V,_=e.min,T=_===void 0?0:_,d=e.max,t=d===void 0?100:d,n=e.step,l=n===void 0?1:n,p=e.persistentThumb,b=p===void 0?!1:p,k=e.valueToLabel,E=k===void 0?function(X){return X}:k,O=e.value,w=x.useContext(mt),$=x.useState(!1),B=K($,2),R=B[0],D=B[1],C=x.useState(!1),i=K(C,2),o=i[0],c=i[1],f=x.useState(!1),y=K(f,2),h=y[0],v=y[1],S=x.useState(-1),P=K(S,2),I=P[0],U=P[1],z=x.useCallback(function(X){bt(X)&&v(!0);var N=X.target.parentNode.firstChild===X.target?0:1;U(N)},[]),q=x.useCallback(function(X){h!==!1&&v(!1),U(-1)},[]),A=zt(O),L={$disabled:m,$step:l,$min:T,$max:t,$marks:u,$value:A,$isFocusVisible:h},Z=G(a.Root,be),ne=K(Z,2),le=ne[0],Q=ne[1],de=G(a.Track,ye),fe=K(de,2),he=fe[0],_e=fe[1],ee=G(a.InnerTrack,Te),oe=K(ee,2),ge=oe[0],pe=oe[1],et=G(a.Thumb,Re),xe=K(et,2),tt=xe[0],rt=xe[1],nt=G(a.InnerThumb,Se),Ce=K(nt,2),at=Ce[0],it=Ce[1],ot=G(a.ThumbValue,Me),De=K(ot,2),st=De[0],ct=De[1],ut=G(a.Tick,Oe),Pe=K(ut,2),Be=Pe[0],Ae=Pe[1],lt=G(a.TickBar,we),Le=K(lt,2),dt=Le[0],ft=Le[1],ht=G(a.Mark,ke),Fe=K(ht,2),gt=Fe[0],pt=Fe[1];return x.createElement(le,Y({"data-baseweb":"slider"},L,Q,{onFocus:Tt(Q,z),onBlur:yt(Q,q)}),x.createElement(Qe.Range,Y({step:l,min:T,max:t,values:A,disabled:m,onChange:function(N){return j({value:N})},onFinalChange:function(N){return F({value:N})},rtl:w.direction==="rtl",renderTrack:function(N){var te=N.props,W=N.children,ae=N.isDragged;return x.createElement(he,Y({onMouseDown:te.onMouseDown,onTouchStart:te.onTouchStart,$isDragged:ae},L,_e),x.createElement(ge,Y({$isDragged:ae,ref:te.ref},L,pe),W))},renderThumb:function(N){var te=N.props,W=N.index,ae=N.isDragged,je=b||(!!W&&o||!W&&R||ae)&&!m;return x.createElement(tt,Y({},te,{onMouseEnter:function(){W===0?D(!0):c(!0)},onMouseLeave:function(){W===0?D(!1):c(!1)},$thumbIndex:W,$isDragged:ae,style:Bt({},te.style)},L,rt,{$isFocusVisible:h&&I===W}),je&&x.createElement(st,Y({$thumbIndex:W,$isDragged:ae},L,ct),E(A[W])),je&&x.createElement(at,Y({$thumbIndex:W,$isDragged:ae},L,it)))}},u?{renderMark:function(N){var te=N.props,W=N.index;return x.createElement(gt,Y({$markIndex:W},te,L,pt))}}:{})),x.createElement(dt,Y({},L,ft),x.createElement(Be,Y({},L,Ae),E(T)),x.createElement(Be,Y({},L,Ae),E(t))))}const Ut=me("div",{target:"e8lt0n70"})(({disabled:e,theme:r})=>({alignItems:"center",backgroundColor:e?r.colors.gray:r.colors.primary,borderTopLeftRadius:"100%",borderTopRightRadius:"100%",borderBottomLeftRadius:"100%",borderBottomRightRadius:"100%",borderTopStyle:"none",borderBottomStyle:"none",borderRightStyle:"none",borderLeftStyle:"none",boxShadow:"none",display:"flex",justifyContent:"center",height:r.sizes.sliderThumb,width:r.sizes.sliderThumb,":focus":{outline:"none"},":focus-visible":{boxShadow:`0 0 0 0.2rem ${kt(r.colors.primary,.5)}`}})),Ht=me("div",{target:"e8lt0n71"})(({disabled:e,theme:r})=>({fontFamily:r.genericFonts.codeFont,fontSize:r.fontSizes.sm,color:e?r.colors.gray:r.colors.primary,top:"-1.6em",position:"absolute",whiteSpace:"nowrap",backgroundColor:r.colors.transparent,lineHeight:r.lineHeights.base,fontWeight:r.fontWeights.normal,pointerEvents:"none"})),qt=me("div",{target:"e8lt0n72"})(({theme:e})=>({fontSize:e.fontSizes.sm,paddingBottom:e.spacing.none,paddingLeft:e.spacing.none,paddingRight:e.spacing.none,paddingTop:"0.65em",justifyContent:"space-between",alignItems:"center",display:"flex"})),Ze=me("div",{target:"e8lt0n73"})(({disabled:e,theme:r})=>({lineHeight:r.lineHeights.base,fontWeight:r.fontWeights.normal,fontFamily:r.genericFonts.codeFont,color:e?r.colors.fadedText40:"inherit"})),Wt=200;function Kt({disabled:e,element:r,widgetMgr:a,width:s,fragmentId:m}){var D;const[M,u]=xt({getStateFromWidgetMgr:Yt,getDefaultStateFromProto:Xt,getCurrStateFromProto:Zt,updateWidgetMgrState:Gt,element:r,widgetMgr:a,fragmentId:m}),[g,j]=x.useState(M),V=x.useRef(null),[F]=x.useState([]),[_]=x.useState([]),{colors:T,fonts:d,fontSizes:t,spacing:n}=Ot(),l={width:s},p=g.map(C=>Ee(C,r)),b=Ee(r.min,r),k=Ee(r.max,r),E=r.label;x.useEffect(()=>{j(M)},[M]);const O=x.useCallback(wt(Wt,C=>{u({value:C,fromUi:!0})}),[]),w=x.useCallback(({value:C})=>{j(C),O(C)},[O]),$=x.useCallback(()=>Ve(qt,{"data-testid":"stSliderTickBar",children:[re(Ze,{disabled:e,"data-testid":"stSliderTickBarMin",children:b}),re(Ze,{disabled:e,"data-testid":"stSliderTickBarMax",children:k})]}),[b,k,e]),B=x.useCallback(ze.forwardRef(function(i,o){const{$thumbIndex:c}=i,f=c||0;F[f]=o,_[f]||(_[f]=ze.createRef());const y=Rt(i,["role","style","aria-valuemax","aria-valuemin","aria-valuenow","tabIndex","onKeyUp","onKeyDown","onMouseEnter","onMouseLeave","draggable"]),h=p[f];return re(Ut,{...y,disabled:i.$disabled===!0,ref:F[f],"aria-valuetext":h,"aria-label":E,children:re(Ht,{"data-testid":"stSliderThumbValue",disabled:i.$disabled===!0,ref:_[f],children:h})})}),[]);x.useEffect(()=>{var y,h;_.map((v,S)=>{v.current&&(v.current.innerText=p[S])}),F.map((v,S)=>{v.current&&v.current.setAttribute("aria-valuetext",p[S])});const C=V.current??null,i=F[0].current,o=(y=F[1])==null?void 0:y.current,c=_[0].current,f=(h=_[1])==null?void 0:h.current;er(C,i,o,c,f)});const R=x.useCallback(({$disabled:C})=>({height:n.twoXS,...C?{background:T.darkenedBgMix25}:{}}),[T,n]);return Ve("div",{ref:V,className:"stSlider","data-testid":"stSlider",style:l,children:[re(Et,{label:r.label,disabled:e,labelVisibility:St((D=r.labelVisibility)==null?void 0:D.value),children:r.help&&re(Mt,{children:re(_t,{content:r.help,placement:$t.TOP_RIGHT})})}),re(Nt,{min:r.min,max:r.max,step:r.step,value:Qt(g,r),onChange:w,disabled:e,overrides:{Thumb:B,Tick:{style:{fontFamily:d.monospace}},Track:{style:{backgroundColor:"none !important",paddingBottom:n.none,paddingLeft:n.none,paddingRight:n.none,paddingTop:`calc(${t.sm} * 1.35)`}},InnerTrack:{style:R},TickBar:$}})]})}function Yt(e,r){return e.getDoubleArrayValue(r)}function Xt(e){return e.default}function Zt(e){return e.value}function Gt(e,r,a,s){r.setDoubleArrayValue(e,a.value,{fromUi:a.fromUi},s)}function Jt(e){const{dataType:r}=e;return r===$e.DataType.DATETIME||r===$e.DataType.DATE||r===$e.DataType.TIME}function Ee(e,r){const{format:a,options:s}=r;return Jt(r)?It.utc(e/1e3).format(a):s.length>0?Ne.sprintf(a,s[e]):Ne.sprintf(a,e)}function Qt(e,r){const{min:a,max:s}=r;let m=e[0],M=e.length>1?e[1]:e[0];return m>M&&(m=M),m<a&&(m=a),m>s&&(m=s),M<a&&(M=a),M>s&&(M=s),e.length>1?[m,M]:[m]}function er(e,r,a,s,m){!e||!r||!s||(ie(e,r,s),a&&m&&(ie(e,a,m),tr(e,r,a,s,m)))}function ie(e,r,a){const s=e.getBoundingClientRect(),m=r.getBoundingClientRect(),M=a.getBoundingClientRect(),u=m.left+m.width/2,g=u-M.width/2<s.left,j=u+M.width/2>s.right;a.style.left=g?"0":"",a.style.right=j?"0":""}function tr(e,r,a,s,m){const u=e.getBoundingClientRect(),g=r.getBoundingClientRect(),j=a.getBoundingClientRect(),V=s.getBoundingClientRect(),F=m.getBoundingClientRect(),_=u.left+u.width/2,T=g.left+g.width/2,d=j.left+j.width/2,t=T-V.width/2>=u.left,n=d+F.width/2<=u.right,l=g.left-V.width>=u.left,p=j.right+F.width<=u.right,b=t?V.width/2:V.width,k=n?F.width/2:F.width,E=T+b;if(d-k-E>24){ie(e,r,s),ie(e,a,m);return}if(l&&p){s.style.left="",s.style.right=`${Math.round(g.width)}px`,m.style.left=`${Math.round(j.width)}px`,m.style.right="";return}T<_?(ie(e,r,s),m.style.left=`${Math.round(T+b+24-d)}px`,m.style.right=""):(ie(e,a,m),s.style.left="",s.style.right=`${-Math.round(d-k-24-T)}px`)}const or=x.memo(Kt);export{or as default};
