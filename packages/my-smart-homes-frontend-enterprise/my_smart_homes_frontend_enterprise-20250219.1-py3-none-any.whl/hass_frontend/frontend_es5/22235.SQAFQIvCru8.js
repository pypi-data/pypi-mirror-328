"use strict";(self.webpackChunkhome_assistant_frontend_enterprise=self.webpackChunkhome_assistant_frontend_enterprise||[]).push([[22235],{32689:function(n,e,t){t.d(e,{CZ:function(){return m},Wx:function(){return f},XH:function(){return l},db:function(){return v},gW:function(){return _},lB:function(){return y}});var i=t(64782),r=t(41981),o=(t(81027),t(13025),t(82386),t(95737),t(97741),t(89655),t(46469),t(29193),t(26098),t(39790),t(74268),t(24545),t(51855),t(82130),t(31743),t(22328),t(4959),t(62435),t(36604),t(99019),t(253),t(5186),t(2075),t(54846),t(16891),t(37679),t(4525),t(66555),t(96858),t(21863)),s=t(82291),u=t(26175),a=t(9883);function c(n,e){var t;if((0,u.n)(e)&&n.states[e])return null===(t=n.states[e])||void 0===t?void 0:t.state}function d(n,e){var t,i=n.entity&&e.states[n.entity]?e.states[n.entity].state:a.Hh,s=null!==(t=n.state)&&void 0!==t?t:n.state_not;if(Array.isArray(s)){var u=s.map((function(n){return c(e,n)})).filter((function(n){return void 0!==n}));s=[].concat((0,r.A)(s),(0,r.A)(u))}else if("string"==typeof s){var d=c(e,s);s=[s],d&&s.push(d)}return null!=n.state?(0,o.e)(s).includes(i):!(0,o.e)(s).includes(i)}function l(n,e){return n.every((function(n){if("condition"in n)switch(n.condition){case"screen":return!!(t=n).media_query&&matchMedia(t.media_query).matches;case"user":return function(n,e){var t;return!(!n.users||null===(t=e.user)||void 0===t||!t.id)&&n.users.includes(e.user.id)}(n,e);case"numeric_state":return function(n,e){var t,i,r,o=null===(t=n.entity?e.states[n.entity]:void 0)||void 0===t?void 0:t.state,s=n.above,u=n.below;"string"==typeof s&&(s=null!==(i=c(e,s))&&void 0!==i?i:s),"string"==typeof u&&(u=null!==(r=c(e,u))&&void 0!==r?r:u);var a=Number(o),d=Number(s),l=Number(u);return!isNaN(a)&&(null==n.above||isNaN(d)||d<a)&&(null==n.below||isNaN(l)||l>a)}(n,e);case"and":return function(n,e){return!n.conditions||l(n.conditions,e)}(n,e);case"or":return function(n,e){return!n.conditions||n.conditions.some((function(n){return l([n],e)}))}(n,e);default:return d(n,e)}var t;return d(n,e)}))}function f(n){var e,t=new Set,s=(0,i.A)(n);try{for(s.s();!(e=s.n()).done;){var a=e.value;if("numeric_state"===a.condition)"string"==typeof a.above&&(0,u.n)(a.above)&&t.add(a.above),"string"==typeof a.below&&(0,u.n)(a.below)&&t.add(a.below);else if("state"===a.condition){var c,d;[].concat((0,r.A)(null!==(c=(0,o.e)(a.state))&&void 0!==c?c:[]),(0,r.A)(null!==(d=(0,o.e)(a.state_not))&&void 0!==d?d:[])).forEach((function(n){n&&(0,u.n)(n)&&t.add(n)}))}else if("conditions"in a&&a.conditions)return new Set([].concat((0,r.A)(t),(0,r.A)(f(a.conditions))))}}catch(l){s.e(l)}finally{s.f()}return t}function h(n){return null!=n.entity&&(null!=n.state||null!=n.state_not)}function v(n){return n.every((function(n){if("condition"in n)switch(n.condition){case"screen":return null!=n.media_query;case"user":return function(n){return null!=n.users}(n);case"numeric_state":return function(n){return null!=n.entity&&(null!=n.above||null!=n.below)}(n);case"and":case"or":return function(n){return null!=n.conditions}(n);default:return h(n)}return h(n)}))}function y(n,e){return"conditions"in n&&n.conditions?Object.assign(Object.assign({},n),{},{conditions:n.conditions.map((function(n){return y(n,e)}))}):"state"===n.condition||"numeric_state"===n.condition?Object.assign(Object.assign({},n),{},{entity:e}):n}function _(n){return n.reduce((function(n,e){return"conditions"in e&&e.conditions&&n.push.apply(n,(0,r.A)(_(e.conditions))),"screen"===e.condition&&e.media_query&&n.push(e.media_query),n}),[])}function m(n,e){return _(n).map((function(n){return(0,s.m)(n,(function(n){e(n)}))}))}},66651:function(n,e,t){t.d(e,{E:function(){return h}});var i=t(35806),r=t(71008),o=t(62193),s=t(2816),u=t(27927),a=t(35890),c=(t(71522),t(71499),t(81027),t(13025),t(39790),t(253),t(2075),t(54846),t(66555),t(15112)),d=t(29818),l=t(16569),f=t(32689),h=(0,u.A)([(0,d.EM)("hui-conditional-base")],(function(n,e){var t=function(e){function t(){var e;(0,r.A)(this,t);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return e=(0,o.A)(this,t,[].concat(s)),n(e),e}return(0,s.A)(t,e),(0,i.A)(t)}(e);return{F:t,d:[{kind:"field",decorators:[(0,d.MZ)({attribute:!1})],key:"hass",value:void 0},{kind:"field",decorators:[(0,d.MZ)({type:Boolean})],key:"preview",value:function(){return!1}},{kind:"field",decorators:[(0,d.wk)()],key:"_config",value:void 0},{kind:"field",key:"_element",value:void 0},{kind:"field",key:"_listeners",value:function(){return[]}},{kind:"field",key:"_mediaQueries",value:function(){return[]}},{kind:"method",key:"createRenderRoot",value:function(){return this}},{kind:"method",key:"validateConfig",value:function(n){if(!n.conditions)throw new Error("No conditions configured");if(!Array.isArray(n.conditions))throw new Error("Conditions need to be an array");if(!(0,f.db)(n.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=n}},{kind:"method",key:"disconnectedCallback",value:function(){(0,a.A)(t,"disconnectedCallback",this,3)([]),this._clearMediaQueries()}},{kind:"method",key:"connectedCallback",value:function(){(0,a.A)(t,"connectedCallback",this,3)([]),this._listenMediaQueries(),this._updateVisibility()}},{kind:"method",key:"_clearMediaQueries",value:function(){this._listeners.forEach((function(n){return n()})),this._listeners=[]}},{kind:"method",key:"_listenMediaQueries",value:function(){var n=this;if(this._config&&this.hass){var e=this._config.conditions.filter((function(n){return"condition"in n})),t=(0,f.gW)(e);if(!(0,l.b)(t,this._mediaQueries)){this._clearMediaQueries();var i=this._config.conditions,r=1===i.length&&"condition"in i[0]&&"screen"===i[0].condition&&!!i[0].media_query;this._listeners=(0,f.CZ)(e,(function(e){r?n.setVisibility(e):n._updateVisibility()}))}}}},{kind:"method",key:"update",value:function(n){(0,a.A)(t,"update",this,3)([n]),(n.has("_element")||n.has("_config")||n.has("hass")||n.has("preview"))&&(this._listenMediaQueries(),this._updateVisibility())}},{kind:"method",key:"_updateVisibility",value:function(){if(this._element&&this.hass&&this._config){this._element.preview=this.preview;var n=(0,f.XH)(this._config.conditions,this.hass);this.setVisibility(n)}}},{kind:"method",key:"setVisibility",value:function(n){if(this._element&&this.hass){var e=this.preview||n;this.hidden!==!e&&(this.toggleAttribute("hidden",!e),this.style.setProperty("display",e?"":"none")),e?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}}}]}}),c.mN)},22235:function(n,e,t){var i=t(22858).A,r=t(33994).A;t.a(n,function(){var n=i(r().mark((function n(i,o){var s,u,a,c,d,l,f,h,v,y,_,m;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,t.r(e),s=t(35806),u=t(71008),a=t(62193),c=t(2816),d=t(27927),l=t(71499),f=t(81027),h=t(26098),v=t(29818),y=t(66651),_=t(31271),!(m=i([_])).then){n.next=24;break}return n.next=20,m;case 20:n.t1=n.sent,n.t0=(0,n.t1)(),n.next=25;break;case 24:n.t0=m;case 25:_=n.t0[0],(0,d.A)([(0,v.EM)("hui-conditional-row")],(function(n,e){var t=function(e){function t(){var e;(0,u.A)(this,t);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return e=(0,a.A)(this,t,[].concat(r)),n(e),e}return(0,c.A)(t,e),(0,s.A)(t)}(e);return{F:t,d:[{kind:"method",key:"setConfig",value:function(n){if(this.validateConfig(n),!n.row)throw new Error("No row configured");this._element=(0,_.T)(n.state_color?Object.assign({state_color:!0},n.row):n.row)}}]}}),y.E),o(),n.next=33;break;case 30:n.prev=30,n.t2=n.catch(0),o(n.t2);case 33:case"end":return n.stop()}}),n,null,[[0,30]])})));return function(e,t){return n.apply(this,arguments)}}())}}]);
//# sourceMappingURL=22235.SQAFQIvCru8.js.map