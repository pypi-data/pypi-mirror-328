{"version":3,"file":"lib_index_js.99ca47bebe5dfc073a39.js","mappings":"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","sources":["webpack://climb-onyx-gui-extension/./src/agateWidget.tsx","webpack://climb-onyx-gui-extension/./src/handler.ts","webpack://climb-onyx-gui-extension/./src/icon.ts","webpack://climb-onyx-gui-extension/./src/index.ts","webpack://climb-onyx-gui-extension/./src/onyxWidget.tsx","webpack://climb-onyx-gui-extension/./src/openS3FileWidget.ts"],"sourcesContent":["import React from 'react';\r\nimport { ReactWidget } from '@jupyterlab/apputils';\r\nimport Agate from 'climb-agate-gui';\r\n\r\nexport class AgateWidget extends ReactWidget {\r\n  constructor(\r\n    route: (route: string) => Promise<Response>,\r\n    s3: (path: string) => void,\r\n    fw: (path: string, content: string) => void,\r\n    v: string\r\n  ) {\r\n    super();\r\n    this.routeHandler = route;\r\n    this.s3PathHandler = s3;\r\n    this.fileWriter = fw;\r\n    this.version = v;\r\n  }\r\n\r\n  routeHandler: (route: string) => Promise<Response>;\r\n  s3PathHandler: (path: string) => void;\r\n  fileWriter: (path: string, content: string) => void;\r\n  version: string;\r\n\r\n  render(): JSX.Element {\r\n    return (\r\n      <Agate\r\n        httpPathHandler={this.routeHandler}\r\n        s3PathHandler={this.s3PathHandler}\r\n        fileWriter={this.fileWriter}\r\n        extVersion={this.version}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { ServerConnection } from '@jupyterlab/services';\r\nimport { URLExt } from '@jupyterlab/coreutils';\r\n\r\n/**\r\n * Call the API extension\r\n *\r\n * @param endPoint API REST end point for the extension\r\n * @param init Initial values for the request\r\n * @returns The response body interpreted as JSON\r\n */\r\nexport async function requestAPI<T>(\r\n  endPoint = '',\r\n  init: RequestInit = {},\r\n  param: [string, string] = ['', ''],\r\n  param2: [string, string] = ['', ''],\r\n  agate:boolean=false\r\n): Promise<T> {\r\n  // Make request to Jupyter API\r\n  const settings = ServerConnection.makeSettings();\r\n\r\n  const requestUrl = URLExt.join(settings.baseUrl, 'climb-onyx-gui', endPoint);\r\n\r\n  const url = new URL(requestUrl);\r\n  if (param[0] !== '') {\r\n    url.searchParams.append(param[0], param[1]);\r\n  }\r\n  if (param2[0] !== '') {\r\n    url.searchParams.append(param2[0], param2[1]);\r\n  }\r\n  if(agate) url.searchParams.append(\"agate\", \"true\");\r\n\r\n  let response: Response;\r\n  try {\r\n    response = await ServerConnection.makeRequest(\r\n      url.toString(),\r\n      init,\r\n      settings\r\n    );\r\n  } catch (error) {\r\n    throw new ServerConnection.NetworkError(error as any);\r\n  }\r\n\r\n  let data: any = await response.text();\r\n\r\n  if (data.length > 0) {\r\n    try {\r\n      data = JSON.parse(data);\r\n    } catch (error) {\r\n      console.log('Not a JSON response body.', response);\r\n    }\r\n  }\r\n\r\n  if (!response.ok) {\r\n    throw new ServerConnection.ResponseError(response, data.message || data);\r\n  }\r\n\r\n  return data;\r\n}\r\n\r\nexport async function requestAPIResponse(\r\n  endPoint = '',\r\n  init: RequestInit = {},\r\n  param: [string, string] = ['', ''],\r\n  agate:boolean=false\r\n): Promise<Response> {\r\n  // Make request to Jupyter API\r\n  const settings = ServerConnection.makeSettings();\r\n\r\n  const requestUrl = URLExt.join(settings.baseUrl, 'climb-onyx-gui', endPoint);\r\n\r\n  const url = new URL(requestUrl);\r\n  if (param[0] !== '') {\r\n    url.searchParams.append(param[0], param[1]);\r\n  }\r\n  if(agate) url.searchParams.append(\"agate\", \"true\");\r\n\r\n  let response: Response;\r\n  try {\r\n    response = await ServerConnection.makeRequest(\r\n      url.toString(),\r\n      init,\r\n      settings\r\n    );\r\n  } catch (error) {\r\n    throw new ServerConnection.NetworkError(error as any);\r\n  }\r\n  return response;\r\n}\r\n","import { LabIcon } from '@jupyterlab/ui-components';\r\nimport DNA_ICON from './../style/icons/dna.svg';\r\nimport INNER_JOIN_ICON from './../style/icons/inner_join.svg';\r\nimport OPEN_FILE_ICON from './../style/icons/open_file.svg';\r\n\r\nexport const dnaIcon = new LabIcon({\r\n  name: 'climb-onyx-gui:dna',\r\n  svgstr: DNA_ICON\r\n});\r\n\r\nexport const innerJoinIcon = new LabIcon({\r\n  name: 'climb-onyx-gui:inner-join',\r\n  svgstr: INNER_JOIN_ICON\r\n});\r\n\r\nexport const openFileIcon = new LabIcon({\r\n  name: 'climb-onyx-gui:open-file',\r\n  svgstr: OPEN_FILE_ICON\r\n});\r\n","import {\r\n  JupyterFrontEnd,\r\n  JupyterFrontEndPlugin\r\n} from '@jupyterlab/application';\r\nimport {\r\n  ICommandPalette,\r\n  MainAreaWidget,\r\n  WidgetTracker,\r\n  showDialog,\r\n  Dialog\r\n} from '@jupyterlab/apputils';\r\nimport { IDocumentManager } from '@jupyterlab/docmanager';\r\nimport { HTMLViewer, IHTMLViewerTracker } from '@jupyterlab/htmlviewer';\r\nimport { ILauncher } from '@jupyterlab/launcher';\r\nimport { requestAPI, requestAPIResponse } from './handler';\r\nimport { OnyxWidget } from './onyxWidget';\r\nimport { AgateWidget } from './agateWidget';\r\nimport { dnaIcon, innerJoinIcon, openFileIcon } from './icon';\r\nimport { OpenS3FileWidget } from './openS3FileWidget';\r\n\r\n/**\r\n * Initialization data for the climb-onyx-gui extension.\r\n */\r\nconst plugin: JupyterFrontEndPlugin<void> = {\r\n  id: 'climb-onyx-gui-extension:plugin',\r\n  description: 'JupyterLab extension for the Onyx Graphical User Interface',\r\n  autoStart: true,\r\n  optional: [ILauncher, IHTMLViewerTracker],\r\n  requires: [ICommandPalette, IDocumentManager],\r\n  activate: (\r\n    app: JupyterFrontEnd,\r\n    palette: ICommandPalette,\r\n    documentManager: IDocumentManager,\r\n    launcher: ILauncher | null,\r\n    htmlTracker: IHTMLViewerTracker | null\r\n  ) => {\r\n    console.log('JupyterLab extension @climb-onyx-gui is activated!');\r\n\r\n    const docs_command = 'docs_extension';\r\n    const onyx_command = 'onyx_extension';\r\n    const agate_command = 'agate_extension';\r\n    const s3_command = 's3_onyx_extension';\r\n    const category = 'CLIMB-TRE';\r\n\r\n    let version = '';\r\n\r\n    requestAPI<any>('version')\r\n      .then(data => {\r\n        version = data['version'];\r\n        console.log(`JupyterLab extension version: ${version}`);\r\n      })\r\n      .catch(_ => {});\r\n\r\n    const httpPathHandler = async (route: string): Promise<Response> => {\r\n      return requestAPIResponse('reroute', {}, ['route', route]);\r\n    };\r\n\r\n    \r\n    const httpAgatePathHandler = async (route: string): Promise<Response> => {\r\n      return requestAPIResponse('reroute', {}, ['route', route], true);\r\n    };\r\n\r\n    const s3PathHandler = async (path: string): Promise<void> => {\r\n      return requestAPI<any>('s3', {}, ['s3location', path]).then(data => {\r\n        documentManager.open(data['temp_file']);\r\n      });\r\n    };\r\n\r\n    const fileWriteHandler = async (\r\n      path: string,\r\n      content: string\r\n    ): Promise<void> => {\r\n      return requestAPI<any>(\r\n        'file-write',\r\n        {\r\n          body: JSON.stringify({ content: content }),\r\n          method: 'POST'\r\n        },\r\n        ['path', path]\r\n      ).then(data => {\r\n        documentManager.open(data['path']);\r\n      });\r\n    };\r\n\r\n    app.commands.addCommand(docs_command, {\r\n      label: 'CLIMB-TRE Documentation',\r\n      caption: 'CLIMB-TRE Documentation',\r\n      icon: dnaIcon,\r\n      execute: () => {\r\n        // Open link in new tab\r\n        window.open('https://climb-tre.github.io/');\r\n      }\r\n    });\r\n\r\n    // Create a single widget\r\n    let widget: MainAreaWidget<OnyxWidget>;\r\n\r\n    app.commands.addCommand(onyx_command, {\r\n      label: 'Onyx',\r\n      caption: 'Onyx',\r\n      icon: innerJoinIcon,\r\n      execute: () => {\r\n        if (!widget || widget.disposed) {\r\n          const content = new OnyxWidget(\r\n            httpPathHandler,\r\n            s3PathHandler,\r\n            fileWriteHandler,\r\n            version\r\n          );\r\n          content.addClass('onyx-Widget');\r\n          widget = new MainAreaWidget({ content });\r\n          widget.title.label = 'Onyx';\r\n          widget.title.closable = true;\r\n        }\r\n        if (!tracker.has(widget)) {\r\n          tracker.add(widget);\r\n        }\r\n        if (!widget.isAttached) {\r\n          // Attach the widget to the main work area if it's not there\r\n          app.shell.add(widget, 'main');\r\n        }\r\n\r\n        // Activate the widget\r\n        app.shell.activateById(widget.id);\r\n      }\r\n    });\r\n\r\n    // Create a single agate widget\r\n    let agate_widget: MainAreaWidget<AgateWidget>;\r\n\r\n    app.commands.addCommand(agate_command, {\r\n      label: 'Agate',\r\n      caption: 'Agate',\r\n      icon: dnaIcon,\r\n      execute: () => {\r\n        if (!agate_widget || agate_widget.disposed) {\r\n          const content = new AgateWidget(\r\n            httpAgatePathHandler,\r\n            s3PathHandler,\r\n            fileWriteHandler,\r\n            version\r\n          );\r\n          content.addClass('agate-Widget');\r\n          agate_widget = new MainAreaWidget({ content });\r\n          agate_widget.title.label = 'Agate';\r\n          agate_widget.title.closable = true;\r\n        }\r\n        if (!agate_tracker.has(agate_widget)) {\r\n          agate_tracker.add(agate_widget);\r\n        }\r\n        if (!agate_widget.isAttached) {\r\n          // Attach the widget to the main work area if it's not there\r\n          app.shell.add(agate_widget, 'main');\r\n        }\r\n\r\n        // Activate the widget\r\n        app.shell.activateById(agate_widget.id);\r\n      }\r\n    });\r\n\r\n    app.commands.addCommand(s3_command, {\r\n      label: 'Open S3 Document',\r\n      caption: 'Open S3 Document',\r\n      icon: openFileIcon,\r\n      execute: () => {\r\n        showDialog({\r\n          body: new OpenS3FileWidget(),\r\n          buttons: [Dialog.cancelButton(), Dialog.okButton({ label: 'GO' })],\r\n          focusNodeSelector: 'input',\r\n          title: 'Open S3 Document'\r\n        })\r\n          .then(result => {\r\n            if (result.button.label === 'Cancel') {\r\n              return;\r\n            }\r\n            if (!result.value) {\r\n              return;\r\n            }\r\n            const s3_link = result.value;\r\n            s3PathHandler(s3_link).catch(reason => {\r\n              console.error(\r\n                `The climb-onyx-gui server extension appears to be missing.\\n${reason}`\r\n              );\r\n            });\r\n          })\r\n          .catch(reason => {\r\n            console.error(\r\n              `The climb-onyx-gui server extension appears to be missing.\\n${reason}`\r\n            );\r\n          });\r\n      }\r\n    });\r\n\r\n    palette.addItem({ command: docs_command, category: category });\r\n    palette.addItem({ command: onyx_command, category: category });\r\n    palette.addItem({ command: s3_command, category: category });\r\n\r\n    if (launcher) {\r\n      launcher.add({command: docs_command, category: category});\r\n      launcher.add({command: onyx_command, category: category});\r\n      launcher.add({command: s3_command, category: category});\r\n    }\r\n\r\n    httpAgatePathHandler(\"\").then(data=>{\r\n      if (data.status==200) {\r\n        palette.addItem({ command: agate_command, category: category });\r\n        if(launcher) launcher.add({command: agate_command,category: category});\r\n\r\n      }\r\n    }\r\n    )\r\n\r\n    if (htmlTracker) {\r\n      htmlTracker.widgetAdded.connect((sender, panel: HTMLViewer) => {\r\n        panel.trusted = true;\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst tracker = new WidgetTracker<MainAreaWidget<OnyxWidget>>({\r\n  namespace: 'climb-onyx-gui'\r\n});\r\n\r\nconst agate_tracker = new WidgetTracker<MainAreaWidget<AgateWidget>>({\r\n  namespace: 'climb-agate-gui'\r\n});\r\n\r\nexport default plugin;\r\n","import React from 'react';\r\nimport { ReactWidget } from '@jupyterlab/apputils';\r\nimport Onyx from 'climb-onyx-gui';\r\n\r\nexport class OnyxWidget extends ReactWidget {\r\n  constructor(\r\n    route: (route: string) => Promise<Response>,\r\n    s3: (path: string) => Promise<void>,\r\n    fw: (path: string, content: string) => Promise<void>,\r\n    v: string\r\n  ) {\r\n    super();\r\n    this.httpPathHandler = route;\r\n    this.s3PathHandler = s3;\r\n    this.fileWriter = fw;\r\n    this.version = v;\r\n  }\r\n\r\n  httpPathHandler: (route: string) => Promise<Response>;\r\n  s3PathHandler: (path: string) => Promise<void>;\r\n  fileWriter: (path: string, content: string) => Promise<void>;\r\n  version: string;\r\n\r\n  render(): JSX.Element {\r\n    return (\r\n      <Onyx\r\n        httpPathHandler={this.httpPathHandler}\r\n        s3PathHandler={this.s3PathHandler}\r\n        fileWriter={this.fileWriter}\r\n        extVersion={this.version}\r\n      />\r\n    );\r\n  }\r\n}\r\n","import { Widget } from '@lumino/widgets';\r\n\r\nexport class OpenS3FileWidget extends Widget {\r\n  constructor() {\r\n    const body = document.createElement('div');\r\n    const existingLabel = document.createElement('label');\r\n    existingLabel.textContent = 'S3 file name:';\r\n\r\n    const input = document.createElement('input');\r\n    input.value = '';\r\n    input.placeholder = 's3://example-bucket/example-file.html';\r\n\r\n    body.appendChild(existingLabel);\r\n    body.appendChild(input);\r\n\r\n    super({ node: body });\r\n  }\r\n\r\n  get inputNode() {\r\n    return this.node.getElementsByTagName('input')[0];\r\n  }\r\n\r\n  getValue() {\r\n    return this.inputNode.value;\r\n  }\r\n}\r\n"],"names":[],"sourceRoot":""}