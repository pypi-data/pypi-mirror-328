import{I,J as $,f as B,j as C,K as p,k as l,i as v,T as P,L as D,M as Q,d as S,o as r,p as c,e as g,q as b,E as T,D as E,r as L,c as m,w as _,F as N,x as V,y as h,N as j,A as k}from"./index-BUiL6krN.js";import{Q as G}from"./QPage-Bm0J7dav.js";import{Q as A}from"./QImg-DgY_VQCT.js";import{_ as F}from"./ReturnButton.vue_vue_type_script_setup_true_lang-tYmK-nuM.js";import{_ as H}from"./RouteAfterTimeout.vue_vue_type_script_setup_true_lang-DumT8dEC.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./QPageSticky-BjJ36ZJv.js";import"./vue-i18n-CLc_Z9KV.js";const w={threshold:0,root:null,rootMargin:"0px"};function M(e,n,t){let o,i,a;typeof t=="function"?(o=t,i=w,a=n.cfg===void 0):(o=t.handler,i=Object.assign({},w,t.cfg),a=n.cfg===void 0||$(n.cfg,i)===!1),n.handler!==o&&(n.handler=o),a===!0&&(n.cfg=i,n.observer!==void 0&&n.observer.unobserve(e),n.observer=new IntersectionObserver(([s])=>{if(typeof n.handler=="function"){if(s.rootBounds===null&&document.body.contains(e)===!0){n.observer.unobserve(e),n.observer.observe(e);return}(n.handler(s,n.observer)===!1||n.once===!0&&s.isIntersecting===!0)&&q(e)}},i),n.observer.observe(e))}function q(e){const n=e.__qvisible;n!==void 0&&(n.observer!==void 0&&n.observer.unobserve(e),delete e.__qvisible)}const O=I({name:"intersection",mounted(e,{modifiers:n,value:t}){const o={once:n.once===!0};M(e,o,t),e.__qvisible=o},updated(e,n){const t=e.__qvisible;t!==void 0&&M(e,t,n.value)},beforeUnmount:q}),Y=B({name:"QIntersection",props:{tag:{type:String,default:"div"},once:Boolean,transition:String,transitionDuration:{type:[String,Number],default:300},ssrPrerender:Boolean,margin:String,threshold:[Number,Array],root:{default:null},disable:Boolean,onVisibility:Function},setup(e,{slots:n,emit:t}){const o=C(p.value===!0?e.ssrPrerender:!1),i=l(()=>e.root!==void 0||e.margin!==void 0||e.threshold!==void 0?{handler:d,cfg:{root:e.root,rootMargin:e.margin,threshold:e.threshold}}:d),a=l(()=>e.disable!==!0&&(p.value!==!0||e.once!==!0||e.ssrPrerender!==!0)),s=l(()=>[[O,i.value,void 0,{once:e.once}]]),u=l(()=>`--q-transition-duration: ${e.transitionDuration}ms`);function d(f){o.value!==f.isIntersecting&&(o.value=f.isIntersecting,e.onVisibility!==void 0&&t("visibility",o.value))}function y(){if(o.value===!0)return[v("div",{key:"content",style:u.value},Q(n.default))];if(n.hidden!==void 0)return[v("div",{key:"hidden",style:u.value},n.hidden())]}return()=>{const f=e.transition?[v(P,{name:"q-transition--"+e.transition},y)]:y();return D(e.tag,{class:"q-intersection"},f,"main",a.value,()=>s.value)}}}),J={key:0},K={key:1},U={class:"absolute-full"},z=["src"],W=S({__name:"MediaItemThumbnailViewer",props:{item:{}},setup(e){return(n,t)=>n.item.media_type!="video"?(r(),c("div",J,[g(A,{src:`/media/thumbnail/${n.item.id}`,loading:"eager","no-transition":"","loading-show-delay":"800",ratio:1,class:"rounded-borders"},null,8,["src"])])):(r(),c("div",K,[t[0]||(t[0]=b("div",{style:{"padding-bottom":"100%"}},null,-1)),b("div",U,[b("video",{style:{width:"100%",height:"100%","object-fit":"cover","object-position":"50% 50%"},autoplay:"",loop:"",muted:"",playsinline:"",src:`/media/thumbnail/${n.item.id}`,class:"rounded-borders"},null,8,z)])]))}}),X={key:0,class:"row justify-center q-gutter-sm"},Z=["innerHTML"],x=S({__name:"GalleryPage",props:{standaloneMode:Boolean},setup(e){const n=e,t=T(),o=E(),i=l(()=>o.collection_number_of_items==0);return(a,s)=>{const u=L("router-link");return r(),m(G,{id:"gallery-page",padding:""},{default:_(()=>[i.value?(r(),c("div",{key:1,innerHTML:h(t).configuration.uisettings.GALLERY_EMPTY_MSG},null,8,Z)):(r(),c("div",X,[(r(!0),c(N,null,V(h(o).collection,d=>(r(),m(Y,{key:d.id,once:"",class:"preview-item"},{default:_(()=>[g(u,{to:{name:"mediaviewer",params:{id:d.id}}},{default:_(()=>[g(j,{class:"q-ma-xs no-shadow"},{default:_(()=>[g(W,{item:d},null,8,["item"])]),_:2},1024)]),_:2},1032,["to"])]),_:2},1024))),128))])),n.standaloneMode?k("",!0):(r(),m(F,{key:2,onTriggerReturn:s[0]||(s[0]=d=>a.$router.back())})),n.standaloneMode?k("",!0):(r(),m(H,{key:3,route:"/","timeout-ms":h(t).configuration.uisettings.show_frontpage_timeout*60*1e3},null,8,["timeout-ms"]))]),_:1})}}}),de=R(x,[["__scopeId","data-v-dec1be6d"]]);export{de as default};
